2018-09-19 09:15:02 [info][yii\db\Command::execute] INSERT INTO `data_hkhsi` (`price`, `time`) VALUES ('27084.66', '2018-09-18 16:09:00')
2018-09-19 09:15:02 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ag`
2018-09-19 09:15:02 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ag' AND kcu.table_name = 'data_ag'
2018-09-19 09:15:02 [info][yii\db\Command::execute] INSERT INTO `data_ag` (`price`, `time`) VALUES ('14.184', '2018-09-19 09:12:53')
2018-09-19 09:15:02 [info][yii\db\Command::execute] INSERT INTO `data_hkhsi` (`price`, `time`) VALUES ('27084.66', '2018-09-18 16:09:00')
2018-09-19 09:15:02 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-09-19 09:15:02 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-09-19 09:15:02 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('1203.3', '2018-09-19 09:14:43')
2018-09-19 09:15:02 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_yb`
2018-09-19 09:15:02 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_yb' AND kcu.table_name = 'data_yb'
2018-09-19 09:15:02 [info][yii\db\Command::execute] INSERT INTO `data_yb` (`price`, `time`) VALUES ('1.3149', '2018-09-19 09:15:02')
2018-09-19 09:15:02 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ay`
2018-09-19 09:15:02 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ay' AND kcu.table_name = 'data_ay'
2018-09-19 09:15:02 [info][yii\db\Command::execute] INSERT INTO `data_ay` (`price`, `time`) VALUES ('0.72182', '2018-09-19 09:15:02')
2018-09-19 09:15:02 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_jy`
2018-09-19 09:15:02 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_jy' AND kcu.table_name = 'data_jy'
2018-09-19 09:15:02 [info][yii\db\Command::execute] INSERT INTO `data_jy` (`price`, `time`) VALUES ('0.7699', '2018-09-19 09:15:00')
2018-09-19 09:15:02 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-09-19 09:15:02 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-09-19 09:15:02 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='69.70', `open`='69.74', `high`='69.84', `low`='69.65', `close`='69.85', `diff`='-0.14999999999999', `diff_rate`='-0.2147', `time`='2018-09-19 09:14:47' WHERE `name`='ic1609'
2018-09-19 09:15:02 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='1.16663', `open`='1.16698', `high`='1.16824', `low`='1.16663', `close`='1.16698', `diff`='-0.00034999999999985', `diff_rate`='-0.03', `time`='2018-09-19 09:15:02' WHERE `name`='gc'
2018-09-19 09:15:02 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='1.3149', `open`='1.31463', `high`='1.31754', `low`='1.3149', `close`='1.31483', `diff`='7.0000000000014E-5', `diff_rate`='0.01', `time`='2018-09-19 09:15:02' WHERE `name`='yb'
2018-09-19 09:15:02 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='0.72182', `open`='0.72238', `high`='0.72345', `low`='0.72182', `close`='0.72236', `diff`='-0.00053999999999998', `diff_rate`='-0.07', `time`='2018-09-19 09:15:02' WHERE `name`='ay'
2018-09-19 09:15:02 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-09-19 09:15:02 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-09-19 09:15:02 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-09-19 09:15:04 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-09-19 09:15:04 [trace][yii\base\Module::getModule] Loading module: gii
2018-09-19 09:15:04 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-09-19 09:15:04 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-09-19 09:15:04 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-09-19 09:15:04 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-09-19 09:15:04 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wjypay
2018-09-19 09:15:04 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-09-19 09:15:04 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-09-19 09:15:04 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_oil`
2018-09-19 09:15:04 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_oil' AND kcu.table_name = 'data_oil'
2018-09-19 09:15:04 [info][yii\db\Command::execute] INSERT INTO `data_oil` (`price`, `time`) VALUES ('69.70', '2018-09-19 09:14:47')
2018-09-19 09:15:04 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ic1609`
2018-09-19 09:15:04 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ic1609' AND kcu.table_name = 'data_ic1609'
2018-09-19 09:15:04 [info][yii\db\Command::execute] INSERT INTO `data_ic1609` (`price`, `time`) VALUES ('69.70', '2018-09-19 09:14:47')
2018-09-19 09:15:04 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_gc`
2018-09-19 09:15:04 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_gc' AND kcu.table_name = 'data_gc'
2018-09-19 09:15:04 [info][yii\db\Command::execute] INSERT INTO `data_gc` (`price`, `time`) VALUES ('1.1666', '2018-09-19 09:15:04')
2018-09-19 09:15:04 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_hkhsi`
2018-09-19 09:15:04 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_hkhsi' AND kcu.table_name = 'data_hkhsi'
2018-09-19 09:15:04 [info][yii\db\Command::execute] INSERT INTO `data_hkhsi` (`price`, `time`) VALUES ('27084.66', '2018-09-18 16:09:00')
2018-09-19 09:15:04 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ag`
2018-09-19 09:15:04 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ag' AND kcu.table_name = 'data_ag'
2018-09-19 09:15:04 [info][yii\db\Command::execute] INSERT INTO `data_ag` (`price`, `time`) VALUES ('14.184', '2018-09-19 09:12:53')
2018-09-19 09:15:04 [info][yii\db\Command::execute] INSERT INTO `data_hkhsi` (`price`, `time`) VALUES ('27084.66', '2018-09-18 16:09:00')
2018-09-19 09:15:04 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-09-19 09:15:04 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-09-19 09:15:04 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('1203.3', '2018-09-19 09:14:43')
2018-09-19 09:15:04 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_yb`
2018-09-19 09:15:04 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_yb' AND kcu.table_name = 'data_yb'
2018-09-19 09:15:04 [info][yii\db\Command::execute] INSERT INTO `data_yb` (`price`, `time`) VALUES ('1.31494', '2018-09-19 09:15:04')
2018-09-19 09:15:04 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ay`
2018-09-19 09:15:04 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ay' AND kcu.table_name = 'data_ay'
2018-09-19 09:15:05 [info][yii\db\Command::execute] INSERT INTO `data_ay` (`price`, `time`) VALUES ('0.72182', '2018-09-19 09:15:04')
2018-09-19 09:15:05 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_jy`
2018-09-19 09:15:05 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_jy' AND kcu.table_name = 'data_jy'
2018-09-19 09:15:05 [info][yii\db\Command::execute] INSERT INTO `data_jy` (`price`, `time`) VALUES ('0.7699', '2018-09-19 09:15:00')
2018-09-19 09:15:05 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-09-19 09:15:05 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-09-19 09:15:05 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='69.70', `open`='69.74', `high`='69.84', `low`='69.65', `close`='69.85', `diff`='-0.14999999999999', `diff_rate`='-0.2147', `time`='2018-09-19 09:14:47' WHERE `name`='ic1609'
2018-09-19 09:15:05 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='1.1666', `open`='1.16698', `high`='1.16824', `low`='1.1666', `close`='1.16698', `diff`='-0.00037999999999982', `diff_rate`='-0.03', `time`='2018-09-19 09:15:04' WHERE `name`='gc'
2018-09-19 09:15:05 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='1.31494', `open`='1.31463', `high`='1.31754', `low`='1.31494', `close`='1.31483', `diff`='0.00011000000000005', `diff_rate`='0.01', `time`='2018-09-19 09:15:04' WHERE `name`='yb'
2018-09-19 09:15:05 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='0.72182', `open`='0.72238', `high`='0.72345', `low`='0.72182', `close`='0.72236', `diff`='-0.00053999999999998', `diff_rate`='-0.07', `time`='2018-09-19 09:15:04' WHERE `name`='ay'
2018-09-19 09:15:05 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-09-19 09:15:05 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-09-19 09:15:05 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-09-19 09:15:06 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-09-19 09:15:06 [trace][yii\base\Module::getModule] Loading module: gii
2018-09-19 09:15:06 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-09-19 09:15:06 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-09-19 09:15:06 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-09-19 09:15:06 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-09-19 09:15:06 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wjypay
2018-09-19 09:15:06 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-09-19 09:15:06 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-09-19 09:15:06 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_oil`
2018-09-19 09:15:06 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_oil' AND kcu.table_name = 'data_oil'
2018-09-19 09:15:06 [info][yii\db\Command::execute] INSERT INTO `data_oil` (`price`, `time`) VALUES ('69.71', '2018-09-19 09:15:06')
2018-09-19 09:15:06 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ic1609`
2018-09-19 09:15:06 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ic1609' AND kcu.table_name = 'data_ic1609'
2018-09-19 09:15:06 [info][yii\db\Command::execute] INSERT INTO `data_ic1609` (`price`, `time`) VALUES ('69.71', '2018-09-19 09:15:06')
2018-09-19 09:15:06 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_gc`
2018-09-19 09:15:06 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_gc' AND kcu.table_name = 'data_gc'
2018-09-19 09:15:06 [info][yii\db\Command::execute] INSERT INTO `data_gc` (`price`, `time`) VALUES ('1.16656', '2018-09-19 09:15:06')
2018-09-19 09:15:06 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_hkhsi`
2018-09-19 09:15:06 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_hkhsi' AND kcu.table_name = 'data_hkhsi'
2018-09-19 09:15:06 [info][yii\db\Command::execute] INSERT INTO `data_hkhsi` (`price`, `time`) VALUES ('27084.66', '2018-09-18 16:09:00')
2018-09-19 09:15:06 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ag`
2018-09-19 09:15:06 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ag' AND kcu.table_name = 'data_ag'
2018-09-19 09:15:06 [info][yii\db\Command::execute] INSERT INTO `data_ag` (`price`, `time`) VALUES ('14.179', '2018-09-19 09:12:53')
2018-09-19 09:15:06 [info][yii\db\Command::execute] INSERT INTO `data_hkhsi` (`price`, `time`) VALUES ('27084.66', '2018-09-18 16:09:00')
2018-09-19 09:15:06 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-09-19 09:15:06 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-09-19 09:15:06 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('1203.3', '2018-09-19 09:14:43')
2018-09-19 09:15:06 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_yb`
2018-09-19 09:15:07 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_yb' AND kcu.table_name = 'data_yb'
2018-09-19 09:15:07 [info][yii\db\Command::execute] INSERT INTO `data_yb` (`price`, `time`) VALUES ('1.31493', '2018-09-19 09:15:06')
2018-09-19 09:15:07 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ay`
2018-09-19 09:15:07 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ay' AND kcu.table_name = 'data_ay'
2018-09-19 09:15:07 [info][yii\db\Command::execute] INSERT INTO `data_ay` (`price`, `time`) VALUES ('0.72182', '2018-09-19 09:15:06')
2018-09-19 09:15:07 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_jy`
2018-09-19 09:15:07 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_jy' AND kcu.table_name = 'data_jy'
2018-09-19 09:15:07 [info][yii\db\Command::execute] INSERT INTO `data_jy` (`price`, `time`) VALUES ('0.7699', '2018-09-19 09:15:00')
2018-09-19 09:15:07 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-09-19 09:15:07 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-09-19 09:15:07 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='69.71', `open`='69.74', `high`='69.84', `low`='69.65', `close`='69.85', `diff`='-0.14', `diff_rate`='-0.2004', `time`='2018-09-19 09:15:06' WHERE `name`='oil'
2018-09-19 09:15:07 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='69.71', `open`='69.74', `high`='69.84', `low`='69.65', `close`='69.85', `diff`='-0.14', `diff_rate`='-0.2004', `time`='2018-09-19 09:15:06' WHERE `name`='ic1609'
2018-09-19 09:15:07 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='1.16656', `open`='1.16698', `high`='1.16824', `low`='1.16656', `close`='1.16698', `diff`='-0.00041999999999986', `diff_rate`='-0.04', `time`='2018-09-19 09:15:06' WHERE `name`='gc'
2018-09-19 09:15:07 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='1.31493', `open`='1.31463', `high`='1.31754', `low`='1.31493', `close`='1.31483', `diff`='9.9999999999989E-5', `diff_rate`='0.01', `time`='2018-09-19 09:15:06' WHERE `name`='yb'
2018-09-19 09:15:07 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='0.72182', `open`='0.72238', `high`='0.72345', `low`='0.72182', `close`='0.72236', `diff`='-0.00053999999999998', `diff_rate`='-0.07', `time`='2018-09-19 09:15:06' WHERE `name`='ay'
2018-09-19 09:15:07 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-09-19 09:15:07 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-09-19 09:15:07 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-09-19 09:15:08 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-09-19 09:15:08 [trace][yii\base\Module::getModule] Loading module: gii
2018-09-19 09:15:08 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-09-19 09:15:08 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-09-19 09:15:08 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-09-19 09:15:08 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-09-19 09:15:08 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wjypay
2018-09-19 09:15:08 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-09-19 09:15:08 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-09-19 09:15:08 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_oil`
2018-09-19 09:15:08 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_oil' AND kcu.table_name = 'data_oil'
2018-09-19 09:15:08 [info][yii\db\Command::execute] INSERT INTO `data_oil` (`price`, `time`) VALUES ('69.71', '2018-09-19 09:15:06')
2018-09-19 09:15:08 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ic1609`
2018-09-19 09:15:08 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ic1609' AND kcu.table_name = 'data_ic1609'
2018-09-19 09:15:08 [info][yii\db\Command::execute] INSERT INTO `data_ic1609` (`price`, `time`) VALUES ('69.71', '2018-09-19 09:15:06')
2018-09-19 09:15:08 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_gc`
2018-09-19 09:15:08 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_gc' AND kcu.table_name = 'data_gc'
2018-09-19 09:15:09 [info][yii\db\Command::execute] INSERT INTO `data_gc` (`price`, `time`) VALUES ('1.1666', '2018-09-19 09:15:07')
2018-09-19 09:15:09 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_hkhsi`
2018-09-19 09:15:09 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_hkhsi' AND kcu.table_name = 'data_hkhsi'
2018-09-19 09:15:09 [info][yii\db\Command::execute] INSERT INTO `data_hkhsi` (`price`, `time`) VALUES ('27084.66', '2018-09-18 16:09:00')
2018-09-19 09:15:09 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ag`
2018-09-19 09:15:09 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ag' AND kcu.table_name = 'data_ag'
2018-09-19 09:15:09 [info][yii\db\Command::execute] INSERT INTO `data_ag` (`price`, `time`) VALUES ('14.179', '2018-09-19 09:12:53')
2018-09-19 09:15:09 [info][yii\db\Command::execute] INSERT INTO `data_hkhsi` (`price`, `time`) VALUES ('27084.66', '2018-09-18 16:09:00')
2018-09-19 09:15:09 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-09-19 09:15:09 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-09-19 09:15:09 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('1203.3', '2018-09-19 09:14:43')
2018-09-19 09:15:09 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_yb`
2018-09-19 09:15:09 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_yb' AND kcu.table_name = 'data_yb'
2018-09-19 09:15:09 [info][yii\db\Command::execute] INSERT INTO `data_yb` (`price`, `time`) VALUES ('1.31493', '2018-09-19 09:15:07')
2018-09-19 09:15:09 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ay`
2018-09-19 09:15:09 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ay' AND kcu.table_name = 'data_ay'
2018-09-19 09:15:09 [info][yii\db\Command::execute] INSERT INTO `data_ay` (`price`, `time`) VALUES ('0.72182', '2018-09-19 09:15:08')
2018-09-19 09:15:09 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_jy`
2018-09-19 09:15:09 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_jy' AND kcu.table_name = 'data_jy'
2018-09-19 09:15:09 [info][yii\db\Command::execute] INSERT INTO `data_jy` (`price`, `time`) VALUES ('0.7699', '2018-09-19 09:15:00')
2018-09-19 09:15:09 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-09-19 09:15:09 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-09-19 09:15:09 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='69.71', `open`='69.74', `high`='69.84', `low`='69.65', `close`='69.85', `diff`='-0.14', `diff_rate`='-0.2004', `time`='2018-09-19 09:15:06' WHERE `name`='ic1609'
2018-09-19 09:15:09 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='1.1666', `open`='1.16698', `high`='1.16824', `low`='1.1666', `close`='1.16698', `diff`='-0.00037999999999982', `diff_rate`='-0.03', `time`='2018-09-19 09:15:07' WHERE `name`='gc'
2018-09-19 09:15:09 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='1.31493', `open`='1.31463', `high`='1.31754', `low`='1.31493', `close`='1.31483', `diff`='9.9999999999989E-5', `diff_rate`='0.01', `time`='2018-09-19 09:15:07' WHERE `name`='yb'
2018-09-19 09:15:09 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='0.72182', `open`='0.72238', `high`='0.72345', `low`='0.72182', `close`='0.72236', `diff`='-0.00053999999999998', `diff_rate`='-0.07', `time`='2018-09-19 09:15:08' WHERE `name`='ay'
2018-09-19 09:15:09 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-09-19 09:15:09 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-09-19 09:15:09 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-09-19 09:15:10 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-09-19 09:15:10 [trace][yii\base\Module::getModule] Loading module: gii
2018-09-19 09:15:10 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-09-19 09:15:10 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-09-19 09:15:10 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-09-19 09:15:10 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-09-19 09:15:10 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wjypay
2018-09-19 09:15:10 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-09-19 09:15:10 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-09-19 09:15:11 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_oil`
2018-09-19 09:15:11 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_oil' AND kcu.table_name = 'data_oil'
2018-09-19 09:15:11 [info][yii\db\Command::execute] INSERT INTO `data_oil` (`price`, `time`) VALUES ('69.71', '2018-09-19 09:15:06')
2018-09-19 09:15:11 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ic1609`
2018-09-19 09:15:11 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ic1609' AND kcu.table_name = 'data_ic1609'
2018-09-19 09:15:11 [info][yii\db\Command::execute] INSERT INTO `data_ic1609` (`price`, `time`) VALUES ('69.71', '2018-09-19 09:15:06')
2018-09-19 09:15:11 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_gc`
2018-09-19 09:15:11 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_gc' AND kcu.table_name = 'data_gc'
2018-09-19 09:15:11 [info][yii\db\Command::execute] INSERT INTO `data_gc` (`price`, `time`) VALUES ('1.1666', '2018-09-19 09:15:09')
2018-09-19 09:15:11 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_hkhsi`
2018-09-19 09:15:11 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_hkhsi' AND kcu.table_name = 'data_hkhsi'
2018-09-19 09:15:11 [info][yii\db\Command::execute] INSERT INTO `data_hkhsi` (`price`, `time`) VALUES ('27084.66', '2018-09-18 16:09:00')
2018-09-19 09:15:11 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ag`
2018-09-19 09:15:11 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ag' AND kcu.table_name = 'data_ag'
2018-09-19 09:15:11 [info][yii\db\Command::execute] INSERT INTO `data_ag` (`price`, `time`) VALUES ('14.180', '2018-09-19 09:12:53')
2018-09-19 09:15:11 [info][yii\db\Command::execute] INSERT INTO `data_hkhsi` (`price`, `time`) VALUES ('27084.66', '2018-09-18 16:09:00')
2018-09-19 09:15:11 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-09-19 09:15:11 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-09-19 09:15:11 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('1203.4', '2018-09-19 09:15:10')
2018-09-19 09:15:11 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_yb`
2018-09-19 09:15:11 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_yb' AND kcu.table_name = 'data_yb'
2018-09-19 09:15:11 [info][yii\db\Command::execute] INSERT INTO `data_yb` (`price`, `time`) VALUES ('1.31493', '2018-09-19 09:15:10')
2018-09-19 09:15:11 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ay`
2018-09-19 09:15:11 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ay' AND kcu.table_name = 'data_ay'
2018-09-19 09:15:11 [info][yii\db\Command::execute] INSERT INTO `data_ay` (`price`, `time`) VALUES ('0.72182', '2018-09-19 09:15:10')
2018-09-19 09:15:11 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_jy`
2018-09-19 09:15:11 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_jy' AND kcu.table_name = 'data_jy'
2018-09-19 09:15:11 [info][yii\db\Command::execute] INSERT INTO `data_jy` (`price`, `time`) VALUES ('0.7699', '2018-09-19 09:15:00')
2018-09-19 09:15:11 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-09-19 09:15:11 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-09-19 09:15:11 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='69.71', `open`='69.74', `high`='69.84', `low`='69.65', `close`='69.85', `diff`='-0.14', `diff_rate`='-0.2004', `time`='2018-09-19 09:15:06' WHERE `name`='ic1609'
2018-09-19 09:15:11 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='1.1666', `open`='1.16698', `high`='1.16824', `low`='1.1666', `close`='1.16698', `diff`='-0.00037999999999982', `diff_rate`='-0.03', `time`='2018-09-19 09:15:09' WHERE `name`='gc'
2018-09-19 09:15:11 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='1203.4', `open`='1202.6', `high`='1204.5', `low`='1202.2', `close`='1202.9', `diff`='0.5', `diff_rate`='0.0416', `time`='2018-09-19 09:15:10' WHERE `name`='xau'
2018-09-19 09:15:11 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='1.31493', `open`='1.31463', `high`='1.31754', `low`='1.31493', `close`='1.31483', `diff`='9.9999999999989E-5', `diff_rate`='0.01', `time`='2018-09-19 09:15:10' WHERE `name`='yb'
2018-09-19 09:15:11 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='0.72182', `open`='0.72238', `high`='0.72345', `low`='0.72182', `close`='0.72236', `diff`='-0.00053999999999998', `diff_rate`='-0.07', `time`='2018-09-19 09:15:10' WHERE `name`='ay'
2018-09-19 09:15:11 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-09-19 09:15:11 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-09-19 09:15:11 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-09-19 09:15:12 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-09-19 09:15:12 [trace][yii\base\Module::getModule] Loading module: gii
2018-09-19 09:15:12 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-09-19 09:15:12 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-09-19 09:15:12 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-09-19 09:15:13 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-09-19 09:15:13 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wjypay
2018-09-19 09:15:13 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-09-19 09:15:13 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-09-19 09:15:13 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_oil`
2018-09-19 09:15:13 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_oil' AND kcu.table_name = 'data_oil'
2018-09-19 09:15:13 [info][yii\db\Command::execute] INSERT INTO `data_oil` (`price`, `time`) VALUES ('69.71', '2018-09-19 09:15:06')
2018-09-19 09:15:13 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ic1609`
2018-09-19 09:15:13 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ic1609' AND kcu.table_name = 'data_ic1609'
2018-09-19 09:15:13 [info][yii\db\Command::execute] INSERT INTO `data_ic1609` (`price`, `time`) VALUES ('69.71', '2018-09-19 09:15:06')
2018-09-19 09:15:13 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_gc`
2018-09-19 09:15:13 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_gc' AND kcu.table_name = 'data_gc'
2018-09-19 09:15:13 [info][yii\db\Command::execute] INSERT INTO `data_gc` (`price`, `time`) VALUES ('1.1666', '2018-09-19 09:15:12')
2018-09-19 09:15:13 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_hkhsi`
2018-09-19 09:15:13 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_hkhsi' AND kcu.table_name = 'data_hkhsi'
2018-09-19 09:15:13 [info][yii\db\Command::execute] INSERT INTO `data_hkhsi` (`price`, `time`) VALUES ('27084.66', '2018-09-18 16:09:00')
2018-09-19 09:15:13 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ag`
2018-09-19 09:15:13 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ag' AND kcu.table_name = 'data_ag'
2018-09-19 09:15:13 [info][yii\db\Command::execute] INSERT INTO `data_ag` (`price`, `time`) VALUES ('14.180', '2018-09-19 09:12:53')
2018-09-19 09:15:13 [info][yii\db\Command::execute] INSERT INTO `data_hkhsi` (`price`, `time`) VALUES ('27084.66', '2018-09-18 16:09:00')
2018-09-19 09:15:13 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-09-19 09:15:13 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-09-19 09:15:13 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('1203.4', '2018-09-19 09:15:10')
2018-09-19 09:15:13 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_yb`
2018-09-19 09:15:13 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_yb' AND kcu.table_name = 'data_yb'
2018-09-19 09:15:13 [info][yii\db\Command::execute] INSERT INTO `data_yb` (`price`, `time`) VALUES ('1.31495', '2018-09-19 09:15:12')
2018-09-19 09:15:13 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ay`
2018-09-19 09:15:13 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ay' AND kcu.table_name = 'data_ay'
2018-09-19 09:15:13 [info][yii\db\Command::execute] INSERT INTO `data_ay` (`price`, `time`) VALUES ('0.72182', '2018-09-19 09:15:12')
2018-09-19 09:15:13 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_jy`
2018-09-19 09:15:13 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_jy' AND kcu.table_name = 'data_jy'
2018-09-19 09:15:13 [info][yii\db\Command::execute] INSERT INTO `data_jy` (`price`, `time`) VALUES ('0.7699', '2018-09-19 09:15:00')
2018-09-19 09:15:13 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-09-19 09:15:13 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-09-19 09:15:13 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='69.71', `open`='69.74', `high`='69.84', `low`='69.65', `close`='69.85', `diff`='-0.14', `diff_rate`='-0.2004', `time`='2018-09-19 09:15:06' WHERE `name`='ic1609'
2018-09-19 09:15:13 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='1.1666', `open`='1.16698', `high`='1.16824', `low`='1.1666', `close`='1.16698', `diff`='-0.00037999999999982', `diff_rate`='-0.03', `time`='2018-09-19 09:15:12' WHERE `name`='gc'
2018-09-19 09:15:13 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='1.31495', `open`='1.31463', `high`='1.31754', `low`='1.31495', `close`='1.31483', `diff`='0.00012000000000012', `diff_rate`='0.01', `time`='2018-09-19 09:15:12' WHERE `name`='yb'
2018-09-19 09:15:13 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='0.72182', `open`='0.72238', `high`='0.72345', `low`='0.72182', `close`='0.72236', `diff`='-0.00053999999999998', `diff_rate`='-0.07', `time`='2018-09-19 09:15:12' WHERE `name`='ay'
2018-09-19 09:15:13 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-09-19 09:15:13 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-09-19 09:15:13 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-09-19 09:15:14 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-09-19 09:15:14 [trace][yii\base\Module::getModule] Loading module: gii
2018-09-19 09:15:14 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-09-19 09:15:14 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-09-19 09:15:14 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-09-19 09:15:14 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-09-19 09:15:14 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wjypay
2018-09-19 09:15:14 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-09-19 09:15:14 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-09-19 09:15:14 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_oil`
2018-09-19 09:15:14 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_oil' AND kcu.table_name = 'data_oil'
2018-09-19 09:15:14 [info][yii\db\Command::execute] INSERT INTO `data_oil` (`price`, `time`) VALUES ('69.71', '2018-09-19 09:15:06')
2018-09-19 09:15:15 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ic1609`
2018-09-19 09:15:15 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ic1609' AND kcu.table_name = 'data_ic1609'
2018-09-19 09:15:15 [info][yii\db\Command::execute] INSERT INTO `data_ic1609` (`price`, `time`) VALUES ('69.71', '2018-09-19 09:15:06')
2018-09-19 09:15:15 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_gc`
2018-09-19 09:15:15 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_gc' AND kcu.table_name = 'data_gc'
2018-09-19 09:15:15 [info][yii\db\Command::execute] INSERT INTO `data_gc` (`price`, `time`) VALUES ('1.16652', '2018-09-19 09:15:14')
2018-09-19 09:15:15 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_hkhsi`
2018-09-19 09:15:15 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_hkhsi' AND kcu.table_name = 'data_hkhsi'
2018-09-19 09:15:15 [info][yii\db\Command::execute] INSERT INTO `data_hkhsi` (`price`, `time`) VALUES ('27084.66', '2018-09-18 16:09:00')
2018-09-19 09:15:15 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ag`
2018-09-19 09:15:15 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ag' AND kcu.table_name = 'data_ag'
2018-09-19 09:15:15 [info][yii\db\Command::execute] INSERT INTO `data_ag` (`price`, `time`) VALUES ('14.180', '2018-09-19 09:12:53')
2018-09-19 09:15:15 [info][yii\db\Command::execute] INSERT INTO `data_hkhsi` (`price`, `time`) VALUES ('27084.66', '2018-09-18 16:09:00')
2018-09-19 09:15:15 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-09-19 09:15:15 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-09-19 09:15:15 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('1203.4', '2018-09-19 09:15:10')
2018-09-19 09:15:15 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_yb`
2018-09-19 09:15:15 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_yb' AND kcu.table_name = 'data_yb'
2018-09-19 09:15:15 [info][yii\db\Command::execute] INSERT INTO `data_yb` (`price`, `time`) VALUES ('1.31498', '2018-09-19 09:15:14')
2018-09-19 09:15:15 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ay`
2018-09-19 09:15:15 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ay' AND kcu.table_name = 'data_ay'
2018-09-19 09:15:15 [info][yii\db\Command::execute] INSERT INTO `data_ay` (`price`, `time`) VALUES ('0.7218', '2018-09-19 09:15:14')
2018-09-19 09:15:15 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_jy`
2018-09-19 09:15:15 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_jy' AND kcu.table_name = 'data_jy'
2018-09-19 09:15:15 [info][yii\db\Command::execute] INSERT INTO `data_jy` (`price`, `time`) VALUES ('0.7699', '2018-09-19 09:15:00')
2018-09-19 09:15:15 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-09-19 09:15:15 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-09-19 09:15:15 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='69.71', `open`='69.74', `high`='69.84', `low`='69.65', `close`='69.85', `diff`='-0.14', `diff_rate`='-0.2004', `time`='2018-09-19 09:15:06' WHERE `name`='ic1609'
2018-09-19 09:15:15 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='1.16652', `open`='1.16698', `high`='1.16824', `low`='1.16652', `close`='1.16698', `diff`='-0.0004599999999999', `diff_rate`='-0.04', `time`='2018-09-19 09:15:14' WHERE `name`='gc'
2018-09-19 09:15:15 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='1.31498', `open`='1.31463', `high`='1.31754', `low`='1.31498', `close`='1.31483', `diff`='0.00015000000000009', `diff_rate`='0.01', `time`='2018-09-19 09:15:14' WHERE `name`='yb'
2018-09-19 09:15:15 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='0.7218', `open`='0.72238', `high`='0.72345', `low`='0.7218', `close`='0.72236', `diff`='-0.00056', `diff_rate`='-0.08', `time`='2018-09-19 09:15:14' WHERE `name`='ay'
2018-09-19 09:15:15 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-09-19 09:15:15 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-09-19 09:15:15 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-09-19 09:15:16 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-09-19 09:15:16 [trace][yii\base\Module::getModule] Loading module: gii
2018-09-19 09:15:16 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-09-19 09:15:16 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-09-19 09:15:16 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-09-19 09:15:16 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-09-19 09:15:16 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wjypay
2018-09-19 09:15:16 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-09-19 09:15:16 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-09-19 09:15:16 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_oil`
2018-09-19 09:15:16 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_oil' AND kcu.table_name = 'data_oil'
2018-09-19 09:15:16 [info][yii\db\Command::execute] INSERT INTO `data_oil` (`price`, `time`) VALUES ('69.71', '2018-09-19 09:15:06')
2018-09-19 09:15:16 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ic1609`
2018-09-19 09:15:16 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ic1609' AND kcu.table_name = 'data_ic1609'
2018-09-19 09:15:16 [info][yii\db\Command::execute] INSERT INTO `data_ic1609` (`price`, `time`) VALUES ('69.71', '2018-09-19 09:15:06')
2018-09-19 09:15:16 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_gc`
2018-09-19 09:15:16 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_gc' AND kcu.table_name = 'data_gc'
2018-09-19 09:15:17 [info][yii\db\Command::execute] INSERT INTO `data_gc` (`price`, `time`) VALUES ('1.16654', '2018-09-19 09:15:16')
2018-09-19 09:15:17 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_hkhsi`
2018-09-19 09:15:17 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_hkhsi' AND kcu.table_name = 'data_hkhsi'
2018-09-19 09:15:17 [info][yii\db\Command::execute] INSERT INTO `data_hkhsi` (`price`, `time`) VALUES ('27084.66', '2018-09-18 16:09:00')
2018-09-19 09:15:17 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ag`
2018-09-19 09:15:17 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ag' AND kcu.table_name = 'data_ag'
2018-09-19 09:15:17 [info][yii\db\Command::execute] INSERT INTO `data_ag` (`price`, `time`) VALUES ('14.178', '2018-09-19 09:12:53')
2018-09-19 09:15:17 [info][yii\db\Command::execute] INSERT INTO `data_hkhsi` (`price`, `time`) VALUES ('27084.66', '2018-09-18 16:09:00')
2018-09-19 09:15:17 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-09-19 09:15:17 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-09-19 09:15:17 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('1203.4', '2018-09-19 09:15:10')
2018-09-19 09:15:17 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_yb`
2018-09-19 09:15:17 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_yb' AND kcu.table_name = 'data_yb'
2018-09-19 09:15:17 [info][yii\db\Command::execute] INSERT INTO `data_yb` (`price`, `time`) VALUES ('1.31484', '2018-09-19 09:15:16')
2018-09-19 09:15:17 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ay`
2018-09-19 09:15:17 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ay' AND kcu.table_name = 'data_ay'
2018-09-19 09:15:17 [info][yii\db\Command::execute] INSERT INTO `data_ay` (`price`, `time`) VALUES ('0.7217', '2018-09-19 09:15:16')
2018-09-19 09:15:17 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_jy`
2018-09-19 09:15:17 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_jy' AND kcu.table_name = 'data_jy'
2018-09-19 09:15:17 [info][yii\db\Command::execute] INSERT INTO `data_jy` (`price`, `time`) VALUES ('0.7699', '2018-09-19 09:15:00')
2018-09-19 09:15:17 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-09-19 09:15:17 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-09-19 09:15:17 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='69.71', `open`='69.74', `high`='69.84', `low`='69.65', `close`='69.85', `diff`='-0.14', `diff_rate`='-0.2004', `time`='2018-09-19 09:15:06' WHERE `name`='ic1609'
2018-09-19 09:15:17 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='1.16654', `open`='1.16698', `high`='1.16824', `low`='1.16654', `close`='1.16698', `diff`='-0.00044', `diff_rate`='-0.04', `time`='2018-09-19 09:15:16' WHERE `name`='gc'
2018-09-19 09:15:17 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='1.31484', `open`='1.31463', `high`='1.31754', `low`='1.31484', `close`='1.31483', `diff`='1.0000000000066E-5', `diff_rate`='0.00', `time`='2018-09-19 09:15:16' WHERE `name`='yb'
2018-09-19 09:15:17 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='0.7217', `open`='0.72238', `high`='0.72345', `low`='0.7217', `close`='0.72236', `diff`='-0.00065999999999999', `diff_rate`='-0.09', `time`='2018-09-19 09:15:16' WHERE `name`='ay'
2018-09-19 09:15:17 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-09-19 09:15:17 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-09-19 09:15:17 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-09-19 09:15:18 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-09-19 09:15:18 [trace][yii\base\Module::getModule] Loading module: gii
2018-09-19 09:15:18 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-09-19 09:15:18 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-09-19 09:15:18 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-09-19 09:15:18 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-09-19 09:15:18 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wjypay
2018-09-19 09:15:18 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-09-19 09:15:18 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-09-19 09:15:18 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_oil`
2018-09-19 09:15:18 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_oil' AND kcu.table_name = 'data_oil'
2018-09-19 09:15:18 [info][yii\db\Command::execute] INSERT INTO `data_oil` (`price`, `time`) VALUES ('69.71', '2018-09-19 09:15:06')
2018-09-19 09:15:18 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ic1609`
2018-09-19 09:15:18 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ic1609' AND kcu.table_name = 'data_ic1609'
2018-09-19 09:15:18 [info][yii\db\Command::execute] INSERT INTO `data_ic1609` (`price`, `time`) VALUES ('69.71', '2018-09-19 09:15:06')
2018-09-19 09:15:18 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_gc`
2018-09-19 09:15:18 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_gc' AND kcu.table_name = 'data_gc'
2018-09-19 09:15:18 [info][yii\db\Command::execute] INSERT INTO `data_gc` (`price`, `time`) VALUES ('1.16659', '2018-09-19 09:15:18')
2018-09-19 09:15:18 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_hkhsi`
2018-09-19 09:15:18 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_hkhsi' AND kcu.table_name = 'data_hkhsi'
2018-09-19 09:15:18 [info][yii\db\Command::execute] INSERT INTO `data_hkhsi` (`price`, `time`) VALUES ('27084.66', '2018-09-18 16:09:00')
2018-09-19 09:15:19 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ag`
2018-09-19 09:15:19 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ag' AND kcu.table_name = 'data_ag'
2018-09-19 09:15:19 [info][yii\db\Command::execute] INSERT INTO `data_ag` (`price`, `time`) VALUES ('14.178', '2018-09-19 09:12:53')
2018-09-19 09:15:19 [info][yii\db\Command::execute] INSERT INTO `data_hkhsi` (`price`, `time`) VALUES ('27084.66', '2018-09-18 16:09:00')
2018-09-19 09:15:19 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-09-19 09:15:19 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-09-19 09:15:19 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('1203.4', '2018-09-19 09:15:10')
2018-09-19 09:15:19 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_yb`
2018-09-19 09:15:19 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_yb' AND kcu.table_name = 'data_yb'
2018-09-19 09:15:19 [info][yii\db\Command::execute] INSERT INTO `data_yb` (`price`, `time`) VALUES ('1.3148', '2018-09-19 09:15:18')
2018-09-19 09:15:19 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ay`
2018-09-19 09:15:19 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ay' AND kcu.table_name = 'data_ay'
2018-09-19 09:15:19 [info][yii\db\Command::execute] INSERT INTO `data_ay` (`price`, `time`) VALUES ('0.72172', '2018-09-19 09:15:18')
2018-09-19 09:15:19 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_jy`
2018-09-19 09:15:19 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_jy' AND kcu.table_name = 'data_jy'
2018-09-19 09:15:19 [info][yii\db\Command::execute] INSERT INTO `data_jy` (`price`, `time`) VALUES ('0.7699', '2018-09-19 09:15:00')
2018-09-19 09:15:19 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-09-19 09:15:19 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-09-19 09:15:19 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='69.71', `open`='69.74', `high`='69.84', `low`='69.65', `close`='69.85', `diff`='-0.14', `diff_rate`='-0.2004', `time`='2018-09-19 09:15:06' WHERE `name`='ic1609'
2018-09-19 09:15:19 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='1.16659', `open`='1.16698', `high`='1.16824', `low`='1.16659', `close`='1.16698', `diff`='-0.00038999999999989', `diff_rate`='-0.03', `time`='2018-09-19 09:15:18' WHERE `name`='gc'
2018-09-19 09:15:19 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='1.3148', `open`='1.31463', `high`='1.31754', `low`='1.3148', `close`='1.31483', `diff`='-2.9999999999974E-5', `diff_rate`='-0.00', `time`='2018-09-19 09:15:18' WHERE `name`='yb'
2018-09-19 09:15:19 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='0.72172', `open`='0.72238', `high`='0.72345', `low`='0.72172', `close`='0.72236', `diff`='-0.00063999999999997', `diff_rate`='-0.09', `time`='2018-09-19 09:15:18' WHERE `name`='ay'
2018-09-19 09:15:19 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-09-19 09:15:19 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-09-19 09:15:19 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-09-19 09:15:20 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-09-19 09:15:20 [trace][yii\base\Module::getModule] Loading module: gii
2018-09-19 09:15:20 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-09-19 09:15:20 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-09-19 09:15:20 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-09-19 09:15:20 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-09-19 09:15:20 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wjypay
2018-09-19 09:15:20 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-09-19 09:15:20 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-09-19 09:15:20 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_oil`
2018-09-19 09:15:20 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_oil' AND kcu.table_name = 'data_oil'
2018-09-19 09:15:20 [info][yii\db\Command::execute] INSERT INTO `data_oil` (`price`, `time`) VALUES ('69.71', '2018-09-19 09:15:06')
2018-09-19 09:15:20 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ic1609`
2018-09-19 09:15:20 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ic1609' AND kcu.table_name = 'data_ic1609'
2018-09-19 09:15:20 [info][yii\db\Command::execute] INSERT INTO `data_ic1609` (`price`, `time`) VALUES ('69.71', '2018-09-19 09:15:06')
2018-09-19 09:15:20 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_gc`
2018-09-19 09:15:20 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_gc' AND kcu.table_name = 'data_gc'
2018-09-19 09:15:20 [info][yii\db\Command::execute] INSERT INTO `data_gc` (`price`, `time`) VALUES ('1.16659', '2018-09-19 09:15:20')
2018-09-19 09:15:20 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_hkhsi`
2018-09-19 09:15:20 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_hkhsi' AND kcu.table_name = 'data_hkhsi'
2018-09-19 09:15:20 [info][yii\db\Command::execute] INSERT INTO `data_hkhsi` (`price`, `time`) VALUES ('27084.66', '2018-09-18 16:09:00')
2018-09-19 09:15:20 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ag`
2018-09-19 09:15:20 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ag' AND kcu.table_name = 'data_ag'
2018-09-19 09:15:20 [info][yii\db\Command::execute] INSERT INTO `data_ag` (`price`, `time`) VALUES ('14.179', '2018-09-19 09:12:53')
2018-09-19 09:15:21 [info][yii\db\Command::execute] INSERT INTO `data_hkhsi` (`price`, `time`) VALUES ('27084.66', '2018-09-18 16:09:00')
2018-09-19 09:15:21 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-09-19 09:15:21 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-09-19 09:15:21 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('1203.3', '2018-09-19 09:15:23')
2018-09-19 09:15:21 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_yb`
2018-09-19 09:15:21 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_yb' AND kcu.table_name = 'data_yb'
2018-09-19 09:15:21 [info][yii\db\Command::execute] INSERT INTO `data_yb` (`price`, `time`) VALUES ('1.31483', '2018-09-19 09:15:20')
2018-09-19 09:15:21 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ay`
2018-09-19 09:15:21 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ay' AND kcu.table_name = 'data_ay'
2018-09-19 09:15:21 [info][yii\db\Command::execute] INSERT INTO `data_ay` (`price`, `time`) VALUES ('0.72174', '2018-09-19 09:15:20')
2018-09-19 09:15:21 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_jy`
2018-09-19 09:15:21 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_jy' AND kcu.table_name = 'data_jy'
2018-09-19 09:15:21 [info][yii\db\Command::execute] INSERT INTO `data_jy` (`price`, `time`) VALUES ('0.7699', '2018-09-19 09:15:00')
2018-09-19 09:15:21 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-09-19 09:15:21 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-09-19 09:15:21 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='69.71', `open`='69.74', `high`='69.84', `low`='69.65', `close`='69.85', `diff`='-0.14', `diff_rate`='-0.2004', `time`='2018-09-19 09:15:06' WHERE `name`='ic1609'
2018-09-19 09:15:21 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='1.16659', `open`='1.16698', `high`='1.16824', `low`='1.16659', `close`='1.16698', `diff`='-0.00038999999999989', `diff_rate`='-0.03', `time`='2018-09-19 09:15:20' WHERE `name`='gc'
2018-09-19 09:15:21 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='1203.3', `open`='1202.6', `high`='1204.5', `low`='1202.2', `close`='1202.9', `diff`='0.39999999999986', `diff_rate`='0.0333', `time`='2018-09-19 09:15:23' WHERE `name`='xau'
2018-09-19 09:15:21 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='1.31483', `open`='1.31463', `high`='1.31754', `low`='1.31483', `close`='1.31483', `diff`='0', `diff_rate`='0', `time`='2018-09-19 09:15:20' WHERE `name`='yb'
2018-09-19 09:15:21 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='0.72174', `open`='0.72238', `high`='0.72345', `low`='0.72174', `close`='0.72236', `diff`='-0.00061999999999995', `diff_rate`='-0.09', `time`='2018-09-19 09:15:20' WHERE `name`='ay'
2018-09-19 09:15:21 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-09-19 09:15:21 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-09-19 09:15:21 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-09-19 09:15:23 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-09-19 09:15:23 [trace][yii\base\Module::getModule] Loading module: gii
2018-09-19 09:15:23 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-09-19 09:15:23 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-09-19 09:15:23 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-09-19 09:15:23 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-09-19 09:15:23 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wjypay
2018-09-19 09:15:23 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-09-19 09:15:23 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-09-19 09:15:23 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_oil`
2018-09-19 09:15:23 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_oil' AND kcu.table_name = 'data_oil'
2018-09-19 09:15:23 [info][yii\db\Command::execute] INSERT INTO `data_oil` (`price`, `time`) VALUES ('69.71', '2018-09-19 09:15:06')
2018-09-19 09:15:23 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ic1609`
2018-09-19 09:15:23 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ic1609' AND kcu.table_name = 'data_ic1609'
2018-09-19 09:15:23 [info][yii\db\Command::execute] INSERT INTO `data_ic1609` (`price`, `time`) VALUES ('69.71', '2018-09-19 09:15:06')
2018-09-19 09:15:23 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_gc`
2018-09-19 09:15:23 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_gc' AND kcu.table_name = 'data_gc'
2018-09-19 09:15:23 [info][yii\db\Command::execute] INSERT INTO `data_gc` (`price`, `time`) VALUES ('1.1666', '2018-09-19 09:15:22')
2018-09-19 09:15:23 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_hkhsi`
2018-09-19 09:15:23 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_hkhsi' AND kcu.table_name = 'data_hkhsi'
2018-09-19 09:15:23 [info][yii\db\Command::execute] INSERT INTO `data_hkhsi` (`price`, `time`) VALUES ('27084.66', '2018-09-18 16:09:00')
2018-09-19 09:15:23 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ag`
2018-09-19 09:15:23 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ag' AND kcu.table_name = 'data_ag'
2018-09-19 09:15:23 [info][yii\db\Command::execute] INSERT INTO `data_ag` (`price`, `time`) VALUES ('14.179', '2018-09-19 09:12:53')
2018-09-19 09:15:23 [info][yii\db\Command::execute] INSERT INTO `data_hkhsi` (`price`, `time`) VALUES ('27084.66', '2018-09-18 16:09:00')
2018-09-19 09:15:23 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-09-19 09:15:23 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-09-19 09:15:23 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('1203.3', '2018-09-19 09:15:23')
2018-09-19 09:15:23 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_yb`
2018-09-19 09:15:23 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_yb' AND kcu.table_name = 'data_yb'
2018-09-19 09:15:23 [info][yii\db\Command::execute] INSERT INTO `data_yb` (`price`, `time`) VALUES ('1.31484', '2018-09-19 09:15:22')
2018-09-19 09:15:23 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ay`
2018-09-19 09:15:23 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ay' AND kcu.table_name = 'data_ay'
2018-09-19 09:15:23 [info][yii\db\Command::execute] INSERT INTO `data_ay` (`price`, `time`) VALUES ('0.72173', '2018-09-19 09:15:22')
2018-09-19 09:15:23 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_jy`
2018-09-19 09:15:23 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_jy' AND kcu.table_name = 'data_jy'
2018-09-19 09:15:23 [info][yii\db\Command::execute] INSERT INTO `data_jy` (`price`, `time`) VALUES ('0.7699', '2018-09-19 09:15:00')
2018-09-19 09:15:23 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-09-19 09:15:23 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-09-19 09:15:23 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='69.71', `open`='69.74', `high`='69.84', `low`='69.65', `close`='69.85', `diff`='-0.14', `diff_rate`='-0.2004', `time`='2018-09-19 09:15:06' WHERE `name`='ic1609'
2018-09-19 09:15:23 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='1.1666', `open`='1.16698', `high`='1.16824', `low`='1.1666', `close`='1.16698', `diff`='-0.00037999999999982', `diff_rate`='-0.03', `time`='2018-09-19 09:15:22' WHERE `name`='gc'
2018-09-19 09:15:23 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='1.31484', `open`='1.31463', `high`='1.31754', `low`='1.31484', `close`='1.31483', `diff`='1.0000000000066E-5', `diff_rate`='0.00', `time`='2018-09-19 09:15:22' WHERE `name`='yb'
2018-09-19 09:15:23 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='0.72173', `open`='0.72238', `high`='0.72345', `low`='0.72173', `close`='0.72236', `diff`='-0.00063000000000002', `diff_rate`='-0.09', `time`='2018-09-19 09:15:22' WHERE `name`='ay'
2018-09-19 09:15:23 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-09-19 09:15:23 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-09-19 09:15:23 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-09-19 09:15:24 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-09-19 09:15:24 [trace][yii\base\Module::getModule] Loading module: gii
2018-09-19 09:15:24 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-09-19 09:15:24 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-09-19 09:15:24 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-09-19 09:15:24 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-09-19 09:15:24 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wjypay
2018-09-19 09:15:24 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-09-19 09:15:24 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-09-19 09:15:24 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_oil`
2018-09-19 09:15:24 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_oil' AND kcu.table_name = 'data_oil'
2018-09-19 09:15:24 [info][yii\db\Command::execute] INSERT INTO `data_oil` (`price`, `time`) VALUES ('69.71', '2018-09-19 09:15:06')
2018-09-19 09:15:24 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ic1609`
2018-09-19 09:15:24 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ic1609' AND kcu.table_name = 'data_ic1609'
2018-09-19 09:15:25 [info][yii\db\Command::execute] INSERT INTO `data_ic1609` (`price`, `time`) VALUES ('69.71', '2018-09-19 09:15:06')
2018-09-19 09:15:25 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_gc`
2018-09-19 09:15:25 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_gc' AND kcu.table_name = 'data_gc'
2018-09-19 09:15:25 [info][yii\db\Command::execute] INSERT INTO `data_gc` (`price`, `time`) VALUES ('1.16659', '2018-09-19 09:15:24')
2018-09-19 09:15:25 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_hkhsi`
2018-09-19 09:15:25 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_hkhsi' AND kcu.table_name = 'data_hkhsi'
2018-09-19 09:15:25 [info][yii\db\Command::execute] INSERT INTO `data_hkhsi` (`price`, `time`) VALUES ('27084.66', '2018-09-18 16:09:00')
2018-09-19 09:15:25 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ag`
2018-09-19 09:15:25 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ag' AND kcu.table_name = 'data_ag'
2018-09-19 09:15:25 [info][yii\db\Command::execute] INSERT INTO `data_ag` (`price`, `time`) VALUES ('14.179', '2018-09-19 09:12:53')
2018-09-19 09:15:25 [info][yii\db\Command::execute] INSERT INTO `data_hkhsi` (`price`, `time`) VALUES ('27084.66', '2018-09-18 16:09:00')
2018-09-19 09:15:25 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-09-19 09:15:25 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-09-19 09:15:25 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('1203.3', '2018-09-19 09:15:23')
2018-09-19 09:15:25 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_yb`
2018-09-19 09:15:25 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_yb' AND kcu.table_name = 'data_yb'
2018-09-19 09:15:25 [info][yii\db\Command::execute] INSERT INTO `data_yb` (`price`, `time`) VALUES ('1.31482', '2018-09-19 09:15:24')
2018-09-19 09:15:25 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ay`
2018-09-19 09:15:25 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ay' AND kcu.table_name = 'data_ay'
2018-09-19 09:15:25 [info][yii\db\Command::execute] INSERT INTO `data_ay` (`price`, `time`) VALUES ('0.72176', '2018-09-19 09:15:24')
2018-09-19 09:15:25 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_jy`
2018-09-19 09:15:25 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_jy' AND kcu.table_name = 'data_jy'
2018-09-19 09:15:25 [info][yii\db\Command::execute] INSERT INTO `data_jy` (`price`, `time`) VALUES ('0.7699', '2018-09-19 09:15:00')
2018-09-19 09:15:25 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-09-19 09:15:25 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-09-19 09:15:25 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='69.71', `open`='69.74', `high`='69.84', `low`='69.65', `close`='69.85', `diff`='-0.14', `diff_rate`='-0.2004', `time`='2018-09-19 09:15:06' WHERE `name`='ic1609'
2018-09-19 09:15:25 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='1.16659', `open`='1.16698', `high`='1.16824', `low`='1.16659', `close`='1.16698', `diff`='-0.00038999999999989', `diff_rate`='-0.03', `time`='2018-09-19 09:15:24' WHERE `name`='gc'
2018-09-19 09:15:25 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='1.31482', `open`='1.31463', `high`='1.31754', `low`='1.31482', `close`='1.31483', `diff`='-9.9999999998435E-6', `diff_rate`='-0.00', `time`='2018-09-19 09:15:24' WHERE `name`='yb'
2018-09-19 09:15:25 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='0.72176', `open`='0.72238', `high`='0.72345', `low`='0.72176', `close`='0.72236', `diff`='-0.00060000000000004', `diff_rate`='-0.08', `time`='2018-09-19 09:15:24' WHERE `name`='ay'
2018-09-19 09:15:25 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-09-19 09:15:25 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-09-19 09:15:25 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-09-19 09:15:26 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-09-19 09:15:26 [trace][yii\base\Module::getModule] Loading module: gii
2018-09-19 09:15:26 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-09-19 09:15:26 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-09-19 09:15:26 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-09-19 09:15:26 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-09-19 09:15:26 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wjypay
2018-09-19 09:15:26 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-09-19 09:15:26 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-09-19 09:15:26 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_oil`
2018-09-19 09:15:26 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_oil' AND kcu.table_name = 'data_oil'
2018-09-19 09:15:26 [info][yii\db\Command::execute] INSERT INTO `data_oil` (`price`, `time`) VALUES ('69.71', '2018-09-19 09:15:27')
2018-09-19 09:15:26 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ic1609`
2018-09-19 09:15:26 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ic1609' AND kcu.table_name = 'data_ic1609'
2018-09-19 09:15:26 [info][yii\db\Command::execute] INSERT INTO `data_ic1609` (`price`, `time`) VALUES ('69.71', '2018-09-19 09:15:27')
2018-09-19 09:15:26 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_gc`
2018-09-19 09:15:26 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_gc' AND kcu.table_name = 'data_gc'
2018-09-19 09:15:26 [info][yii\db\Command::execute] INSERT INTO `data_gc` (`price`, `time`) VALUES ('1.16659', '2018-09-19 09:15:26')
2018-09-19 09:15:26 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_hkhsi`
2018-09-19 09:15:26 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_hkhsi' AND kcu.table_name = 'data_hkhsi'
2018-09-19 09:15:27 [info][yii\db\Command::execute] INSERT INTO `data_hkhsi` (`price`, `time`) VALUES ('27084.66', '2018-09-18 16:09:00')
2018-09-19 09:15:27 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ag`
2018-09-19 09:15:27 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ag' AND kcu.table_name = 'data_ag'
2018-09-19 09:15:27 [info][yii\db\Command::execute] INSERT INTO `data_ag` (`price`, `time`) VALUES ('14.195', '2018-09-19 09:15:24')
2018-09-19 09:15:27 [info][yii\db\Command::execute] INSERT INTO `data_hkhsi` (`price`, `time`) VALUES ('27084.66', '2018-09-18 16:09:00')
2018-09-19 09:15:27 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-09-19 09:15:27 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-09-19 09:15:27 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('1203.3', '2018-09-19 09:15:23')
2018-09-19 09:15:27 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_yb`
2018-09-19 09:15:27 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_yb' AND kcu.table_name = 'data_yb'
2018-09-19 09:15:27 [info][yii\db\Command::execute] INSERT INTO `data_yb` (`price`, `time`) VALUES ('1.31485', '2018-09-19 09:15:26')
2018-09-19 09:15:27 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ay`
2018-09-19 09:15:27 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ay' AND kcu.table_name = 'data_ay'
2018-09-19 09:15:27 [info][yii\db\Command::execute] INSERT INTO `data_ay` (`price`, `time`) VALUES ('0.72174', '2018-09-19 09:15:26')
2018-09-19 09:15:27 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_jy`
2018-09-19 09:15:27 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_jy' AND kcu.table_name = 'data_jy'
2018-09-19 09:15:27 [info][yii\db\Command::execute] INSERT INTO `data_jy` (`price`, `time`) VALUES ('0.7699', '2018-09-19 09:15:00')
2018-09-19 09:15:27 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-09-19 09:15:27 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-09-19 09:15:27 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='69.71', `open`='69.74', `high`='69.84', `low`='69.65', `close`='69.85', `diff`='-0.14', `diff_rate`='-0.2004', `time`='2018-09-19 09:15:27' WHERE `name`='oil'
2018-09-19 09:15:27 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='69.71', `open`='69.74', `high`='69.84', `low`='69.65', `close`='69.85', `diff`='-0.14', `diff_rate`='-0.2004', `time`='2018-09-19 09:15:27' WHERE `name`='ic1609'
2018-09-19 09:15:27 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='1.16659', `open`='1.16698', `high`='1.16824', `low`='1.16659', `close`='1.16698', `diff`='-0.00038999999999989', `diff_rate`='-0.03', `time`='2018-09-19 09:15:26' WHERE `name`='gc'
2018-09-19 09:15:27 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='14.195', `open`='14.180', `high`='14.209', `low`='14.170', `close`='14.180', `diff`='0.015000000000001', `diff_rate`='0.0705', `time`='2018-09-19 09:15:24' WHERE `name`='ag'
2018-09-19 09:15:27 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='1.31485', `open`='1.31463', `high`='1.31754', `low`='1.31485', `close`='1.31483', `diff`='2.0000000000131E-5', `diff_rate`='0.00', `time`='2018-09-19 09:15:26' WHERE `name`='yb'
2018-09-19 09:15:27 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='0.72174', `open`='0.72238', `high`='0.72345', `low`='0.72174', `close`='0.72236', `diff`='-0.00061999999999995', `diff_rate`='-0.09', `time`='2018-09-19 09:15:26' WHERE `name`='ay'
2018-09-19 09:15:27 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-09-19 09:15:27 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-09-19 09:15:27 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-09-19 09:15:28 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-09-19 09:15:28 [trace][yii\base\Module::getModule] Loading module: gii
2018-09-19 09:15:28 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-09-19 09:15:28 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-09-19 09:15:28 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-09-19 09:15:28 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-09-19 09:15:28 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wjypay
2018-09-19 09:15:28 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-09-19 09:15:28 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-09-19 09:15:28 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_oil`
2018-09-19 09:15:28 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_oil' AND kcu.table_name = 'data_oil'
2018-09-19 09:15:28 [info][yii\db\Command::execute] INSERT INTO `data_oil` (`price`, `time`) VALUES ('69.71', '2018-09-19 09:15:27')
2018-09-19 09:15:28 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ic1609`
2018-09-19 09:15:28 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ic1609' AND kcu.table_name = 'data_ic1609'
2018-09-19 09:15:28 [info][yii\db\Command::execute] INSERT INTO `data_ic1609` (`price`, `time`) VALUES ('69.71', '2018-09-19 09:15:27')
2018-09-19 09:15:28 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_gc`
2018-09-19 09:15:28 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_gc' AND kcu.table_name = 'data_gc'
2018-09-19 09:15:28 [info][yii\db\Command::execute] INSERT INTO `data_gc` (`price`, `time`) VALUES ('1.16659', '2018-09-19 09:15:28')
2018-09-19 09:15:28 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_hkhsi`
2018-09-19 09:15:28 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_hkhsi' AND kcu.table_name = 'data_hkhsi'
2018-09-19 09:15:28 [info][yii\db\Command::execute] INSERT INTO `data_hkhsi` (`price`, `time`) VALUES ('27084.66', '2018-09-18 16:09:00')
2018-09-19 09:15:28 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ag`
2018-09-19 09:15:28 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ag' AND kcu.table_name = 'data_ag'
2018-09-19 09:15:28 [info][yii\db\Command::execute] INSERT INTO `data_ag` (`price`, `time`) VALUES ('14.195', '2018-09-19 09:15:24')
2018-09-19 09:15:28 [info][yii\db\Command::execute] INSERT INTO `data_hkhsi` (`price`, `time`) VALUES ('27084.66', '2018-09-18 16:09:00')
2018-09-19 09:15:28 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-09-19 09:15:28 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-09-19 09:15:28 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('1203.3', '2018-09-19 09:15:23')
2018-09-19 09:15:28 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_yb`
2018-09-19 09:15:28 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_yb' AND kcu.table_name = 'data_yb'
2018-09-19 09:15:28 [info][yii\db\Command::execute] INSERT INTO `data_yb` (`price`, `time`) VALUES ('1.3148', '2018-09-19 09:15:28')
2018-09-19 09:15:28 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ay`
2018-09-19 09:15:28 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ay' AND kcu.table_name = 'data_ay'
2018-09-19 09:15:29 [info][yii\db\Command::execute] INSERT INTO `data_ay` (`price`, `time`) VALUES ('0.72174', '2018-09-19 09:15:27')
2018-09-19 09:15:29 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_jy`
2018-09-19 09:15:29 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_jy' AND kcu.table_name = 'data_jy'
2018-09-19 09:15:29 [info][yii\db\Command::execute] INSERT INTO `data_jy` (`price`, `time`) VALUES ('0.7702', '2018-09-19 09:15:26')
2018-09-19 09:15:29 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-09-19 09:15:29 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-09-19 09:15:29 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='69.71', `open`='69.74', `high`='69.84', `low`='69.65', `close`='69.85', `diff`='-0.14', `diff_rate`='-0.2004', `time`='2018-09-19 09:15:27' WHERE `name`='ic1609'
2018-09-19 09:15:29 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='1.16659', `open`='1.16698', `high`='1.16824', `low`='1.16659', `close`='1.16698', `diff`='-0.00038999999999989', `diff_rate`='-0.03', `time`='2018-09-19 09:15:28' WHERE `name`='gc'
2018-09-19 09:15:29 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='1.3148', `open`='1.31463', `high`='1.31754', `low`='1.3148', `close`='1.31483', `diff`='-2.9999999999974E-5', `diff_rate`='-0.00', `time`='2018-09-19 09:15:28' WHERE `name`='yb'
2018-09-19 09:15:29 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='0.72174', `open`='0.72238', `high`='0.72345', `low`='0.72174', `close`='0.72236', `diff`='-0.00061999999999995', `diff_rate`='-0.09', `time`='2018-09-19 09:15:27' WHERE `name`='ay'
2018-09-19 09:15:29 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='0.7702', `open`='0.7699', `high`='0.7709', `low`='0.7702', `close`='0.7699', `diff`='0.00029999999999997', `diff_rate`='0.04', `time`='2018-09-19 09:15:26' WHERE `name`='jy'
2018-09-19 09:15:29 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-09-19 09:15:29 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-09-19 09:15:29 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-09-19 09:15:30 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-09-19 09:15:30 [trace][yii\base\Module::getModule] Loading module: gii
2018-09-19 09:15:30 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-09-19 09:15:30 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-09-19 09:15:30 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-09-19 09:15:30 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-09-19 09:15:30 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wjypay
2018-09-19 09:15:30 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-09-19 09:15:30 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-09-19 09:15:30 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_oil`
2018-09-19 09:15:30 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_oil' AND kcu.table_name = 'data_oil'
2018-09-19 09:15:30 [info][yii\db\Command::execute] INSERT INTO `data_oil` (`price`, `time`) VALUES ('69.71', '2018-09-19 09:15:27')
2018-09-19 09:15:30 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ic1609`
2018-09-19 09:15:30 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ic1609' AND kcu.table_name = 'data_ic1609'
2018-09-19 09:15:30 [info][yii\db\Command::execute] INSERT INTO `data_ic1609` (`price`, `time`) VALUES ('69.71', '2018-09-19 09:15:27')
2018-09-19 09:15:30 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_gc`
2018-09-19 09:15:30 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_gc' AND kcu.table_name = 'data_gc'
2018-09-19 09:15:31 [info][yii\db\Command::execute] INSERT INTO `data_gc` (`price`, `time`) VALUES ('1.16659', '2018-09-19 09:15:30')
2018-09-19 09:15:31 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_hkhsi`
2018-09-19 09:15:31 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_hkhsi' AND kcu.table_name = 'data_hkhsi'
2018-09-19 09:15:31 [info][yii\db\Command::execute] INSERT INTO `data_hkhsi` (`price`, `time`) VALUES ('27084.66', '2018-09-18 16:09:00')
2018-09-19 09:15:31 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ag`
2018-09-19 09:15:31 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ag' AND kcu.table_name = 'data_ag'
2018-09-19 09:15:31 [info][yii\db\Command::execute] INSERT INTO `data_ag` (`price`, `time`) VALUES ('14.195', '2018-09-19 09:15:24')
2018-09-19 09:15:31 [info][yii\db\Command::execute] INSERT INTO `data_hkhsi` (`price`, `time`) VALUES ('27084.66', '2018-09-18 16:09:00')
2018-09-19 09:15:31 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-09-19 09:15:31 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-09-19 09:15:31 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('1203.2', '2018-09-19 09:15:30')
2018-09-19 09:15:31 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_yb`
2018-09-19 09:15:31 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_yb' AND kcu.table_name = 'data_yb'
2018-09-19 09:15:31 [info][yii\db\Command::execute] INSERT INTO `data_yb` (`price`, `time`) VALUES ('1.31486', '2018-09-19 09:15:30')
2018-09-19 09:15:31 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ay`
2018-09-19 09:15:31 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ay' AND kcu.table_name = 'data_ay'
2018-09-19 09:15:31 [info][yii\db\Command::execute] INSERT INTO `data_ay` (`price`, `time`) VALUES ('0.72171', '2018-09-19 09:15:30')
2018-09-19 09:15:31 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_jy`
2018-09-19 09:15:31 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_jy' AND kcu.table_name = 'data_jy'
2018-09-19 09:15:31 [info][yii\db\Command::execute] INSERT INTO `data_jy` (`price`, `time`) VALUES ('0.7702', '2018-09-19 09:15:26')
2018-09-19 09:15:31 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-09-19 09:15:31 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-09-19 09:15:31 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='69.71', `open`='69.74', `high`='69.84', `low`='69.65', `close`='69.85', `diff`='-0.14', `diff_rate`='-0.2004', `time`='2018-09-19 09:15:27' WHERE `name`='ic1609'
2018-09-19 09:15:31 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='1.16659', `open`='1.16698', `high`='1.16824', `low`='1.16659', `close`='1.16698', `diff`='-0.00038999999999989', `diff_rate`='-0.03', `time`='2018-09-19 09:15:30' WHERE `name`='gc'
2018-09-19 09:15:31 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='1203.2', `open`='1202.6', `high`='1204.5', `low`='1202.2', `close`='1202.9', `diff`='0.29999999999995', `diff_rate`='0.0249', `time`='2018-09-19 09:15:30' WHERE `name`='xau'
2018-09-19 09:15:31 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='1.31486', `open`='1.31463', `high`='1.31754', `low`='1.31486', `close`='1.31483', `diff`='2.9999999999974E-5', `diff_rate`='0.00', `time`='2018-09-19 09:15:30' WHERE `name`='yb'
2018-09-19 09:15:31 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='0.72171', `open`='0.72238', `high`='0.72345', `low`='0.72171', `close`='0.72236', `diff`='-0.00065000000000004', `diff_rate`='-0.09', `time`='2018-09-19 09:15:30' WHERE `name`='ay'
2018-09-19 09:15:31 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-09-19 09:15:31 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-09-19 09:15:31 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-09-19 09:15:32 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-09-19 09:15:32 [trace][yii\base\Module::getModule] Loading module: gii
2018-09-19 09:15:32 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-09-19 09:15:32 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-09-19 09:15:32 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-09-19 09:15:32 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-09-19 09:15:32 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wjypay
2018-09-19 09:15:32 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-09-19 09:15:32 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-09-19 09:15:32 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_oil`
2018-09-19 09:15:32 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_oil' AND kcu.table_name = 'data_oil'
2018-09-19 09:15:32 [info][yii\db\Command::execute] INSERT INTO `data_oil` (`price`, `time`) VALUES ('69.71', '2018-09-19 09:15:27')
2018-09-19 09:15:32 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ic1609`
2018-09-19 09:15:32 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ic1609' AND kcu.table_name = 'data_ic1609'
2018-09-19 09:15:32 [info][yii\db\Command::execute] INSERT INTO `data_ic1609` (`price`, `time`) VALUES ('69.71', '2018-09-19 09:15:27')
2018-09-19 09:15:32 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_gc`
2018-09-19 09:15:32 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_gc' AND kcu.table_name = 'data_gc'
2018-09-19 09:15:33 [info][yii\db\Command::execute] INSERT INTO `data_gc` (`price`, `time`) VALUES ('1.16659', '2018-09-19 09:15:32')
2018-09-19 09:15:33 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_hkhsi`
2018-09-19 09:15:33 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_hkhsi' AND kcu.table_name = 'data_hkhsi'
2018-09-19 09:15:33 [info][yii\db\Command::execute] INSERT INTO `data_hkhsi` (`price`, `time`) VALUES ('27084.66', '2018-09-18 16:09:00')
2018-09-19 09:15:33 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ag`
2018-09-19 09:15:33 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ag' AND kcu.table_name = 'data_ag'
2018-09-19 09:15:33 [info][yii\db\Command::execute] INSERT INTO `data_ag` (`price`, `time`) VALUES ('14.195', '2018-09-19 09:15:24')
2018-09-19 09:15:33 [info][yii\db\Command::execute] INSERT INTO `data_hkhsi` (`price`, `time`) VALUES ('27084.66', '2018-09-18 16:09:00')
2018-09-19 09:15:33 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-09-19 09:15:33 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-09-19 09:15:33 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('1203.2', '2018-09-19 09:15:30')
2018-09-19 09:15:33 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_yb`
2018-09-19 09:15:33 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_yb' AND kcu.table_name = 'data_yb'
2018-09-19 09:15:33 [info][yii\db\Command::execute] INSERT INTO `data_yb` (`price`, `time`) VALUES ('1.31487', '2018-09-19 09:15:32')
2018-09-19 09:15:33 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ay`
2018-09-19 09:15:33 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ay' AND kcu.table_name = 'data_ay'
2018-09-19 09:15:33 [info][yii\db\Command::execute] INSERT INTO `data_ay` (`price`, `time`) VALUES ('0.72172', '2018-09-19 09:15:32')
2018-09-19 09:15:33 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_jy`
2018-09-19 09:15:33 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_jy' AND kcu.table_name = 'data_jy'
2018-09-19 09:15:33 [info][yii\db\Command::execute] INSERT INTO `data_jy` (`price`, `time`) VALUES ('0.7702', '2018-09-19 09:15:26')
2018-09-19 09:15:33 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-09-19 09:15:33 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-09-19 09:15:33 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='69.71', `open`='69.74', `high`='69.84', `low`='69.65', `close`='69.85', `diff`='-0.14', `diff_rate`='-0.2004', `time`='2018-09-19 09:15:27' WHERE `name`='ic1609'
2018-09-19 09:15:33 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='1.16659', `open`='1.16698', `high`='1.16824', `low`='1.16659', `close`='1.16698', `diff`='-0.00038999999999989', `diff_rate`='-0.03', `time`='2018-09-19 09:15:32' WHERE `name`='gc'
2018-09-19 09:15:33 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='1.31487', `open`='1.31463', `high`='1.31754', `low`='1.31487', `close`='1.31483', `diff`='4.000000000004E-5', `diff_rate`='0.00', `time`='2018-09-19 09:15:32' WHERE `name`='yb'
2018-09-19 09:15:33 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='0.72172', `open`='0.72238', `high`='0.72345', `low`='0.72172', `close`='0.72236', `diff`='-0.00063999999999997', `diff_rate`='-0.09', `time`='2018-09-19 09:15:32' WHERE `name`='ay'
2018-09-19 09:15:33 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-09-19 09:15:33 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-09-19 09:15:33 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-09-19 09:15:34 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-09-19 09:15:34 [trace][yii\base\Module::getModule] Loading module: gii
2018-09-19 09:15:34 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-09-19 09:15:34 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-09-19 09:15:34 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-09-19 09:15:34 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-09-19 09:15:34 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wjypay
2018-09-19 09:15:34 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-09-19 09:15:34 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-09-19 09:15:34 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_oil`
2018-09-19 09:15:34 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_oil' AND kcu.table_name = 'data_oil'
2018-09-19 09:15:34 [info][yii\db\Command::execute] INSERT INTO `data_oil` (`price`, `time`) VALUES ('69.71', '2018-09-19 09:15:27')
2018-09-19 09:15:34 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ic1609`
2018-09-19 09:15:34 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ic1609' AND kcu.table_name = 'data_ic1609'
2018-09-19 09:15:34 [info][yii\db\Command::execute] INSERT INTO `data_ic1609` (`price`, `time`) VALUES ('69.71', '2018-09-19 09:15:27')
2018-09-19 09:15:34 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_gc`
2018-09-19 09:15:34 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_gc' AND kcu.table_name = 'data_gc'
2018-09-19 09:15:34 [info][yii\db\Command::execute] INSERT INTO `data_gc` (`price`, `time`) VALUES ('1.16657', '2018-09-19 09:15:34')
2018-09-19 09:15:34 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_hkhsi`
2018-09-19 09:15:34 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_hkhsi' AND kcu.table_name = 'data_hkhsi'
2018-09-19 09:15:34 [info][yii\db\Command::execute] INSERT INTO `data_hkhsi` (`price`, `time`) VALUES ('27084.66', '2018-09-18 16:09:00')
2018-09-19 09:15:34 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ag`
2018-09-19 09:15:34 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ag' AND kcu.table_name = 'data_ag'
2018-09-19 09:15:34 [info][yii\db\Command::execute] INSERT INTO `data_ag` (`price`, `time`) VALUES ('14.195', '2018-09-19 09:15:24')
2018-09-19 09:15:34 [info][yii\db\Command::execute] INSERT INTO `data_hkhsi` (`price`, `time`) VALUES ('27084.66', '2018-09-18 16:09:00')
2018-09-19 09:15:34 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-09-19 09:15:34 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-09-19 09:15:35 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('1203.2', '2018-09-19 09:15:30')
2018-09-19 09:15:35 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_yb`
2018-09-19 09:15:35 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_yb' AND kcu.table_name = 'data_yb'
2018-09-19 09:15:35 [info][yii\db\Command::execute] INSERT INTO `data_yb` (`price`, `time`) VALUES ('1.31487', '2018-09-19 09:15:34')
2018-09-19 09:15:35 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ay`
2018-09-19 09:15:35 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ay' AND kcu.table_name = 'data_ay'
2018-09-19 09:15:35 [info][yii\db\Command::execute] INSERT INTO `data_ay` (`price`, `time`) VALUES ('0.72173', '2018-09-19 09:15:34')
2018-09-19 09:15:35 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_jy`
2018-09-19 09:15:35 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_jy' AND kcu.table_name = 'data_jy'
2018-09-19 09:15:35 [info][yii\db\Command::execute] INSERT INTO `data_jy` (`price`, `time`) VALUES ('0.7702', '2018-09-19 09:15:26')
2018-09-19 09:15:35 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-09-19 09:15:35 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-09-19 09:15:35 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='69.71', `open`='69.74', `high`='69.84', `low`='69.65', `close`='69.85', `diff`='-0.14', `diff_rate`='-0.2004', `time`='2018-09-19 09:15:27' WHERE `name`='ic1609'
2018-09-19 09:15:35 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='1.16657', `open`='1.16698', `high`='1.16824', `low`='1.16657', `close`='1.16698', `diff`='-0.0004099999999998', `diff_rate`='-0.04', `time`='2018-09-19 09:15:34' WHERE `name`='gc'
2018-09-19 09:15:35 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='1.31487', `open`='1.31463', `high`='1.31754', `low`='1.31487', `close`='1.31483', `diff`='4.000000000004E-5', `diff_rate`='0.00', `time`='2018-09-19 09:15:34' WHERE `name`='yb'
2018-09-19 09:15:35 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='0.72173', `open`='0.72238', `high`='0.72345', `low`='0.72173', `close`='0.72236', `diff`='-0.00063000000000002', `diff_rate`='-0.09', `time`='2018-09-19 09:15:34' WHERE `name`='ay'
2018-09-19 09:15:35 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-09-19 09:15:35 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-09-19 09:15:35 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-09-19 09:15:36 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-09-19 09:15:36 [trace][yii\base\Module::getModule] Loading module: gii
2018-09-19 09:15:36 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-09-19 09:15:36 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-09-19 09:15:36 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-09-19 09:15:36 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-09-19 09:15:36 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wjypay
2018-09-19 09:15:36 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-09-19 09:15:36 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-09-19 09:15:36 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_oil`
2018-09-19 09:15:36 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_oil' AND kcu.table_name = 'data_oil'
2018-09-19 09:15:36 [info][yii\db\Command::execute] INSERT INTO `data_oil` (`price`, `time`) VALUES ('69.71', '2018-09-19 09:15:27')
2018-09-19 09:15:36 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ic1609`
2018-09-19 09:15:36 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ic1609' AND kcu.table_name = 'data_ic1609'
2018-09-19 09:15:36 [info][yii\db\Command::execute] INSERT INTO `data_ic1609` (`price`, `time`) VALUES ('69.71', '2018-09-19 09:15:27')
2018-09-19 09:15:36 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_gc`
2018-09-19 09:15:36 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_gc' AND kcu.table_name = 'data_gc'
2018-09-19 09:15:36 [info][yii\db\Command::execute] INSERT INTO `data_gc` (`price`, `time`) VALUES ('1.16657', '2018-09-19 09:15:36')
2018-09-19 09:15:36 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_hkhsi`
2018-09-19 09:15:36 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_hkhsi' AND kcu.table_name = 'data_hkhsi'
2018-09-19 09:15:36 [info][yii\db\Command::execute] INSERT INTO `data_hkhsi` (`price`, `time`) VALUES ('27084.66', '2018-09-18 16:09:00')
2018-09-19 09:15:36 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ag`
2018-09-19 09:15:36 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ag' AND kcu.table_name = 'data_ag'
2018-09-19 09:15:36 [info][yii\db\Command::execute] INSERT INTO `data_ag` (`price`, `time`) VALUES ('14.191', '2018-09-19 09:15:24')
2018-09-19 09:15:36 [info][yii\db\Command::execute] INSERT INTO `data_hkhsi` (`price`, `time`) VALUES ('27084.66', '2018-09-18 16:09:00')
2018-09-19 09:15:36 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-09-19 09:15:36 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-09-19 09:15:36 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('1203.2', '2018-09-19 09:15:30')
2018-09-19 09:15:36 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_yb`
2018-09-19 09:15:36 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_yb' AND kcu.table_name = 'data_yb'
2018-09-19 09:15:36 [info][yii\db\Command::execute] INSERT INTO `data_yb` (`price`, `time`) VALUES ('1.3148', '2018-09-19 09:15:36')
2018-09-19 09:15:36 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ay`
2018-09-19 09:15:36 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ay' AND kcu.table_name = 'data_ay'
2018-09-19 09:15:36 [info][yii\db\Command::execute] INSERT INTO `data_ay` (`price`, `time`) VALUES ('0.7216', '2018-09-19 09:15:36')
2018-09-19 09:15:36 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_jy`
2018-09-19 09:15:36 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_jy' AND kcu.table_name = 'data_jy'
2018-09-19 09:15:36 [info][yii\db\Command::execute] INSERT INTO `data_jy` (`price`, `time`) VALUES ('0.7702', '2018-09-19 09:15:26')
2018-09-19 09:15:36 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-09-19 09:15:36 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-09-19 09:15:36 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='69.71', `open`='69.74', `high`='69.84', `low`='69.65', `close`='69.85', `diff`='-0.14', `diff_rate`='-0.2004', `time`='2018-09-19 09:15:27' WHERE `name`='ic1609'
2018-09-19 09:15:36 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='1.16657', `open`='1.16698', `high`='1.16824', `low`='1.16657', `close`='1.16698', `diff`='-0.0004099999999998', `diff_rate`='-0.04', `time`='2018-09-19 09:15:36' WHERE `name`='gc'
2018-09-19 09:15:36 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='1.3148', `open`='1.31463', `high`='1.31754', `low`='1.3148', `close`='1.31483', `diff`='-2.9999999999974E-5', `diff_rate`='-0.00', `time`='2018-09-19 09:15:36' WHERE `name`='yb'
2018-09-19 09:15:36 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='0.7216', `open`='0.72238', `high`='0.72345', `low`='0.7216', `close`='0.72236', `diff`='-0.00075999999999998', `diff_rate`='-0.11', `time`='2018-09-19 09:15:36' WHERE `name`='ay'
2018-09-19 09:15:36 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-09-19 09:15:36 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-09-19 09:15:36 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-09-19 09:15:38 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-09-19 09:15:38 [trace][yii\base\Module::getModule] Loading module: gii
2018-09-19 09:15:38 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-09-19 09:15:38 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-09-19 09:15:38 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-09-19 09:15:38 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-09-19 09:15:38 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wjypay
2018-09-19 09:15:38 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-09-19 09:15:38 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-09-19 09:15:38 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_oil`
2018-09-19 09:15:38 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_oil' AND kcu.table_name = 'data_oil'
2018-09-19 09:15:38 [info][yii\db\Command::execute] INSERT INTO `data_oil` (`price`, `time`) VALUES ('69.71', '2018-09-19 09:15:27')
2018-09-19 09:15:38 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ic1609`
2018-09-19 09:15:38 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ic1609' AND kcu.table_name = 'data_ic1609'
2018-09-19 09:15:38 [info][yii\db\Command::execute] INSERT INTO `data_ic1609` (`price`, `time`) VALUES ('69.71', '2018-09-19 09:15:27')
2018-09-19 09:15:38 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_gc`
2018-09-19 09:15:38 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_gc' AND kcu.table_name = 'data_gc'
2018-09-19 09:15:38 [info][yii\db\Command::execute] INSERT INTO `data_gc` (`price`, `time`) VALUES ('1.16657', '2018-09-19 09:15:38')
2018-09-19 09:15:38 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_hkhsi`
2018-09-19 09:15:38 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_hkhsi' AND kcu.table_name = 'data_hkhsi'
2018-09-19 09:15:38 [info][yii\db\Command::execute] INSERT INTO `data_hkhsi` (`price`, `time`) VALUES ('27084.66', '2018-09-18 16:09:00')
2018-09-19 09:15:38 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ag`
2018-09-19 09:15:38 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ag' AND kcu.table_name = 'data_ag'
2018-09-19 09:15:38 [info][yii\db\Command::execute] INSERT INTO `data_ag` (`price`, `time`) VALUES ('14.191', '2018-09-19 09:15:24')
2018-09-19 09:15:38 [info][yii\db\Command::execute] INSERT INTO `data_hkhsi` (`price`, `time`) VALUES ('27084.66', '2018-09-18 16:09:00')
2018-09-19 09:15:38 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-09-19 09:15:38 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-09-19 09:15:38 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('1203.2', '2018-09-19 09:15:30')
2018-09-19 09:15:38 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_yb`
2018-09-19 09:15:38 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_yb' AND kcu.table_name = 'data_yb'
2018-09-19 09:15:38 [info][yii\db\Command::execute] INSERT INTO `data_yb` (`price`, `time`) VALUES ('1.31486', '2018-09-19 09:15:38')
2018-09-19 09:15:38 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ay`
2018-09-19 09:15:38 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ay' AND kcu.table_name = 'data_ay'
2018-09-19 09:15:38 [info][yii\db\Command::execute] INSERT INTO `data_ay` (`price`, `time`) VALUES ('0.7217', '2018-09-19 09:15:38')
2018-09-19 09:15:38 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_jy`
2018-09-19 09:15:38 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_jy' AND kcu.table_name = 'data_jy'
2018-09-19 09:15:38 [info][yii\db\Command::execute] INSERT INTO `data_jy` (`price`, `time`) VALUES ('0.7702', '2018-09-19 09:15:26')
2018-09-19 09:15:38 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-09-19 09:15:38 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-09-19 09:15:38 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='69.71', `open`='69.74', `high`='69.84', `low`='69.65', `close`='69.85', `diff`='-0.14', `diff_rate`='-0.2004', `time`='2018-09-19 09:15:27' WHERE `name`='ic1609'
2018-09-19 09:15:38 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='1.16657', `open`='1.16698', `high`='1.16824', `low`='1.16657', `close`='1.16698', `diff`='-0.0004099999999998', `diff_rate`='-0.04', `time`='2018-09-19 09:15:38' WHERE `name`='gc'
2018-09-19 09:15:38 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='1.31486', `open`='1.31463', `high`='1.31754', `low`='1.31486', `close`='1.31483', `diff`='2.9999999999974E-5', `diff_rate`='0.00', `time`='2018-09-19 09:15:38' WHERE `name`='yb'
2018-09-19 09:15:38 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='0.7217', `open`='0.72238', `high`='0.72345', `low`='0.7217', `close`='0.72236', `diff`='-0.00065999999999999', `diff_rate`='-0.09', `time`='2018-09-19 09:15:38' WHERE `name`='ay'
2018-09-19 09:15:38 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-09-19 09:15:38 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-09-19 09:15:38 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-09-19 09:15:40 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-09-19 09:15:40 [trace][yii\base\Module::getModule] Loading module: gii
2018-09-19 09:15:40 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-09-19 09:15:40 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-09-19 09:15:40 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-09-19 09:15:40 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-09-19 09:15:40 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wjypay
2018-09-19 09:15:40 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-09-19 09:15:40 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-09-19 09:15:40 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_oil`
2018-09-19 09:15:40 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_oil' AND kcu.table_name = 'data_oil'
2018-09-19 09:15:40 [info][yii\db\Command::execute] INSERT INTO `data_oil` (`price`, `time`) VALUES ('69.71', '2018-09-19 09:15:27')
2018-09-19 09:15:40 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ic1609`
2018-09-19 09:15:40 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ic1609' AND kcu.table_name = 'data_ic1609'
2018-09-19 09:15:40 [info][yii\db\Command::execute] INSERT INTO `data_ic1609` (`price`, `time`) VALUES ('69.71', '2018-09-19 09:15:27')
2018-09-19 09:15:40 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_gc`
2018-09-19 09:15:40 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_gc' AND kcu.table_name = 'data_gc'
2018-09-19 09:15:40 [info][yii\db\Command::execute] INSERT INTO `data_gc` (`price`, `time`) VALUES ('1.16657', '2018-09-19 09:15:40')
2018-09-19 09:15:40 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_hkhsi`
2018-09-19 09:15:40 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_hkhsi' AND kcu.table_name = 'data_hkhsi'
2018-09-19 09:15:40 [info][yii\db\Command::execute] INSERT INTO `data_hkhsi` (`price`, `time`) VALUES ('27084.66', '2018-09-18 16:09:00')
2018-09-19 09:15:40 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ag`
2018-09-19 09:15:40 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ag' AND kcu.table_name = 'data_ag'
2018-09-19 09:15:40 [info][yii\db\Command::execute] INSERT INTO `data_ag` (`price`, `time`) VALUES ('14.191', '2018-09-19 09:15:24')
2018-09-19 09:15:40 [info][yii\db\Command::execute] INSERT INTO `data_hkhsi` (`price`, `time`) VALUES ('27084.66', '2018-09-18 16:09:00')
2018-09-19 09:15:40 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-09-19 09:15:40 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-09-19 09:15:40 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('1203.2', '2018-09-19 09:15:30')
2018-09-19 09:15:40 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_yb`
2018-09-19 09:15:40 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_yb' AND kcu.table_name = 'data_yb'
2018-09-19 09:15:40 [info][yii\db\Command::execute] INSERT INTO `data_yb` (`price`, `time`) VALUES ('1.31486', '2018-09-19 09:15:40')
2018-09-19 09:15:40 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ay`
2018-09-19 09:15:40 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ay' AND kcu.table_name = 'data_ay'
2018-09-19 09:15:40 [info][yii\db\Command::execute] INSERT INTO `data_ay` (`price`, `time`) VALUES ('0.72172', '2018-09-19 09:15:40')
2018-09-19 09:15:40 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_jy`
2018-09-19 09:15:40 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_jy' AND kcu.table_name = 'data_jy'
2018-09-19 09:15:40 [info][yii\db\Command::execute] INSERT INTO `data_jy` (`price`, `time`) VALUES ('0.7702', '2018-09-19 09:15:26')
2018-09-19 09:15:40 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-09-19 09:15:40 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-09-19 09:15:40 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='69.71', `open`='69.74', `high`='69.84', `low`='69.65', `close`='69.85', `diff`='-0.14', `diff_rate`='-0.2004', `time`='2018-09-19 09:15:27' WHERE `name`='ic1609'
2018-09-19 09:15:40 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='1.16657', `open`='1.16698', `high`='1.16824', `low`='1.16657', `close`='1.16698', `diff`='-0.0004099999999998', `diff_rate`='-0.04', `time`='2018-09-19 09:15:40' WHERE `name`='gc'
2018-09-19 09:15:40 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='1.31486', `open`='1.31463', `high`='1.31754', `low`='1.31486', `close`='1.31483', `diff`='2.9999999999974E-5', `diff_rate`='0.00', `time`='2018-09-19 09:15:40' WHERE `name`='yb'
2018-09-19 09:15:40 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='0.72172', `open`='0.72238', `high`='0.72345', `low`='0.72172', `close`='0.72236', `diff`='-0.00063999999999997', `diff_rate`='-0.09', `time`='2018-09-19 09:15:40' WHERE `name`='ay'
2018-09-19 09:15:40 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-09-19 09:15:40 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-09-19 09:15:40 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-09-19 09:15:41 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-09-19 09:15:41 [trace][yii\base\Module::getModule] Loading module: gii
2018-09-19 09:15:41 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-09-19 09:15:42 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-09-19 09:15:42 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-09-19 09:15:42 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-09-19 09:15:42 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wjypay
2018-09-19 09:15:42 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-09-19 09:15:42 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-09-19 09:15:42 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_oil`
2018-09-19 09:15:42 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_oil' AND kcu.table_name = 'data_oil'
2018-09-19 09:15:42 [info][yii\db\Command::execute] INSERT INTO `data_oil` (`price`, `time`) VALUES ('69.71', '2018-09-19 09:15:41')
2018-09-19 09:15:42 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ic1609`
2018-09-19 09:15:42 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ic1609' AND kcu.table_name = 'data_ic1609'
2018-09-19 09:15:42 [info][yii\db\Command::execute] INSERT INTO `data_ic1609` (`price`, `time`) VALUES ('69.71', '2018-09-19 09:15:41')
2018-09-19 09:15:42 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_gc`
2018-09-19 09:15:42 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_gc' AND kcu.table_name = 'data_gc'
2018-09-19 09:15:42 [info][yii\db\Command::execute] INSERT INTO `data_gc` (`price`, `time`) VALUES ('1.16653', '2018-09-19 09:15:41')
2018-09-19 09:15:42 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_hkhsi`
2018-09-19 09:15:42 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_hkhsi' AND kcu.table_name = 'data_hkhsi'
2018-09-19 09:15:42 [info][yii\db\Command::execute] INSERT INTO `data_hkhsi` (`price`, `time`) VALUES ('27084.66', '2018-09-18 16:09:00')
2018-09-19 09:15:42 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ag`
2018-09-19 09:15:42 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ag' AND kcu.table_name = 'data_ag'
2018-09-19 09:15:42 [info][yii\db\Command::execute] INSERT INTO `data_ag` (`price`, `time`) VALUES ('14.187', '2018-09-19 09:15:24')
2018-09-19 09:15:42 [info][yii\db\Command::execute] INSERT INTO `data_hkhsi` (`price`, `time`) VALUES ('27084.66', '2018-09-18 16:09:00')
2018-09-19 09:15:42 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-09-19 09:15:42 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-09-19 09:15:42 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('1203.2', '2018-09-19 09:15:30')
2018-09-19 09:15:42 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_yb`
2018-09-19 09:15:42 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_yb' AND kcu.table_name = 'data_yb'
2018-09-19 09:15:42 [info][yii\db\Command::execute] INSERT INTO `data_yb` (`price`, `time`) VALUES ('1.3147', '2018-09-19 09:15:42')
2018-09-19 09:15:42 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ay`
2018-09-19 09:15:42 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ay' AND kcu.table_name = 'data_ay'
2018-09-19 09:15:42 [info][yii\db\Command::execute] INSERT INTO `data_ay` (`price`, `time`) VALUES ('0.72174', '2018-09-19 09:15:42')
2018-09-19 09:15:42 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_jy`
2018-09-19 09:15:42 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_jy' AND kcu.table_name = 'data_jy'
2018-09-19 09:15:42 [info][yii\db\Command::execute] INSERT INTO `data_jy` (`price`, `time`) VALUES ('0.7702', '2018-09-19 09:15:26')
2018-09-19 09:15:42 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-09-19 09:15:42 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-09-19 09:15:42 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='69.71', `open`='69.74', `high`='69.84', `low`='69.65', `close`='69.85', `diff`='-0.14', `diff_rate`='-0.2004', `time`='2018-09-19 09:15:41' WHERE `name`='oil'
2018-09-19 09:15:42 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='69.71', `open`='69.74', `high`='69.84', `low`='69.65', `close`='69.85', `diff`='-0.14', `diff_rate`='-0.2004', `time`='2018-09-19 09:15:41' WHERE `name`='ic1609'
2018-09-19 09:15:42 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='1.16653', `open`='1.16698', `high`='1.16824', `low`='1.16653', `close`='1.16698', `diff`='-0.00044999999999984', `diff_rate`='-0.04', `time`='2018-09-19 09:15:41' WHERE `name`='gc'
2018-09-19 09:15:42 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='1.3147', `open`='1.31463', `high`='1.31754', `low`='1.3147', `close`='1.31483', `diff`='-0.00012999999999996', `diff_rate`='-0.01', `time`='2018-09-19 09:15:42' WHERE `name`='yb'
2018-09-19 09:15:42 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='0.72174', `open`='0.72238', `high`='0.72345', `low`='0.72174', `close`='0.72236', `diff`='-0.00061999999999995', `diff_rate`='-0.09', `time`='2018-09-19 09:15:42' WHERE `name`='ay'
2018-09-19 09:15:42 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-09-19 09:15:42 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-09-19 09:15:42 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-09-19 09:15:43 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-09-19 09:15:43 [trace][yii\base\Module::getModule] Loading module: gii
2018-09-19 09:15:43 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-09-19 09:15:43 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-09-19 09:15:43 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-09-19 09:15:44 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-09-19 09:15:44 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wjypay
2018-09-19 09:15:44 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-09-19 09:15:44 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-09-19 09:15:44 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_oil`
2018-09-19 09:15:44 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_oil' AND kcu.table_name = 'data_oil'
2018-09-19 09:15:44 [info][yii\db\Command::execute] INSERT INTO `data_oil` (`price`, `time`) VALUES ('69.71', '2018-09-19 09:15:41')
2018-09-19 09:15:44 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ic1609`
2018-09-19 09:15:44 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ic1609' AND kcu.table_name = 'data_ic1609'
2018-09-19 09:15:44 [info][yii\db\Command::execute] INSERT INTO `data_ic1609` (`price`, `time`) VALUES ('69.71', '2018-09-19 09:15:41')
2018-09-19 09:15:44 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_gc`
2018-09-19 09:15:44 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_gc' AND kcu.table_name = 'data_gc'
2018-09-19 09:15:44 [info][yii\db\Command::execute] INSERT INTO `data_gc` (`price`, `time`) VALUES ('1.16653', '2018-09-19 09:15:41')
2018-09-19 09:15:44 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_hkhsi`
2018-09-19 09:15:44 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_hkhsi' AND kcu.table_name = 'data_hkhsi'
2018-09-19 09:15:44 [info][yii\db\Command::execute] INSERT INTO `data_hkhsi` (`price`, `time`) VALUES ('27084.66', '2018-09-18 16:09:00')
2018-09-19 09:15:44 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ag`
2018-09-19 09:15:44 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ag' AND kcu.table_name = 'data_ag'
2018-09-19 09:15:44 [info][yii\db\Command::execute] INSERT INTO `data_ag` (`price`, `time`) VALUES ('14.187', '2018-09-19 09:15:24')
2018-09-19 09:15:44 [info][yii\db\Command::execute] INSERT INTO `data_hkhsi` (`price`, `time`) VALUES ('27084.66', '2018-09-18 16:09:00')
2018-09-19 09:15:44 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-09-19 09:15:44 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-09-19 09:15:44 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('1203.2', '2018-09-19 09:15:30')
2018-09-19 09:15:44 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_yb`
2018-09-19 09:15:44 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_yb' AND kcu.table_name = 'data_yb'
2018-09-19 09:15:44 [info][yii\db\Command::execute] INSERT INTO `data_yb` (`price`, `time`) VALUES ('1.31486', '2018-09-19 09:15:44')
2018-09-19 09:15:44 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ay`
2018-09-19 09:15:44 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ay' AND kcu.table_name = 'data_ay'
2018-09-19 09:15:44 [info][yii\db\Command::execute] INSERT INTO `data_ay` (`price`, `time`) VALUES ('0.7214', '2018-09-19 09:15:42')
2018-09-19 09:15:44 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_jy`
2018-09-19 09:15:44 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_jy' AND kcu.table_name = 'data_jy'
2018-09-19 09:15:44 [info][yii\db\Command::execute] INSERT INTO `data_jy` (`price`, `time`) VALUES ('0.7702', '2018-09-19 09:15:26')
2018-09-19 09:15:44 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-09-19 09:15:44 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-09-19 09:15:44 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='69.71', `open`='69.74', `high`='69.84', `low`='69.65', `close`='69.85', `diff`='-0.14', `diff_rate`='-0.2004', `time`='2018-09-19 09:15:41' WHERE `name`='ic1609'
2018-09-19 09:15:44 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='1.31486', `open`='1.31463', `high`='1.31754', `low`='1.31486', `close`='1.31483', `diff`='2.9999999999974E-5', `diff_rate`='0.00', `time`='2018-09-19 09:15:44' WHERE `name`='yb'
2018-09-19 09:15:44 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-09-19 09:15:44 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-09-19 09:15:44 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-09-19 09:15:46 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-09-19 09:15:46 [trace][yii\base\Module::getModule] Loading module: gii
2018-09-19 09:15:46 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-09-19 09:15:46 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-09-19 09:15:46 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-09-19 09:15:46 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-09-19 09:15:46 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wjypay
2018-09-19 09:15:46 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-09-19 09:15:46 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-09-19 09:15:46 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_oil`
2018-09-19 09:15:46 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_oil' AND kcu.table_name = 'data_oil'
2018-09-19 09:15:46 [info][yii\db\Command::execute] INSERT INTO `data_oil` (`price`, `time`) VALUES ('69.71', '2018-09-19 09:15:41')
2018-09-19 09:15:46 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ic1609`
2018-09-19 09:15:46 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ic1609' AND kcu.table_name = 'data_ic1609'
2018-09-19 09:15:46 [info][yii\db\Command::execute] INSERT INTO `data_ic1609` (`price`, `time`) VALUES ('69.71', '2018-09-19 09:15:41')
2018-09-19 09:15:46 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_gc`
2018-09-19 09:15:46 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_gc' AND kcu.table_name = 'data_gc'
2018-09-19 09:15:46 [info][yii\db\Command::execute] INSERT INTO `data_gc` (`price`, `time`) VALUES ('1.16657', '2018-09-19 09:15:46')
2018-09-19 09:15:46 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_hkhsi`
2018-09-19 09:15:46 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_hkhsi' AND kcu.table_name = 'data_hkhsi'
2018-09-19 09:15:46 [info][yii\db\Command::execute] INSERT INTO `data_hkhsi` (`price`, `time`) VALUES ('27084.66', '2018-09-18 16:09:00')
2018-09-19 09:15:46 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ag`
2018-09-19 09:15:46 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ag' AND kcu.table_name = 'data_ag'
2018-09-19 09:15:46 [info][yii\db\Command::execute] INSERT INTO `data_ag` (`price`, `time`) VALUES ('14.194', '2018-09-19 09:15:24')
2018-09-19 09:15:46 [info][yii\db\Command::execute] INSERT INTO `data_hkhsi` (`price`, `time`) VALUES ('27084.66', '2018-09-18 16:09:00')
2018-09-19 09:15:46 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-09-19 09:15:46 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-09-19 09:15:46 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('1203.2', '2018-09-19 09:15:30')
2018-09-19 09:15:46 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_yb`
2018-09-19 09:15:46 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_yb' AND kcu.table_name = 'data_yb'
2018-09-19 09:15:46 [info][yii\db\Command::execute] INSERT INTO `data_yb` (`price`, `time`) VALUES ('1.31488', '2018-09-19 09:15:46')
2018-09-19 09:15:46 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ay`
2018-09-19 09:15:46 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ay' AND kcu.table_name = 'data_ay'
2018-09-19 09:15:46 [info][yii\db\Command::execute] INSERT INTO `data_ay` (`price`, `time`) VALUES ('0.72168', '2018-09-19 09:15:46')
2018-09-19 09:15:46 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_jy`
2018-09-19 09:15:46 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_jy' AND kcu.table_name = 'data_jy'
2018-09-19 09:15:46 [info][yii\db\Command::execute] INSERT INTO `data_jy` (`price`, `time`) VALUES ('0.7702', '2018-09-19 09:15:26')
2018-09-19 09:15:46 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-09-19 09:15:46 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-09-19 09:15:46 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='69.71', `open`='69.74', `high`='69.84', `low`='69.65', `close`='69.85', `diff`='-0.14', `diff_rate`='-0.2004', `time`='2018-09-19 09:15:41' WHERE `name`='ic1609'
2018-09-19 09:15:46 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='1.16657', `open`='1.16698', `high`='1.16824', `low`='1.16657', `close`='1.16698', `diff`='-0.0004099999999998', `diff_rate`='-0.04', `time`='2018-09-19 09:15:46' WHERE `name`='gc'
2018-09-19 09:15:46 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='1.31488', `open`='1.31463', `high`='1.31754', `low`='1.31488', `close`='1.31483', `diff`='5.0000000000106E-5', `diff_rate`='0.00', `time`='2018-09-19 09:15:46' WHERE `name`='yb'
2018-09-19 09:15:46 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='0.72168', `open`='0.72238', `high`='0.72345', `low`='0.72168', `close`='0.72236', `diff`='-0.00068000000000001', `diff_rate`='-0.09', `time`='2018-09-19 09:15:46' WHERE `name`='ay'
2018-09-19 09:15:46 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-09-19 09:15:46 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-09-19 09:15:46 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-09-19 09:15:47 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-09-19 09:15:47 [trace][yii\base\Module::getModule] Loading module: gii
2018-09-19 09:15:47 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-09-19 09:15:47 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-09-19 09:15:47 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-09-19 09:15:47 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-09-19 09:15:47 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wjypay
2018-09-19 09:15:47 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-09-19 09:15:47 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-09-19 09:15:48 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_oil`
2018-09-19 09:15:48 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_oil' AND kcu.table_name = 'data_oil'
2018-09-19 09:15:48 [info][yii\db\Command::execute] INSERT INTO `data_oil` (`price`, `time`) VALUES ('69.71', '2018-09-19 09:15:41')
2018-09-19 09:15:48 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ic1609`
2018-09-19 09:15:48 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ic1609' AND kcu.table_name = 'data_ic1609'
2018-09-19 09:15:48 [info][yii\db\Command::execute] INSERT INTO `data_ic1609` (`price`, `time`) VALUES ('69.71', '2018-09-19 09:15:41')
2018-09-19 09:15:48 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_gc`
2018-09-19 09:15:48 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_gc' AND kcu.table_name = 'data_gc'
2018-09-19 09:15:48 [info][yii\db\Command::execute] INSERT INTO `data_gc` (`price`, `time`) VALUES ('1.16657', '2018-09-19 09:15:46')
2018-09-19 09:15:48 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_hkhsi`
2018-09-19 09:15:48 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_hkhsi' AND kcu.table_name = 'data_hkhsi'
2018-09-19 09:15:48 [info][yii\db\Command::execute] INSERT INTO `data_hkhsi` (`price`, `time`) VALUES ('27084.66', '2018-09-18 16:09:00')
2018-09-19 09:15:48 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ag`
2018-09-19 09:15:48 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ag' AND kcu.table_name = 'data_ag'
2018-09-19 09:15:48 [info][yii\db\Command::execute] INSERT INTO `data_ag` (`price`, `time`) VALUES ('14.194', '2018-09-19 09:15:24')
2018-09-19 09:15:48 [info][yii\db\Command::execute] INSERT INTO `data_hkhsi` (`price`, `time`) VALUES ('27084.66', '2018-09-18 16:09:00')
2018-09-19 09:15:48 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-09-19 09:15:48 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-09-19 09:15:48 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('1203.2', '2018-09-19 09:15:30')
2018-09-19 09:15:48 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_yb`
2018-09-19 09:15:48 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_yb' AND kcu.table_name = 'data_yb'
2018-09-19 09:15:48 [info][yii\db\Command::execute] INSERT INTO `data_yb` (`price`, `time`) VALUES ('1.31484', '2018-09-19 09:15:48')
2018-09-19 09:15:48 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ay`
2018-09-19 09:15:48 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ay' AND kcu.table_name = 'data_ay'
2018-09-19 09:15:48 [info][yii\db\Command::execute] INSERT INTO `data_ay` (`price`, `time`) VALUES ('0.72172', '2018-09-19 09:15:48')
2018-09-19 09:15:48 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_jy`
2018-09-19 09:15:48 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_jy' AND kcu.table_name = 'data_jy'
2018-09-19 09:15:48 [info][yii\db\Command::execute] INSERT INTO `data_jy` (`price`, `time`) VALUES ('0.7702', '2018-09-19 09:15:26')
2018-09-19 09:15:48 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-09-19 09:15:48 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-09-19 09:15:48 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='69.71', `open`='69.74', `high`='69.84', `low`='69.65', `close`='69.85', `diff`='-0.14', `diff_rate`='-0.2004', `time`='2018-09-19 09:15:41' WHERE `name`='ic1609'
2018-09-19 09:15:48 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='1.31484', `open`='1.31463', `high`='1.31754', `low`='1.31484', `close`='1.31483', `diff`='1.0000000000066E-5', `diff_rate`='0.00', `time`='2018-09-19 09:15:48' WHERE `name`='yb'
2018-09-19 09:15:48 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='0.72172', `open`='0.72238', `high`='0.72345', `low`='0.72172', `close`='0.72236', `diff`='-0.00063999999999997', `diff_rate`='-0.09', `time`='2018-09-19 09:15:48' WHERE `name`='ay'
2018-09-19 09:15:48 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-09-19 09:15:48 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-09-19 09:15:48 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-09-19 09:15:49 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-09-19 09:15:49 [trace][yii\base\Module::getModule] Loading module: gii
2018-09-19 09:15:49 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-09-19 09:15:49 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-09-19 09:15:49 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-09-19 09:15:49 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-09-19 09:15:49 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wjypay
2018-09-19 09:15:49 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-09-19 09:15:49 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-09-19 09:15:49 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_oil`
2018-09-19 09:15:49 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_oil' AND kcu.table_name = 'data_oil'
2018-09-19 09:15:49 [info][yii\db\Command::execute] INSERT INTO `data_oil` (`price`, `time`) VALUES ('69.71', '2018-09-19 09:15:41')
2018-09-19 09:15:49 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ic1609`
2018-09-19 09:15:49 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ic1609' AND kcu.table_name = 'data_ic1609'
2018-09-19 09:15:49 [info][yii\db\Command::execute] INSERT INTO `data_ic1609` (`price`, `time`) VALUES ('69.71', '2018-09-19 09:15:41')
2018-09-19 09:15:50 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_gc`
2018-09-19 09:15:50 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_gc' AND kcu.table_name = 'data_gc'
2018-09-19 09:15:50 [info][yii\db\Command::execute] INSERT INTO `data_gc` (`price`, `time`) VALUES ('1.16657', '2018-09-19 09:15:47')
2018-09-19 09:15:50 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_hkhsi`
2018-09-19 09:15:50 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_hkhsi' AND kcu.table_name = 'data_hkhsi'
2018-09-19 09:15:50 [info][yii\db\Command::execute] INSERT INTO `data_hkhsi` (`price`, `time`) VALUES ('27084.66', '2018-09-18 16:09:00')
2018-09-19 09:15:50 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ag`
2018-09-19 09:15:50 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ag' AND kcu.table_name = 'data_ag'
2018-09-19 09:15:50 [info][yii\db\Command::execute] INSERT INTO `data_ag` (`price`, `time`) VALUES ('14.194', '2018-09-19 09:15:24')
2018-09-19 09:15:50 [info][yii\db\Command::execute] INSERT INTO `data_hkhsi` (`price`, `time`) VALUES ('27084.66', '2018-09-18 16:09:00')
2018-09-19 09:15:50 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-09-19 09:15:50 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-09-19 09:15:50 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('1203.2', '2018-09-19 09:15:30')
2018-09-19 09:15:50 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_yb`
2018-09-19 09:15:50 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_yb' AND kcu.table_name = 'data_yb'
2018-09-19 09:15:50 [info][yii\db\Command::execute] INSERT INTO `data_yb` (`price`, `time`) VALUES ('1.31486', '2018-09-19 09:15:50')
2018-09-19 09:15:50 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ay`
2018-09-19 09:15:50 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ay' AND kcu.table_name = 'data_ay'
2018-09-19 09:15:50 [info][yii\db\Command::execute] INSERT INTO `data_ay` (`price`, `time`) VALUES ('0.7217', '2018-09-19 09:15:50')
2018-09-19 09:15:50 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_jy`
2018-09-19 09:15:50 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_jy' AND kcu.table_name = 'data_jy'
2018-09-19 09:15:50 [info][yii\db\Command::execute] INSERT INTO `data_jy` (`price`, `time`) VALUES ('0.7702', '2018-09-19 09:15:26')
2018-09-19 09:15:50 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-09-19 09:15:50 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-09-19 09:15:50 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='69.71', `open`='69.74', `high`='69.84', `low`='69.65', `close`='69.85', `diff`='-0.14', `diff_rate`='-0.2004', `time`='2018-09-19 09:15:41' WHERE `name`='ic1609'
2018-09-19 09:15:50 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='1.16657', `open`='1.16698', `high`='1.16824', `low`='1.16657', `close`='1.16698', `diff`='-0.0004099999999998', `diff_rate`='-0.04', `time`='2018-09-19 09:15:47' WHERE `name`='gc'
2018-09-19 09:15:50 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='1.31486', `open`='1.31463', `high`='1.31754', `low`='1.31486', `close`='1.31483', `diff`='2.9999999999974E-5', `diff_rate`='0.00', `time`='2018-09-19 09:15:50' WHERE `name`='yb'
2018-09-19 09:15:50 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='0.7217', `open`='0.72238', `high`='0.72345', `low`='0.7217', `close`='0.72236', `diff`='-0.00065999999999999', `diff_rate`='-0.09', `time`='2018-09-19 09:15:50' WHERE `name`='ay'
2018-09-19 09:15:50 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-09-19 09:15:50 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-09-19 09:15:50 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-09-19 09:15:51 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-09-19 09:15:51 [trace][yii\base\Module::getModule] Loading module: gii
2018-09-19 09:15:51 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-09-19 09:15:51 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-09-19 09:15:51 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-09-19 09:15:51 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-09-19 09:15:51 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wjypay
2018-09-19 09:15:51 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-09-19 09:15:51 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-09-19 09:15:51 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_oil`
2018-09-19 09:15:51 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_oil' AND kcu.table_name = 'data_oil'
2018-09-19 09:15:51 [info][yii\db\Command::execute] INSERT INTO `data_oil` (`price`, `time`) VALUES ('69.71', '2018-09-19 09:15:41')
2018-09-19 09:15:51 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ic1609`
2018-09-19 09:15:51 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ic1609' AND kcu.table_name = 'data_ic1609'
2018-09-19 09:15:51 [info][yii\db\Command::execute] INSERT INTO `data_ic1609` (`price`, `time`) VALUES ('69.71', '2018-09-19 09:15:41')
2018-09-19 09:15:51 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_gc`
2018-09-19 09:15:51 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_gc' AND kcu.table_name = 'data_gc'
2018-09-19 09:15:51 [info][yii\db\Command::execute] INSERT INTO `data_gc` (`price`, `time`) VALUES ('1.16654', '2018-09-19 09:15:50')
2018-09-19 09:15:52 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_hkhsi`
2018-09-19 09:15:52 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_hkhsi' AND kcu.table_name = 'data_hkhsi'
2018-09-19 09:15:52 [info][yii\db\Command::execute] INSERT INTO `data_hkhsi` (`price`, `time`) VALUES ('27084.66', '2018-09-18 16:09:00')
2018-09-19 09:15:52 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ag`
2018-09-19 09:15:52 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ag' AND kcu.table_name = 'data_ag'
2018-09-19 09:15:52 [info][yii\db\Command::execute] INSERT INTO `data_ag` (`price`, `time`) VALUES ('14.188', '2018-09-19 09:15:24')
2018-09-19 09:15:52 [info][yii\db\Command::execute] INSERT INTO `data_hkhsi` (`price`, `time`) VALUES ('27084.66', '2018-09-18 16:09:00')
2018-09-19 09:15:52 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-09-19 09:15:52 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-09-19 09:15:52 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('1203.2', '2018-09-19 09:15:30')
2018-09-19 09:15:52 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_yb`
2018-09-19 09:15:52 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_yb' AND kcu.table_name = 'data_yb'
2018-09-19 09:15:52 [info][yii\db\Command::execute] INSERT INTO `data_yb` (`price`, `time`) VALUES ('1.31486', '2018-09-19 09:15:52')
2018-09-19 09:15:52 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ay`
2018-09-19 09:15:52 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ay' AND kcu.table_name = 'data_ay'
2018-09-19 09:15:52 [info][yii\db\Command::execute] INSERT INTO `data_ay` (`price`, `time`) VALUES ('0.72171', '2018-09-19 09:15:52')
2018-09-19 09:15:52 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_jy`
2018-09-19 09:15:52 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_jy' AND kcu.table_name = 'data_jy'
2018-09-19 09:15:52 [info][yii\db\Command::execute] INSERT INTO `data_jy` (`price`, `time`) VALUES ('0.7702', '2018-09-19 09:15:26')
2018-09-19 09:15:52 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-09-19 09:15:52 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-09-19 09:15:52 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='69.71', `open`='69.74', `high`='69.84', `low`='69.65', `close`='69.85', `diff`='-0.14', `diff_rate`='-0.2004', `time`='2018-09-19 09:15:41' WHERE `name`='ic1609'
2018-09-19 09:15:52 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='1.16654', `open`='1.16698', `high`='1.16824', `low`='1.16654', `close`='1.16698', `diff`='-0.00044', `diff_rate`='-0.04', `time`='2018-09-19 09:15:50' WHERE `name`='gc'
2018-09-19 09:15:52 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='1.31486', `open`='1.31463', `high`='1.31754', `low`='1.31486', `close`='1.31483', `diff`='2.9999999999974E-5', `diff_rate`='0.00', `time`='2018-09-19 09:15:52' WHERE `name`='yb'
2018-09-19 09:15:52 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='0.72171', `open`='0.72238', `high`='0.72345', `low`='0.72171', `close`='0.72236', `diff`='-0.00065000000000004', `diff_rate`='-0.09', `time`='2018-09-19 09:15:52' WHERE `name`='ay'
2018-09-19 09:15:52 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-09-19 09:15:52 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-09-19 09:15:52 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-09-19 09:15:54 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-09-19 09:15:54 [trace][yii\base\Module::getModule] Loading module: gii
2018-09-19 09:15:54 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-09-19 09:15:54 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-09-19 09:15:54 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-09-19 09:15:54 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-09-19 09:15:54 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wjypay
2018-09-19 09:15:54 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-09-19 09:15:54 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-09-19 09:15:54 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_oil`
2018-09-19 09:15:54 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_oil' AND kcu.table_name = 'data_oil'
2018-09-19 09:15:54 [info][yii\db\Command::execute] INSERT INTO `data_oil` (`price`, `time`) VALUES ('69.71', '2018-09-19 09:15:41')
2018-09-19 09:15:54 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ic1609`
2018-09-19 09:15:54 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ic1609' AND kcu.table_name = 'data_ic1609'
2018-09-19 09:15:54 [info][yii\db\Command::execute] INSERT INTO `data_ic1609` (`price`, `time`) VALUES ('69.71', '2018-09-19 09:15:41')
2018-09-19 09:15:54 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_gc`
2018-09-19 09:15:54 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_gc' AND kcu.table_name = 'data_gc'
2018-09-19 09:15:54 [info][yii\db\Command::execute] INSERT INTO `data_gc` (`price`, `time`) VALUES ('1.16652', '2018-09-19 09:15:54')
2018-09-19 09:15:54 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_hkhsi`
2018-09-19 09:15:54 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_hkhsi' AND kcu.table_name = 'data_hkhsi'
2018-09-19 09:15:54 [info][yii\db\Command::execute] INSERT INTO `data_hkhsi` (`price`, `time`) VALUES ('27084.66', '2018-09-18 16:09:00')
2018-09-19 09:15:54 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ag`
2018-09-19 09:15:54 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ag' AND kcu.table_name = 'data_ag'
2018-09-19 09:15:54 [info][yii\db\Command::execute] INSERT INTO `data_ag` (`price`, `time`) VALUES ('14.188', '2018-09-19 09:15:24')
2018-09-19 09:15:54 [info][yii\db\Command::execute] INSERT INTO `data_hkhsi` (`price`, `time`) VALUES ('27084.66', '2018-09-18 16:09:00')
2018-09-19 09:15:54 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-09-19 09:15:54 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-09-19 09:15:54 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('1203.2', '2018-09-19 09:15:30')
2018-09-19 09:15:54 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_yb`
2018-09-19 09:15:54 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_yb' AND kcu.table_name = 'data_yb'
2018-09-19 09:15:54 [info][yii\db\Command::execute] INSERT INTO `data_yb` (`price`, `time`) VALUES ('1.31486', '2018-09-19 09:15:54')
2018-09-19 09:15:54 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ay`
2018-09-19 09:15:54 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ay' AND kcu.table_name = 'data_ay'
2018-09-19 09:15:54 [info][yii\db\Command::execute] INSERT INTO `data_ay` (`price`, `time`) VALUES ('0.72172', '2018-09-19 09:15:54')
2018-09-19 09:15:54 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_jy`
2018-09-19 09:15:54 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_jy' AND kcu.table_name = 'data_jy'
2018-09-19 09:15:54 [info][yii\db\Command::execute] INSERT INTO `data_jy` (`price`, `time`) VALUES ('0.7702', '2018-09-19 09:15:26')
2018-09-19 09:15:54 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-09-19 09:15:54 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-09-19 09:15:54 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='69.71', `open`='69.74', `high`='69.84', `low`='69.65', `close`='69.85', `diff`='-0.14', `diff_rate`='-0.2004', `time`='2018-09-19 09:15:41' WHERE `name`='ic1609'
2018-09-19 09:15:54 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='1.16652', `open`='1.16698', `high`='1.16824', `low`='1.16652', `close`='1.16698', `diff`='-0.0004599999999999', `diff_rate`='-0.04', `time`='2018-09-19 09:15:54' WHERE `name`='gc'
2018-09-19 09:15:54 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='1.31486', `open`='1.31463', `high`='1.31754', `low`='1.31486', `close`='1.31483', `diff`='2.9999999999974E-5', `diff_rate`='0.00', `time`='2018-09-19 09:15:54' WHERE `name`='yb'
2018-09-19 09:15:54 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='0.72172', `open`='0.72238', `high`='0.72345', `low`='0.72172', `close`='0.72236', `diff`='-0.00063999999999997', `diff_rate`='-0.09', `time`='2018-09-19 09:15:54' WHERE `name`='ay'
2018-09-19 09:15:54 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-09-19 09:15:54 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-09-19 09:15:54 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-09-19 09:15:55 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-09-19 09:15:55 [trace][yii\base\Module::getModule] Loading module: gii
2018-09-19 09:15:55 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-09-19 09:15:55 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-09-19 09:15:55 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-09-19 09:15:56 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-09-19 09:15:56 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wjypay
2018-09-19 09:15:56 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-09-19 09:15:56 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-09-19 09:15:56 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_oil`
2018-09-19 09:15:56 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_oil' AND kcu.table_name = 'data_oil'
2018-09-19 09:15:56 [info][yii\db\Command::execute] INSERT INTO `data_oil` (`price`, `time`) VALUES ('69.71', '2018-09-19 09:15:41')
2018-09-19 09:15:56 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ic1609`
2018-09-19 09:15:56 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ic1609' AND kcu.table_name = 'data_ic1609'
2018-09-19 09:15:56 [info][yii\db\Command::execute] INSERT INTO `data_ic1609` (`price`, `time`) VALUES ('69.71', '2018-09-19 09:15:41')
2018-09-19 09:15:56 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_gc`
2018-09-19 09:15:56 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_gc' AND kcu.table_name = 'data_gc'
2018-09-19 09:15:56 [info][yii\db\Command::execute] INSERT INTO `data_gc` (`price`, `time`) VALUES ('1.16653', '2018-09-19 09:15:56')
2018-09-19 09:15:56 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_hkhsi`
2018-09-19 09:15:56 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_hkhsi' AND kcu.table_name = 'data_hkhsi'
2018-09-19 09:15:56 [info][yii\db\Command::execute] INSERT INTO `data_hkhsi` (`price`, `time`) VALUES ('27084.66', '2018-09-18 16:09:00')
2018-09-19 09:15:56 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ag`
2018-09-19 09:15:56 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ag' AND kcu.table_name = 'data_ag'
2018-09-19 09:15:56 [info][yii\db\Command::execute] INSERT INTO `data_ag` (`price`, `time`) VALUES ('14.190', '2018-09-19 09:15:24')
2018-09-19 09:15:56 [info][yii\db\Command::execute] INSERT INTO `data_hkhsi` (`price`, `time`) VALUES ('27084.66', '2018-09-18 16:09:00')
2018-09-19 09:15:56 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-09-19 09:15:56 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-09-19 09:15:56 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('1203.3', '2018-09-19 09:15:56')
2018-09-19 09:15:56 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_yb`
2018-09-19 09:15:56 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_yb' AND kcu.table_name = 'data_yb'
2018-09-19 09:15:56 [info][yii\db\Command::execute] INSERT INTO `data_yb` (`price`, `time`) VALUES ('1.31485', '2018-09-19 09:15:56')
2018-09-19 09:15:56 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ay`
2018-09-19 09:15:56 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ay' AND kcu.table_name = 'data_ay'
2018-09-19 09:15:56 [info][yii\db\Command::execute] INSERT INTO `data_ay` (`price`, `time`) VALUES ('0.72172', '2018-09-19 09:15:56')
2018-09-19 09:15:56 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_jy`
2018-09-19 09:15:56 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_jy' AND kcu.table_name = 'data_jy'
2018-09-19 09:15:56 [info][yii\db\Command::execute] INSERT INTO `data_jy` (`price`, `time`) VALUES ('0.7702', '2018-09-19 09:15:26')
2018-09-19 09:15:56 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-09-19 09:15:56 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-09-19 09:15:56 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='69.71', `open`='69.74', `high`='69.84', `low`='69.65', `close`='69.85', `diff`='-0.14', `diff_rate`='-0.2004', `time`='2018-09-19 09:15:41' WHERE `name`='ic1609'
2018-09-19 09:15:56 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='1.16653', `open`='1.16698', `high`='1.16824', `low`='1.16653', `close`='1.16698', `diff`='-0.00044999999999984', `diff_rate`='-0.04', `time`='2018-09-19 09:15:56' WHERE `name`='gc'
2018-09-19 09:15:56 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='1203.3', `open`='1202.6', `high`='1204.5', `low`='1202.2', `close`='1202.9', `diff`='0.39999999999986', `diff_rate`='0.0333', `time`='2018-09-19 09:15:56' WHERE `name`='xau'
2018-09-19 09:15:56 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='1.31485', `open`='1.31463', `high`='1.31754', `low`='1.31485', `close`='1.31483', `diff`='2.0000000000131E-5', `diff_rate`='0.00', `time`='2018-09-19 09:15:56' WHERE `name`='yb'
2018-09-19 09:15:56 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='0.72172', `open`='0.72238', `high`='0.72345', `low`='0.72172', `close`='0.72236', `diff`='-0.00063999999999997', `diff_rate`='-0.09', `time`='2018-09-19 09:15:56' WHERE `name`='ay'
2018-09-19 09:15:56 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-09-19 09:15:56 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-09-19 09:15:56 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-09-19 09:15:57 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-09-19 09:15:57 [trace][yii\base\Module::getModule] Loading module: gii
2018-09-19 09:15:57 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-09-19 09:15:58 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-09-19 09:15:58 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-09-19 09:15:58 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-09-19 09:15:58 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wjypay
2018-09-19 09:15:58 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-09-19 09:15:58 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-09-19 09:15:58 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_oil`
2018-09-19 09:15:58 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_oil' AND kcu.table_name = 'data_oil'
2018-09-19 09:15:58 [info][yii\db\Command::execute] INSERT INTO `data_oil` (`price`, `time`) VALUES ('69.71', '2018-09-19 09:15:41')
2018-09-19 09:15:58 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ic1609`
2018-09-19 09:15:58 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ic1609' AND kcu.table_name = 'data_ic1609'
2018-09-19 09:15:58 [info][yii\db\Command::execute] INSERT INTO `data_ic1609` (`price`, `time`) VALUES ('69.71', '2018-09-19 09:15:41')
2018-09-19 09:15:58 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_gc`
2018-09-19 09:15:58 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_gc' AND kcu.table_name = 'data_gc'
2018-09-19 09:15:58 [info][yii\db\Command::execute] INSERT INTO `data_gc` (`price`, `time`) VALUES ('1.16654', '2018-09-19 09:15:58')
2018-09-19 09:15:58 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_hkhsi`
2018-09-19 09:15:58 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_hkhsi' AND kcu.table_name = 'data_hkhsi'
2018-09-19 09:15:58 [info][yii\db\Command::execute] INSERT INTO `data_hkhsi` (`price`, `time`) VALUES ('27084.66', '2018-09-18 16:09:00')
2018-09-19 09:15:58 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ag`
2018-09-19 09:15:58 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ag' AND kcu.table_name = 'data_ag'
2018-09-19 09:15:58 [info][yii\db\Command::execute] INSERT INTO `data_ag` (`price`, `time`) VALUES ('14.190', '2018-09-19 09:15:24')
2018-09-19 09:15:58 [info][yii\db\Command::execute] INSERT INTO `data_hkhsi` (`price`, `time`) VALUES ('27084.66', '2018-09-18 16:09:00')
2018-09-19 09:15:58 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-09-19 09:15:58 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-09-19 09:15:58 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('1203.3', '2018-09-19 09:15:56')
2018-09-19 09:15:58 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_yb`
2018-09-19 09:15:58 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_yb' AND kcu.table_name = 'data_yb'
2018-09-19 09:15:58 [info][yii\db\Command::execute] INSERT INTO `data_yb` (`price`, `time`) VALUES ('1.31489', '2018-09-19 09:15:58')
2018-09-19 09:15:58 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ay`
2018-09-19 09:15:58 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ay' AND kcu.table_name = 'data_ay'
2018-09-19 09:15:58 [info][yii\db\Command::execute] INSERT INTO `data_ay` (`price`, `time`) VALUES ('0.72172', '2018-09-19 09:15:58')
2018-09-19 09:15:58 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_jy`
2018-09-19 09:15:58 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_jy' AND kcu.table_name = 'data_jy'
2018-09-19 09:15:58 [info][yii\db\Command::execute] INSERT INTO `data_jy` (`price`, `time`) VALUES ('0.7702', '2018-09-19 09:15:56')
2018-09-19 09:15:58 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-09-19 09:15:58 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-09-19 09:15:58 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='69.71', `open`='69.74', `high`='69.84', `low`='69.65', `close`='69.85', `diff`='-0.14', `diff_rate`='-0.2004', `time`='2018-09-19 09:15:41' WHERE `name`='ic1609'
2018-09-19 09:15:58 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='1.16654', `open`='1.16698', `high`='1.16824', `low`='1.16654', `close`='1.16698', `diff`='-0.00044', `diff_rate`='-0.04', `time`='2018-09-19 09:15:58' WHERE `name`='gc'
2018-09-19 09:15:58 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='1.31489', `open`='1.31463', `high`='1.31754', `low`='1.31489', `close`='1.31483', `diff`='5.9999999999949E-5', `diff_rate`='0.00', `time`='2018-09-19 09:15:58' WHERE `name`='yb'
2018-09-19 09:15:58 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='0.72172', `open`='0.72238', `high`='0.72345', `low`='0.72172', `close`='0.72236', `diff`='-0.00063999999999997', `diff_rate`='-0.09', `time`='2018-09-19 09:15:58' WHERE `name`='ay'
2018-09-19 09:15:58 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='0.7702', `open`='0.7699', `high`='0.7709', `low`='0.7702', `close`='0.7699', `diff`='0.00029999999999997', `diff_rate`='0.04', `time`='2018-09-19 09:15:56' WHERE `name`='jy'
2018-09-19 09:15:58 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-09-19 09:15:58 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-09-19 09:15:58 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-09-19 09:16:00 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-09-19 09:16:00 [trace][yii\base\Module::getModule] Loading module: gii
2018-09-19 09:16:00 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-09-19 09:16:00 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-09-19 09:16:00 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-09-19 09:16:00 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-09-19 09:16:00 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wjypay
2018-09-19 09:16:00 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-09-19 09:16:00 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-09-19 09:16:00 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_oil`
2018-09-19 09:16:00 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_oil' AND kcu.table_name = 'data_oil'
2018-09-19 09:16:00 [info][yii\db\Command::execute] INSERT INTO `data_oil` (`price`, `time`) VALUES ('69.71', '2018-09-19 09:15:41')
2018-09-19 09:16:00 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ic1609`
2018-09-19 09:16:00 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ic1609' AND kcu.table_name = 'data_ic1609'
2018-09-19 09:16:00 [info][yii\db\Command::execute] INSERT INTO `data_ic1609` (`price`, `time`) VALUES ('69.71', '2018-09-19 09:15:41')
2018-09-19 09:16:00 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_gc`
2018-09-19 09:16:00 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_gc' AND kcu.table_name = 'data_gc'
2018-09-19 09:16:00 [info][yii\db\Command::execute] INSERT INTO `data_gc` (`price`, `time`) VALUES ('1.16653', '2018-09-19 09:16:00')
2018-09-19 09:16:00 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_hkhsi`
2018-09-19 09:16:00 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_hkhsi' AND kcu.table_name = 'data_hkhsi'
2018-09-19 09:16:00 [info][yii\db\Command::execute] INSERT INTO `data_hkhsi` (`price`, `time`) VALUES ('27084.66', '2018-09-18 16:09:00')
2018-09-19 09:16:00 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ag`
2018-09-19 09:16:00 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ag' AND kcu.table_name = 'data_ag'
2018-09-19 09:16:00 [info][yii\db\Command::execute] INSERT INTO `data_ag` (`price`, `time`) VALUES ('14.188', '2018-09-19 09:15:24')
2018-09-19 09:16:00 [info][yii\db\Command::execute] INSERT INTO `data_hkhsi` (`price`, `time`) VALUES ('27084.66', '2018-09-18 16:09:00')
2018-09-19 09:16:00 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-09-19 09:16:00 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-09-19 09:16:00 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('1203.3', '2018-09-19 09:15:56')
2018-09-19 09:16:00 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_yb`
2018-09-19 09:16:00 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_yb' AND kcu.table_name = 'data_yb'
2018-09-19 09:16:00 [info][yii\db\Command::execute] INSERT INTO `data_yb` (`price`, `time`) VALUES ('1.31486', '2018-09-19 09:16:00')
2018-09-19 09:16:00 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ay`
2018-09-19 09:16:00 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ay' AND kcu.table_name = 'data_ay'
2018-09-19 09:16:00 [info][yii\db\Command::execute] INSERT INTO `data_ay` (`price`, `time`) VALUES ('0.72176', '2018-09-19 09:16:00')
2018-09-19 09:16:00 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_jy`
2018-09-19 09:16:00 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_jy' AND kcu.table_name = 'data_jy'
2018-09-19 09:16:00 [info][yii\db\Command::execute] INSERT INTO `data_jy` (`price`, `time`) VALUES ('0.7699', '2018-09-19 09:16:00')
2018-09-19 09:16:00 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-09-19 09:16:00 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-09-19 09:16:00 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='69.71', `open`='69.74', `high`='69.84', `low`='69.65', `close`='69.85', `diff`='-0.14', `diff_rate`='-0.2004', `time`='2018-09-19 09:15:41' WHERE `name`='ic1609'
2018-09-19 09:16:00 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='1.16653', `open`='1.16698', `high`='1.16824', `low`='1.16653', `close`='1.16698', `diff`='-0.00044999999999984', `diff_rate`='-0.04', `time`='2018-09-19 09:16:00' WHERE `name`='gc'
2018-09-19 09:16:00 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='1.31486', `open`='1.31463', `high`='1.31754', `low`='1.31486', `close`='1.31483', `diff`='2.9999999999974E-5', `diff_rate`='0.00', `time`='2018-09-19 09:16:00' WHERE `name`='yb'
2018-09-19 09:16:00 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='0.72176', `open`='0.72238', `high`='0.72345', `low`='0.72176', `close`='0.72236', `diff`='-0.00060000000000004', `diff_rate`='-0.08', `time`='2018-09-19 09:16:00' WHERE `name`='ay'
2018-09-19 09:16:00 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='0.7699', `open`='0.7699', `high`='0.7709', `low`='0.7699', `close`='0.7699', `diff`='0', `diff_rate`='0', `time`='2018-09-19 09:16:00' WHERE `name`='jy'
2018-09-19 09:16:00 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-09-19 09:16:00 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-09-19 09:16:00 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-09-19 09:16:01 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-09-19 09:16:01 [trace][yii\base\Module::getModule] Loading module: gii
2018-09-19 09:16:01 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-09-19 09:16:01 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-09-19 09:16:01 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-09-19 09:16:01 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-09-19 09:16:01 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wjypay
2018-09-19 09:16:01 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-09-19 09:16:01 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-09-19 09:16:02 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_oil`
2018-09-19 09:16:02 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_oil' AND kcu.table_name = 'data_oil'
2018-09-19 09:16:02 [info][yii\db\Command::execute] INSERT INTO `data_oil` (`price`, `time`) VALUES ('69.71', '2018-09-19 09:15:41')
2018-09-19 09:16:02 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ic1609`
2018-09-19 09:16:02 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ic1609' AND kcu.table_name = 'data_ic1609'
2018-09-19 09:16:02 [info][yii\db\Command::execute] INSERT INTO `data_ic1609` (`price`, `time`) VALUES ('69.71', '2018-09-19 09:15:41')
2018-09-19 09:16:02 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_gc`
2018-09-19 09:16:02 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_gc' AND kcu.table_name = 'data_gc'
2018-09-19 09:16:02 [info][yii\db\Command::execute] INSERT INTO `data_gc` (`price`, `time`) VALUES ('1.16653', '2018-09-19 09:16:00')
2018-09-19 09:16:02 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_hkhsi`
2018-09-19 09:16:02 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_hkhsi' AND kcu.table_name = 'data_hkhsi'
2018-09-19 09:16:02 [info][yii\db\Command::execute] INSERT INTO `data_hkhsi` (`price`, `time`) VALUES ('27084.66', '2018-09-18 16:09:00')
2018-09-19 09:16:02 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ag`
2018-09-19 09:16:02 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ag' AND kcu.table_name = 'data_ag'
2018-09-19 09:16:02 [info][yii\db\Command::execute] INSERT INTO `data_ag` (`price`, `time`) VALUES ('14.188', '2018-09-19 09:15:24')
2018-09-19 09:16:02 [info][yii\db\Command::execute] INSERT INTO `data_hkhsi` (`price`, `time`) VALUES ('27084.66', '2018-09-18 16:09:00')
2018-09-19 09:16:02 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-09-19 09:16:02 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-09-19 09:16:02 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('1203.3', '2018-09-19 09:15:56')
2018-09-19 09:16:02 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_yb`
2018-09-19 09:16:02 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_yb' AND kcu.table_name = 'data_yb'
2018-09-19 09:16:02 [info][yii\db\Command::execute] INSERT INTO `data_yb` (`price`, `time`) VALUES ('1.31486', '2018-09-19 09:16:02')
2018-09-19 09:16:02 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ay`
2018-09-19 09:16:02 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ay' AND kcu.table_name = 'data_ay'
2018-09-19 09:16:02 [info][yii\db\Command::execute] INSERT INTO `data_ay` (`price`, `time`) VALUES ('0.72173', '2018-09-19 09:16:02')
2018-09-19 09:16:02 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_jy`
2018-09-19 09:16:02 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_jy' AND kcu.table_name = 'data_jy'
2018-09-19 09:16:02 [info][yii\db\Command::execute] INSERT INTO `data_jy` (`price`, `time`) VALUES ('0.7699', '2018-09-19 09:16:00')
2018-09-19 09:16:02 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-09-19 09:16:02 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-09-19 09:16:02 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='69.71', `open`='69.74', `high`='69.84', `low`='69.65', `close`='69.85', `diff`='-0.14', `diff_rate`='-0.2004', `time`='2018-09-19 09:15:41' WHERE `name`='ic1609'
2018-09-19 09:16:02 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='1.31486', `open`='1.31463', `high`='1.31754', `low`='1.31486', `close`='1.31483', `diff`='2.9999999999974E-5', `diff_rate`='0.00', `time`='2018-09-19 09:16:02' WHERE `name`='yb'
2018-09-19 09:16:02 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='0.72173', `open`='0.72238', `high`='0.72345', `low`='0.72173', `close`='0.72236', `diff`='-0.00063000000000002', `diff_rate`='-0.09', `time`='2018-09-19 09:16:02' WHERE `name`='ay'
2018-09-19 09:16:02 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-09-19 09:16:02 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-09-19 09:16:02 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-09-19 09:16:03 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-09-19 09:16:03 [trace][yii\base\Module::getModule] Loading module: gii
2018-09-19 09:16:03 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-09-19 09:16:03 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-09-19 09:16:03 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-09-19 09:16:03 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-09-19 09:16:03 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wjypay
2018-09-19 09:16:03 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-09-19 09:16:03 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-09-19 09:16:03 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_oil`
2018-09-19 09:16:03 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_oil' AND kcu.table_name = 'data_oil'
2018-09-19 09:16:03 [info][yii\db\Command::execute] INSERT INTO `data_oil` (`price`, `time`) VALUES ('69.71', '2018-09-19 09:15:41')
2018-09-19 09:16:04 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ic1609`
2018-09-19 09:16:04 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ic1609' AND kcu.table_name = 'data_ic1609'
2018-09-19 09:16:04 [info][yii\db\Command::execute] INSERT INTO `data_ic1609` (`price`, `time`) VALUES ('69.71', '2018-09-19 09:15:41')
2018-09-19 09:16:04 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_gc`
2018-09-19 09:16:04 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_gc' AND kcu.table_name = 'data_gc'
2018-09-19 09:16:04 [info][yii\db\Command::execute] INSERT INTO `data_gc` (`price`, `time`) VALUES ('1.16653', '2018-09-19 09:16:02')
2018-09-19 09:16:04 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_hkhsi`
2018-09-19 09:16:04 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_hkhsi' AND kcu.table_name = 'data_hkhsi'
2018-09-19 09:16:04 [info][yii\db\Command::execute] INSERT INTO `data_hkhsi` (`price`, `time`) VALUES ('27084.66', '2018-09-18 16:09:00')
2018-09-19 09:16:04 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ag`
2018-09-19 09:16:04 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ag' AND kcu.table_name = 'data_ag'
2018-09-19 09:16:04 [info][yii\db\Command::execute] INSERT INTO `data_ag` (`price`, `time`) VALUES ('14.188', '2018-09-19 09:15:24')
2018-09-19 09:16:04 [info][yii\db\Command::execute] INSERT INTO `data_hkhsi` (`price`, `time`) VALUES ('27084.66', '2018-09-18 16:09:00')
2018-09-19 09:16:04 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-09-19 09:16:04 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-09-19 09:16:04 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('1203.3', '2018-09-19 09:15:56')
2018-09-19 09:16:04 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_yb`
2018-09-19 09:16:04 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_yb' AND kcu.table_name = 'data_yb'
2018-09-19 09:16:04 [info][yii\db\Command::execute] INSERT INTO `data_yb` (`price`, `time`) VALUES ('1.31486', '2018-09-19 09:16:04')
2018-09-19 09:16:04 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ay`
2018-09-19 09:16:04 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ay' AND kcu.table_name = 'data_ay'
2018-09-19 09:16:04 [info][yii\db\Command::execute] INSERT INTO `data_ay` (`price`, `time`) VALUES ('0.72173', '2018-09-19 09:16:04')
2018-09-19 09:16:04 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_jy`
2018-09-19 09:16:04 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_jy' AND kcu.table_name = 'data_jy'
2018-09-19 09:16:04 [info][yii\db\Command::execute] INSERT INTO `data_jy` (`price`, `time`) VALUES ('0.7699', '2018-09-19 09:16:00')
2018-09-19 09:16:04 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-09-19 09:16:04 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-09-19 09:16:04 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='69.71', `open`='69.74', `high`='69.84', `low`='69.65', `close`='69.85', `diff`='-0.14', `diff_rate`='-0.2004', `time`='2018-09-19 09:15:41' WHERE `name`='ic1609'
2018-09-19 09:16:04 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='1.16653', `open`='1.16698', `high`='1.16824', `low`='1.16653', `close`='1.16698', `diff`='-0.00044999999999984', `diff_rate`='-0.04', `time`='2018-09-19 09:16:02' WHERE `name`='gc'
2018-09-19 09:16:04 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='1.31486', `open`='1.31463', `high`='1.31754', `low`='1.31486', `close`='1.31483', `diff`='2.9999999999974E-5', `diff_rate`='0.00', `time`='2018-09-19 09:16:04' WHERE `name`='yb'
2018-09-19 09:16:04 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='0.72173', `open`='0.72238', `high`='0.72345', `low`='0.72173', `close`='0.72236', `diff`='-0.00063000000000002', `diff_rate`='-0.09', `time`='2018-09-19 09:16:04' WHERE `name`='ay'
2018-09-19 09:16:04 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-09-19 09:16:04 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-09-19 09:16:04 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-09-19 09:16:05 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-09-19 09:16:05 [trace][yii\base\Module::getModule] Loading module: gii
2018-09-19 09:16:05 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-09-19 09:16:05 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-09-19 09:16:05 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-09-19 09:16:05 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-09-19 09:16:05 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wjypay
2018-09-19 09:16:05 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-09-19 09:16:05 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-09-19 09:16:05 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_oil`
2018-09-19 09:16:05 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_oil' AND kcu.table_name = 'data_oil'
2018-09-19 09:16:06 [info][yii\db\Command::execute] INSERT INTO `data_oil` (`price`, `time`) VALUES ('69.71', '2018-09-19 09:15:41')
2018-09-19 09:16:06 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ic1609`
2018-09-19 09:16:06 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ic1609' AND kcu.table_name = 'data_ic1609'
2018-09-19 09:16:06 [info][yii\db\Command::execute] INSERT INTO `data_ic1609` (`price`, `time`) VALUES ('69.71', '2018-09-19 09:15:41')
2018-09-19 09:16:06 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_gc`
2018-09-19 09:16:06 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_gc' AND kcu.table_name = 'data_gc'
2018-09-19 09:16:06 [info][yii\db\Command::execute] INSERT INTO `data_gc` (`price`, `time`) VALUES ('1.16653', '2018-09-19 09:16:04')
2018-09-19 09:16:06 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_hkhsi`
2018-09-19 09:16:06 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_hkhsi' AND kcu.table_name = 'data_hkhsi'
2018-09-19 09:16:06 [info][yii\db\Command::execute] INSERT INTO `data_hkhsi` (`price`, `time`) VALUES ('27084.66', '2018-09-18 16:09:00')
2018-09-19 09:16:06 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ag`
2018-09-19 09:16:06 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ag' AND kcu.table_name = 'data_ag'
2018-09-19 09:16:06 [info][yii\db\Command::execute] INSERT INTO `data_ag` (`price`, `time`) VALUES ('14.195', '2018-09-19 09:15:24')
2018-09-19 09:16:06 [info][yii\db\Command::execute] INSERT INTO `data_hkhsi` (`price`, `time`) VALUES ('27084.66', '2018-09-18 16:09:00')
2018-09-19 09:16:06 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-09-19 09:16:06 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-09-19 09:16:06 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('1203.3', '2018-09-19 09:15:56')
2018-09-19 09:16:06 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_yb`
2018-09-19 09:16:06 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_yb' AND kcu.table_name = 'data_yb'
2018-09-19 09:16:06 [info][yii\db\Command::execute] INSERT INTO `data_yb` (`price`, `time`) VALUES ('1.31479', '2018-09-19 09:16:06')
2018-09-19 09:16:06 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ay`
2018-09-19 09:16:06 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ay' AND kcu.table_name = 'data_ay'
2018-09-19 09:16:06 [info][yii\db\Command::execute] INSERT INTO `data_ay` (`price`, `time`) VALUES ('0.72175', '2018-09-19 09:16:06')
2018-09-19 09:16:06 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_jy`
2018-09-19 09:16:06 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_jy' AND kcu.table_name = 'data_jy'
2018-09-19 09:16:06 [info][yii\db\Command::execute] INSERT INTO `data_jy` (`price`, `time`) VALUES ('0.7699', '2018-09-19 09:16:00')
2018-09-19 09:16:06 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-09-19 09:16:06 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-09-19 09:16:06 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='69.71', `open`='69.74', `high`='69.84', `low`='69.65', `close`='69.85', `diff`='-0.14', `diff_rate`='-0.2004', `time`='2018-09-19 09:15:41' WHERE `name`='ic1609'
2018-09-19 09:16:06 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='1.16653', `open`='1.16698', `high`='1.16824', `low`='1.16653', `close`='1.16698', `diff`='-0.00044999999999984', `diff_rate`='-0.04', `time`='2018-09-19 09:16:04' WHERE `name`='gc'
2018-09-19 09:16:06 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='1.31479', `open`='1.31463', `high`='1.31754', `low`='1.31479', `close`='1.31483', `diff`='-4.000000000004E-5', `diff_rate`='-0.00', `time`='2018-09-19 09:16:06' WHERE `name`='yb'
2018-09-19 09:16:06 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='0.72175', `open`='0.72238', `high`='0.72345', `low`='0.72175', `close`='0.72236', `diff`='-0.00061', `diff_rate`='-0.08', `time`='2018-09-19 09:16:06' WHERE `name`='ay'
2018-09-19 09:16:06 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-09-19 09:16:06 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-09-19 09:16:06 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-09-19 09:16:07 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-09-19 09:16:07 [trace][yii\base\Module::getModule] Loading module: gii
2018-09-19 09:16:07 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-09-19 09:16:07 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-09-19 09:16:07 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-09-19 09:16:07 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-09-19 09:16:07 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wjypay
2018-09-19 09:16:07 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-09-19 09:16:07 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-09-19 09:16:07 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_oil`
2018-09-19 09:16:07 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_oil' AND kcu.table_name = 'data_oil'
2018-09-19 09:16:07 [info][yii\db\Command::execute] INSERT INTO `data_oil` (`price`, `time`) VALUES ('69.71', '2018-09-19 09:15:41')
2018-09-19 09:16:07 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ic1609`
2018-09-19 09:16:07 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ic1609' AND kcu.table_name = 'data_ic1609'
2018-09-19 09:16:07 [info][yii\db\Command::execute] INSERT INTO `data_ic1609` (`price`, `time`) VALUES ('69.71', '2018-09-19 09:15:41')
2018-09-19 09:16:07 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_gc`
2018-09-19 09:16:07 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_gc' AND kcu.table_name = 'data_gc'
2018-09-19 09:16:07 [info][yii\db\Command::execute] INSERT INTO `data_gc` (`price`, `time`) VALUES ('1.16653', '2018-09-19 09:16:06')
2018-09-19 09:16:07 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_hkhsi`
2018-09-19 09:16:07 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_hkhsi' AND kcu.table_name = 'data_hkhsi'
2018-09-19 09:16:07 [info][yii\db\Command::execute] INSERT INTO `data_hkhsi` (`price`, `time`) VALUES ('27084.66', '2018-09-18 16:09:00')
2018-09-19 09:16:07 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ag`
2018-09-19 09:16:08 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ag' AND kcu.table_name = 'data_ag'
2018-09-19 09:16:08 [info][yii\db\Command::execute] INSERT INTO `data_ag` (`price`, `time`) VALUES ('14.195', '2018-09-19 09:15:24')
2018-09-19 09:16:08 [info][yii\db\Command::execute] INSERT INTO `data_hkhsi` (`price`, `time`) VALUES ('27084.66', '2018-09-18 16:09:00')
2018-09-19 09:16:08 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-09-19 09:16:08 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-09-19 09:16:08 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('1203.3', '2018-09-19 09:15:56')
2018-09-19 09:16:08 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_yb`
2018-09-19 09:16:08 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_yb' AND kcu.table_name = 'data_yb'
2018-09-19 09:16:08 [info][yii\db\Command::execute] INSERT INTO `data_yb` (`price`, `time`) VALUES ('1.31479', '2018-09-19 09:16:06')
2018-09-19 09:16:08 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ay`
2018-09-19 09:16:08 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ay' AND kcu.table_name = 'data_ay'
2018-09-19 09:16:08 [info][yii\db\Command::execute] INSERT INTO `data_ay` (`price`, `time`) VALUES ('0.72175', '2018-09-19 09:16:08')
2018-09-19 09:16:08 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_jy`
2018-09-19 09:16:08 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_jy' AND kcu.table_name = 'data_jy'
2018-09-19 09:16:08 [info][yii\db\Command::execute] INSERT INTO `data_jy` (`price`, `time`) VALUES ('0.7699', '2018-09-19 09:16:00')
2018-09-19 09:16:08 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-09-19 09:16:08 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-09-19 09:16:08 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='69.71', `open`='69.74', `high`='69.84', `low`='69.65', `close`='69.85', `diff`='-0.14', `diff_rate`='-0.2004', `time`='2018-09-19 09:15:41' WHERE `name`='ic1609'
2018-09-19 09:16:08 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='1.16653', `open`='1.16698', `high`='1.16824', `low`='1.16653', `close`='1.16698', `diff`='-0.00044999999999984', `diff_rate`='-0.04', `time`='2018-09-19 09:16:06' WHERE `name`='gc'
2018-09-19 09:16:08 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='0.72175', `open`='0.72238', `high`='0.72345', `low`='0.72175', `close`='0.72236', `diff`='-0.00061', `diff_rate`='-0.08', `time`='2018-09-19 09:16:08' WHERE `name`='ay'
2018-09-19 09:16:08 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-09-19 09:16:08 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-09-19 09:16:08 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-09-19 09:16:09 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-09-19 09:16:09 [trace][yii\base\Module::getModule] Loading module: gii
2018-09-19 09:16:09 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-09-19 09:16:09 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-09-19 09:16:09 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-09-19 09:16:09 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-09-19 09:16:09 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wjypay
2018-09-19 09:16:09 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-09-19 09:16:09 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-09-19 09:16:09 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_oil`
2018-09-19 09:16:09 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_oil' AND kcu.table_name = 'data_oil'
2018-09-19 09:16:09 [info][yii\db\Command::execute] INSERT INTO `data_oil` (`price`, `time`) VALUES ('69.71', '2018-09-19 09:15:41')
2018-09-19 09:16:09 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ic1609`
2018-09-19 09:16:09 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ic1609' AND kcu.table_name = 'data_ic1609'
2018-09-19 09:16:09 [info][yii\db\Command::execute] INSERT INTO `data_ic1609` (`price`, `time`) VALUES ('69.71', '2018-09-19 09:15:41')
2018-09-19 09:16:09 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_gc`
2018-09-19 09:16:09 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_gc' AND kcu.table_name = 'data_gc'
2018-09-19 09:16:10 [info][yii\db\Command::execute] INSERT INTO `data_gc` (`price`, `time`) VALUES ('1.1664', '2018-09-19 09:16:08')
2018-09-19 09:16:10 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_hkhsi`
2018-09-19 09:16:10 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_hkhsi' AND kcu.table_name = 'data_hkhsi'
2018-09-19 09:16:10 [info][yii\db\Command::execute] INSERT INTO `data_hkhsi` (`price`, `time`) VALUES ('27084.66', '2018-09-18 16:09:00')
2018-09-19 09:16:10 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ag`
2018-09-19 09:16:10 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ag' AND kcu.table_name = 'data_ag'
2018-09-19 09:16:10 [info][yii\db\Command::execute] INSERT INTO `data_ag` (`price`, `time`) VALUES ('14.195', '2018-09-19 09:15:24')
2018-09-19 09:16:10 [info][yii\db\Command::execute] INSERT INTO `data_hkhsi` (`price`, `time`) VALUES ('27084.66', '2018-09-18 16:09:00')
2018-09-19 09:16:10 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-09-19 09:16:10 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-09-19 09:16:10 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('1203.3', '2018-09-19 09:15:56')
2018-09-19 09:16:10 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_yb`
2018-09-19 09:16:10 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_yb' AND kcu.table_name = 'data_yb'
2018-09-19 09:16:10 [info][yii\db\Command::execute] INSERT INTO `data_yb` (`price`, `time`) VALUES ('1.31485', '2018-09-19 09:16:10')
2018-09-19 09:16:10 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ay`
2018-09-19 09:16:10 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ay' AND kcu.table_name = 'data_ay'
2018-09-19 09:16:10 [info][yii\db\Command::execute] INSERT INTO `data_ay` (`price`, `time`) VALUES ('0.72177', '2018-09-19 09:16:10')
2018-09-19 09:16:10 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_jy`
2018-09-19 09:16:10 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_jy' AND kcu.table_name = 'data_jy'
2018-09-19 09:16:10 [info][yii\db\Command::execute] INSERT INTO `data_jy` (`price`, `time`) VALUES ('0.7699', '2018-09-19 09:16:00')
2018-09-19 09:16:10 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-09-19 09:16:10 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-09-19 09:16:10 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='69.71', `open`='69.74', `high`='69.84', `low`='69.65', `close`='69.85', `diff`='-0.14', `diff_rate`='-0.2004', `time`='2018-09-19 09:15:41' WHERE `name`='ic1609'
2018-09-19 09:16:10 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='1.1664', `open`='1.16698', `high`='1.16824', `low`='1.1664', `close`='1.16698', `diff`='-0.0005799999999998', `diff_rate`='-0.05', `time`='2018-09-19 09:16:08' WHERE `name`='gc'
2018-09-19 09:16:10 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='1.31485', `open`='1.31463', `high`='1.31754', `low`='1.31485', `close`='1.31483', `diff`='2.0000000000131E-5', `diff_rate`='0.00', `time`='2018-09-19 09:16:10' WHERE `name`='yb'
2018-09-19 09:16:11 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='0.72177', `open`='0.72238', `high`='0.72345', `low`='0.72177', `close`='0.72236', `diff`='-0.00058999999999998', `diff_rate`='-0.08', `time`='2018-09-19 09:16:10' WHERE `name`='ay'
2018-09-19 09:16:11 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-09-19 09:16:11 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-09-19 09:16:11 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-09-19 09:16:12 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-09-19 09:16:12 [trace][yii\base\Module::getModule] Loading module: gii
2018-09-19 09:16:12 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-09-19 09:16:12 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-09-19 09:16:12 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-09-19 09:16:12 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-09-19 09:16:12 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wjypay
2018-09-19 09:16:12 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-09-19 09:16:12 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-09-19 09:16:12 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_oil`
2018-09-19 09:16:12 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_oil' AND kcu.table_name = 'data_oil'
2018-09-19 09:16:12 [info][yii\db\Command::execute] INSERT INTO `data_oil` (`price`, `time`) VALUES ('69.71', '2018-09-19 09:15:41')
2018-09-19 09:16:12 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ic1609`
2018-09-19 09:16:12 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ic1609' AND kcu.table_name = 'data_ic1609'
2018-09-19 09:16:12 [info][yii\db\Command::execute] INSERT INTO `data_ic1609` (`price`, `time`) VALUES ('69.71', '2018-09-19 09:15:41')
2018-09-19 09:16:12 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_gc`
2018-09-19 09:16:12 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_gc' AND kcu.table_name = 'data_gc'
2018-09-19 09:16:12 [info][yii\db\Command::execute] INSERT INTO `data_gc` (`price`, `time`) VALUES ('1.1665', '2018-09-19 09:16:11')
2018-09-19 09:16:12 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_hkhsi`
2018-09-19 09:16:12 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_hkhsi' AND kcu.table_name = 'data_hkhsi'
2018-09-19 09:16:12 [info][yii\db\Command::execute] INSERT INTO `data_hkhsi` (`price`, `time`) VALUES ('27084.66', '2018-09-18 16:09:00')
2018-09-19 09:16:12 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ag`
2018-09-19 09:16:12 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ag' AND kcu.table_name = 'data_ag'
2018-09-19 09:16:12 [info][yii\db\Command::execute] INSERT INTO `data_ag` (`price`, `time`) VALUES ('14.187', '2018-09-19 09:15:24')
2018-09-19 09:16:12 [info][yii\db\Command::execute] INSERT INTO `data_hkhsi` (`price`, `time`) VALUES ('27084.66', '2018-09-18 16:09:00')
2018-09-19 09:16:12 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-09-19 09:16:12 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-09-19 09:16:12 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('1203.2', '2018-09-19 09:16:11')
2018-09-19 09:16:12 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_yb`
2018-09-19 09:16:12 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_yb' AND kcu.table_name = 'data_yb'
2018-09-19 09:16:13 [info][yii\db\Command::execute] INSERT INTO `data_yb` (`price`, `time`) VALUES ('1.31485', '2018-09-19 09:16:11')
2018-09-19 09:16:13 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ay`
2018-09-19 09:16:13 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ay' AND kcu.table_name = 'data_ay'
2018-09-19 09:16:13 [info][yii\db\Command::execute] INSERT INTO `data_ay` (`price`, `time`) VALUES ('0.72175', '2018-09-19 09:16:12')
2018-09-19 09:16:13 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_jy`
2018-09-19 09:16:13 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_jy' AND kcu.table_name = 'data_jy'
2018-09-19 09:16:13 [info][yii\db\Command::execute] INSERT INTO `data_jy` (`price`, `time`) VALUES ('0.7699', '2018-09-19 09:16:00')
2018-09-19 09:16:13 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-09-19 09:16:13 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-09-19 09:16:13 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='69.71', `open`='69.74', `high`='69.84', `low`='69.65', `close`='69.85', `diff`='-0.14', `diff_rate`='-0.2004', `time`='2018-09-19 09:15:41' WHERE `name`='ic1609'
2018-09-19 09:16:13 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='1.1665', `open`='1.16698', `high`='1.16824', `low`='1.1665', `close`='1.16698', `diff`='-0.00047999999999981', `diff_rate`='-0.04', `time`='2018-09-19 09:16:11' WHERE `name`='gc'
2018-09-19 09:16:13 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='1203.2', `open`='1202.6', `high`='1204.5', `low`='1202.2', `close`='1202.9', `diff`='0.29999999999995', `diff_rate`='0.0249', `time`='2018-09-19 09:16:11' WHERE `name`='xau'
2018-09-19 09:16:13 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='1.31485', `open`='1.31463', `high`='1.31754', `low`='1.31485', `close`='1.31483', `diff`='2.0000000000131E-5', `diff_rate`='0.00', `time`='2018-09-19 09:16:11' WHERE `name`='yb'
2018-09-19 09:16:13 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='0.72175', `open`='0.72238', `high`='0.72345', `low`='0.72175', `close`='0.72236', `diff`='-0.00061', `diff_rate`='-0.08', `time`='2018-09-19 09:16:12' WHERE `name`='ay'
2018-09-19 09:16:13 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-09-19 09:16:13 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-09-19 09:16:13 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-09-19 09:16:14 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-09-19 09:16:14 [trace][yii\base\Module::getModule] Loading module: gii
2018-09-19 09:16:14 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-09-19 09:16:14 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-09-19 09:16:14 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-09-19 09:16:14 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-09-19 09:16:14 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wjypay
2018-09-19 09:16:14 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-09-19 09:16:14 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-09-19 09:16:14 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_oil`
2018-09-19 09:16:14 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_oil' AND kcu.table_name = 'data_oil'
2018-09-19 09:16:14 [info][yii\db\Command::execute] INSERT INTO `data_oil` (`price`, `time`) VALUES ('69.71', '2018-09-19 09:15:41')
2018-09-19 09:16:14 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ic1609`
2018-09-19 09:16:14 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ic1609' AND kcu.table_name = 'data_ic1609'
2018-09-19 09:16:14 [info][yii\db\Command::execute] INSERT INTO `data_ic1609` (`price`, `time`) VALUES ('69.71', '2018-09-19 09:15:41')
2018-09-19 09:16:14 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_gc`
2018-09-19 09:16:14 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_gc' AND kcu.table_name = 'data_gc'
2018-09-19 09:16:14 [info][yii\db\Command::execute] INSERT INTO `data_gc` (`price`, `time`) VALUES ('1.16653', '2018-09-19 09:16:14')
2018-09-19 09:16:14 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_hkhsi`
2018-09-19 09:16:14 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_hkhsi' AND kcu.table_name = 'data_hkhsi'
2018-09-19 09:16:14 [info][yii\db\Command::execute] INSERT INTO `data_hkhsi` (`price`, `time`) VALUES ('27084.66', '2018-09-18 16:09:00')
2018-09-19 09:16:14 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ag`
2018-09-19 09:16:14 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ag' AND kcu.table_name = 'data_ag'
2018-09-19 09:16:14 [info][yii\db\Command::execute] INSERT INTO `data_ag` (`price`, `time`) VALUES ('14.187', '2018-09-19 09:15:24')
2018-09-19 09:16:14 [info][yii\db\Command::execute] INSERT INTO `data_hkhsi` (`price`, `time`) VALUES ('27084.66', '2018-09-18 16:09:00')
2018-09-19 09:16:14 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-09-19 09:16:14 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-09-19 09:16:15 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('1203.2', '2018-09-19 09:16:11')
2018-09-19 09:16:15 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_yb`
2018-09-19 09:16:15 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_yb' AND kcu.table_name = 'data_yb'
2018-09-19 09:16:15 [info][yii\db\Command::execute] INSERT INTO `data_yb` (`price`, `time`) VALUES ('1.31485', '2018-09-19 09:16:12')
2018-09-19 09:16:15 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ay`
2018-09-19 09:16:15 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ay' AND kcu.table_name = 'data_ay'
2018-09-19 09:16:15 [info][yii\db\Command::execute] INSERT INTO `data_ay` (`price`, `time`) VALUES ('0.72175', '2018-09-19 09:16:14')
2018-09-19 09:16:15 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_jy`
2018-09-19 09:16:15 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_jy' AND kcu.table_name = 'data_jy'
2018-09-19 09:16:15 [info][yii\db\Command::execute] INSERT INTO `data_jy` (`price`, `time`) VALUES ('0.7699', '2018-09-19 09:16:00')
2018-09-19 09:16:15 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-09-19 09:16:15 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-09-19 09:16:15 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='69.71', `open`='69.74', `high`='69.84', `low`='69.65', `close`='69.85', `diff`='-0.14', `diff_rate`='-0.2004', `time`='2018-09-19 09:15:41' WHERE `name`='ic1609'
2018-09-19 09:16:15 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='1.16653', `open`='1.16698', `high`='1.16824', `low`='1.16653', `close`='1.16698', `diff`='-0.00044999999999984', `diff_rate`='-0.04', `time`='2018-09-19 09:16:14' WHERE `name`='gc'
2018-09-19 09:16:15 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='1.31485', `open`='1.31463', `high`='1.31754', `low`='1.31485', `close`='1.31483', `diff`='2.0000000000131E-5', `diff_rate`='0.00', `time`='2018-09-19 09:16:12' WHERE `name`='yb'
2018-09-19 09:16:15 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='0.72175', `open`='0.72238', `high`='0.72345', `low`='0.72175', `close`='0.72236', `diff`='-0.00061', `diff_rate`='-0.08', `time`='2018-09-19 09:16:14' WHERE `name`='ay'
2018-09-19 09:16:15 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-09-19 09:16:15 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-09-19 09:16:15 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-09-19 09:16:16 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-09-19 09:16:16 [trace][yii\base\Module::getModule] Loading module: gii
2018-09-19 09:16:16 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-09-19 09:16:16 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-09-19 09:16:16 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-09-19 09:16:16 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-09-19 09:16:16 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wjypay
2018-09-19 09:16:16 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-09-19 09:16:16 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-09-19 09:16:16 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_oil`
2018-09-19 09:16:16 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_oil' AND kcu.table_name = 'data_oil'
2018-09-19 09:16:16 [info][yii\db\Command::execute] INSERT INTO `data_oil` (`price`, `time`) VALUES ('69.71', '2018-09-19 09:15:41')
2018-09-19 09:16:16 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ic1609`
2018-09-19 09:16:16 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ic1609' AND kcu.table_name = 'data_ic1609'
2018-09-19 09:16:16 [info][yii\db\Command::execute] INSERT INTO `data_ic1609` (`price`, `time`) VALUES ('69.71', '2018-09-19 09:15:41')
2018-09-19 09:16:16 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_gc`
2018-09-19 09:16:16 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_gc' AND kcu.table_name = 'data_gc'
2018-09-19 09:16:16 [info][yii\db\Command::execute] INSERT INTO `data_gc` (`price`, `time`) VALUES ('1.16653', '2018-09-19 09:16:16')
2018-09-19 09:16:16 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_hkhsi`
2018-09-19 09:16:16 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_hkhsi' AND kcu.table_name = 'data_hkhsi'
2018-09-19 09:16:16 [info][yii\db\Command::execute] INSERT INTO `data_hkhsi` (`price`, `time`) VALUES ('27084.66', '2018-09-18 16:09:00')
2018-09-19 09:16:16 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ag`
2018-09-19 09:16:16 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ag' AND kcu.table_name = 'data_ag'
2018-09-19 09:16:16 [info][yii\db\Command::execute] INSERT INTO `data_ag` (`price`, `time`) VALUES ('14.187', '2018-09-19 09:15:24')
2018-09-19 09:16:16 [info][yii\db\Command::execute] INSERT INTO `data_hkhsi` (`price`, `time`) VALUES ('27084.66', '2018-09-18 16:09:00')
2018-09-19 09:16:16 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-09-19 09:16:16 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-09-19 09:16:16 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('1203.2', '2018-09-19 09:16:11')
2018-09-19 09:16:17 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_yb`
2018-09-19 09:16:17 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_yb' AND kcu.table_name = 'data_yb'
2018-09-19 09:16:17 [info][yii\db\Command::execute] INSERT INTO `data_yb` (`price`, `time`) VALUES ('1.31485', '2018-09-19 09:16:16')
2018-09-19 09:16:17 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ay`
2018-09-19 09:16:17 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ay' AND kcu.table_name = 'data_ay'
2018-09-19 09:16:17 [info][yii\db\Command::execute] INSERT INTO `data_ay` (`price`, `time`) VALUES ('0.72175', '2018-09-19 09:16:16')
2018-09-19 09:16:17 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_jy`
2018-09-19 09:16:17 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_jy' AND kcu.table_name = 'data_jy'
2018-09-19 09:16:17 [info][yii\db\Command::execute] INSERT INTO `data_jy` (`price`, `time`) VALUES ('0.7699', '2018-09-19 09:16:00')
2018-09-19 09:16:17 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-09-19 09:16:17 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-09-19 09:16:17 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='69.71', `open`='69.74', `high`='69.84', `low`='69.65', `close`='69.85', `diff`='-0.14', `diff_rate`='-0.2004', `time`='2018-09-19 09:15:41' WHERE `name`='ic1609'
2018-09-19 09:16:17 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='1.16653', `open`='1.16698', `high`='1.16824', `low`='1.16653', `close`='1.16698', `diff`='-0.00044999999999984', `diff_rate`='-0.04', `time`='2018-09-19 09:16:16' WHERE `name`='gc'
2018-09-19 09:16:17 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='1.31485', `open`='1.31463', `high`='1.31754', `low`='1.31485', `close`='1.31483', `diff`='2.0000000000131E-5', `diff_rate`='0.00', `time`='2018-09-19 09:16:16' WHERE `name`='yb'
2018-09-19 09:16:17 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='0.72175', `open`='0.72238', `high`='0.72345', `low`='0.72175', `close`='0.72236', `diff`='-0.00061', `diff_rate`='-0.08', `time`='2018-09-19 09:16:16' WHERE `name`='ay'
2018-09-19 09:16:17 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-09-19 09:16:17 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-09-19 09:16:17 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-09-19 09:16:18 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-09-19 09:16:18 [trace][yii\base\Module::getModule] Loading module: gii
2018-09-19 09:16:18 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-09-19 09:16:18 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-09-19 09:16:18 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-09-19 09:16:18 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-09-19 09:16:18 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wjypay
2018-09-19 09:16:18 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-09-19 09:16:18 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-09-19 09:16:18 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_oil`
2018-09-19 09:16:18 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_oil' AND kcu.table_name = 'data_oil'
2018-09-19 09:16:18 [info][yii\db\Command::execute] INSERT INTO `data_oil` (`price`, `time`) VALUES ('69.71', '2018-09-19 09:15:41')
2018-09-19 09:16:18 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ic1609`
2018-09-19 09:16:18 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ic1609' AND kcu.table_name = 'data_ic1609'
2018-09-19 09:16:18 [info][yii\db\Command::execute] INSERT INTO `data_ic1609` (`price`, `time`) VALUES ('69.71', '2018-09-19 09:15:41')
2018-09-19 09:16:18 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_gc`
2018-09-19 09:16:18 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_gc' AND kcu.table_name = 'data_gc'
2018-09-19 09:16:18 [info][yii\db\Command::execute] INSERT INTO `data_gc` (`price`, `time`) VALUES ('1.16653', '2018-09-19 09:16:17')
2018-09-19 09:16:18 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_hkhsi`
2018-09-19 09:16:18 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_hkhsi' AND kcu.table_name = 'data_hkhsi'
2018-09-19 09:16:18 [info][yii\db\Command::execute] INSERT INTO `data_hkhsi` (`price`, `time`) VALUES ('27084.66', '2018-09-18 16:09:00')
2018-09-19 09:16:18 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ag`
2018-09-19 09:16:18 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ag' AND kcu.table_name = 'data_ag'
2018-09-19 09:16:19 [info][yii\db\Command::execute] INSERT INTO `data_ag` (`price`, `time`) VALUES ('14.187', '2018-09-19 09:15:24')
2018-09-19 09:16:20 [info][yii\db\Command::execute] INSERT INTO `data_hkhsi` (`price`, `time`) VALUES ('27084.66', '2018-09-18 16:09:00')
2018-09-19 09:16:20 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-09-19 09:16:20 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-09-19 09:16:20 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('1203.2', '2018-09-19 09:16:11')
2018-09-19 09:16:20 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_yb`
2018-09-19 09:16:20 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_yb' AND kcu.table_name = 'data_yb'
2018-09-19 09:16:20 [info][yii\db\Command::execute] INSERT INTO `data_yb` (`price`, `time`) VALUES ('1.31486', '2018-09-19 09:16:20')
2018-09-19 09:16:20 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ay`
2018-09-19 09:16:20 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ay' AND kcu.table_name = 'data_ay'
2018-09-19 09:16:20 [info][yii\db\Command::execute] INSERT INTO `data_ay` (`price`, `time`) VALUES ('0.72175', '2018-09-19 09:16:20')
2018-09-19 09:16:20 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_jy`
2018-09-19 09:16:20 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_jy' AND kcu.table_name = 'data_jy'
2018-09-19 09:16:20 [info][yii\db\Command::execute] INSERT INTO `data_jy` (`price`, `time`) VALUES ('0.7699', '2018-09-19 09:16:00')
2018-09-19 09:16:20 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-09-19 09:16:20 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-09-19 09:16:20 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='69.71', `open`='69.74', `high`='69.84', `low`='69.65', `close`='69.85', `diff`='-0.14', `diff_rate`='-0.2004', `time`='2018-09-19 09:15:41' WHERE `name`='ic1609'
2018-09-19 09:16:20 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='1.16653', `open`='1.16698', `high`='1.16824', `low`='1.16653', `close`='1.16698', `diff`='-0.00044999999999984', `diff_rate`='-0.04', `time`='2018-09-19 09:16:17' WHERE `name`='gc'
2018-09-19 09:16:20 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='1.31486', `open`='1.31463', `high`='1.31754', `low`='1.31486', `close`='1.31483', `diff`='2.9999999999974E-5', `diff_rate`='0.00', `time`='2018-09-19 09:16:20' WHERE `name`='yb'
2018-09-19 09:16:20 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='0.72175', `open`='0.72238', `high`='0.72345', `low`='0.72175', `close`='0.72236', `diff`='-0.00061', `diff_rate`='-0.08', `time`='2018-09-19 09:16:20' WHERE `name`='ay'
2018-09-19 09:16:20 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-09-19 09:16:20 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-09-19 09:16:20 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-09-19 09:16:21 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-09-19 09:16:21 [trace][yii\base\Module::getModule] Loading module: gii
2018-09-19 09:16:21 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-09-19 09:16:21 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-09-19 09:16:21 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-09-19 09:16:21 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-09-19 09:16:21 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wjypay
2018-09-19 09:16:21 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-09-19 09:16:21 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-09-19 09:16:21 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_oil`
2018-09-19 09:16:21 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_oil' AND kcu.table_name = 'data_oil'
2018-09-19 09:16:22 [info][yii\db\Command::execute] INSERT INTO `data_oil` (`price`, `time`) VALUES ('69.71', '2018-09-19 09:15:41')
2018-09-19 09:16:22 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ic1609`
2018-09-19 09:16:22 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ic1609' AND kcu.table_name = 'data_ic1609'
2018-09-19 09:16:22 [info][yii\db\Command::execute] INSERT INTO `data_ic1609` (`price`, `time`) VALUES ('69.71', '2018-09-19 09:15:41')
2018-09-19 09:16:23 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_gc`
2018-09-19 09:16:23 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_gc' AND kcu.table_name = 'data_gc'
2018-09-19 09:16:24 [info][yii\db\Command::execute] INSERT INTO `data_gc` (`price`, `time`) VALUES ('1.16653', '2018-09-19 09:16:22')
2018-09-19 09:16:24 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_hkhsi`
2018-09-19 09:16:24 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_hkhsi' AND kcu.table_name = 'data_hkhsi'
2018-09-19 09:16:24 [info][yii\db\Command::execute] INSERT INTO `data_hkhsi` (`price`, `time`) VALUES ('27084.66', '2018-09-18 16:09:00')
2018-09-19 09:16:24 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ag`
2018-09-19 09:16:24 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ag' AND kcu.table_name = 'data_ag'
2018-09-19 09:16:25 [info][yii\db\Command::execute] INSERT INTO `data_ag` (`price`, `time`) VALUES ('14.194', '2018-09-19 09:15:24')
2018-09-19 09:16:25 [info][yii\db\Command::execute] INSERT INTO `data_hkhsi` (`price`, `time`) VALUES ('27084.66', '2018-09-18 16:09:00')
2018-09-19 09:16:26 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-09-19 09:16:26 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-09-19 09:16:27 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('1203.2', '2018-09-19 09:16:11')
2018-09-19 09:16:27 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_yb`
2018-09-19 09:16:27 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_yb' AND kcu.table_name = 'data_yb'
2018-09-19 09:16:27 [info][yii\db\Command::execute] INSERT INTO `data_yb` (`price`, `time`) VALUES ('1.31484', '2018-09-19 09:16:26')
2018-09-19 09:16:27 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ay`
2018-09-19 09:16:27 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ay' AND kcu.table_name = 'data_ay'
2018-09-19 09:16:27 [info][yii\db\Command::execute] INSERT INTO `data_ay` (`price`, `time`) VALUES ('0.72176', '2018-09-19 09:16:26')
2018-09-19 09:16:27 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_jy`
2018-09-19 09:16:27 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_jy' AND kcu.table_name = 'data_jy'
2018-09-19 09:16:27 [info][yii\db\Command::execute] INSERT INTO `data_jy` (`price`, `time`) VALUES ('0.7699', '2018-09-19 09:16:00')
2018-09-19 09:16:27 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-09-19 09:16:27 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-09-19 09:16:27 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='69.71', `open`='69.74', `high`='69.84', `low`='69.65', `close`='69.85', `diff`='-0.14', `diff_rate`='-0.2004', `time`='2018-09-19 09:15:41' WHERE `name`='ic1609'
2018-09-19 09:16:27 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='1.16653', `open`='1.16698', `high`='1.16824', `low`='1.16653', `close`='1.16698', `diff`='-0.00044999999999984', `diff_rate`='-0.04', `time`='2018-09-19 09:16:22' WHERE `name`='gc'
2018-09-19 09:16:27 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='1.31484', `open`='1.31463', `high`='1.31754', `low`='1.31484', `close`='1.31483', `diff`='1.0000000000066E-5', `diff_rate`='0.00', `time`='2018-09-19 09:16:26' WHERE `name`='yb'
2018-09-19 09:16:27 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='0.72176', `open`='0.72238', `high`='0.72345', `low`='0.72176', `close`='0.72236', `diff`='-0.00060000000000004', `diff_rate`='-0.08', `time`='2018-09-19 09:16:26' WHERE `name`='ay'
2018-09-19 09:16:27 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-09-19 09:16:27 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-09-19 09:16:27 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-09-19 09:16:28 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-09-19 09:16:28 [trace][yii\base\Module::getModule] Loading module: gii
2018-09-19 09:16:28 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-09-19 09:16:28 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-09-19 09:16:28 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-09-19 09:16:28 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-09-19 09:16:28 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wjypay
2018-09-19 09:16:28 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-09-19 09:16:28 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-09-19 09:16:28 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_oil`
2018-09-19 09:16:28 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_oil' AND kcu.table_name = 'data_oil'
2018-09-19 09:16:29 [info][yii\db\Command::execute] INSERT INTO `data_oil` (`price`, `time`) VALUES ('69.71', '2018-09-19 09:15:41')
2018-09-19 09:16:29 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ic1609`
2018-09-19 09:16:29 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ic1609' AND kcu.table_name = 'data_ic1609'
2018-09-19 09:16:29 [info][yii\db\Command::execute] INSERT INTO `data_ic1609` (`price`, `time`) VALUES ('69.71', '2018-09-19 09:15:41')
2018-09-19 09:16:29 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_gc`
2018-09-19 09:16:29 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_gc' AND kcu.table_name = 'data_gc'
2018-09-19 09:16:29 [info][yii\db\Command::execute] INSERT INTO `data_gc` (`price`, `time`) VALUES ('1.16654', '2018-09-19 09:16:28')
2018-09-19 09:16:29 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_hkhsi`
2018-09-19 09:16:29 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_hkhsi' AND kcu.table_name = 'data_hkhsi'
2018-09-19 09:16:29 [info][yii\db\Command::execute] INSERT INTO `data_hkhsi` (`price`, `time`) VALUES ('27084.66', '2018-09-18 16:09:00')
2018-09-19 09:16:29 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ag`
2018-09-19 09:16:29 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ag' AND kcu.table_name = 'data_ag'
2018-09-19 09:16:29 [info][yii\db\Command::execute] INSERT INTO `data_ag` (`price`, `time`) VALUES ('14.191', '2018-09-19 09:15:24')
2018-09-19 09:16:29 [info][yii\db\Command::execute] INSERT INTO `data_hkhsi` (`price`, `time`) VALUES ('27084.66', '2018-09-18 16:09:00')
2018-09-19 09:16:29 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-09-19 09:16:29 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-09-19 09:16:29 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('1203.2', '2018-09-19 09:16:11')
2018-09-19 09:16:29 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_yb`
2018-09-19 09:16:29 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_yb' AND kcu.table_name = 'data_yb'
2018-09-19 09:16:29 [info][yii\db\Command::execute] INSERT INTO `data_yb` (`price`, `time`) VALUES ('1.31484', '2018-09-19 09:16:28')
2018-09-19 09:16:29 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ay`
2018-09-19 09:16:29 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ay' AND kcu.table_name = 'data_ay'
2018-09-19 09:16:29 [info][yii\db\Command::execute] INSERT INTO `data_ay` (`price`, `time`) VALUES ('0.72175', '2018-09-19 09:16:28')
2018-09-19 09:16:30 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_jy`
2018-09-19 09:16:30 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_jy' AND kcu.table_name = 'data_jy'
2018-09-19 09:16:31 [info][yii\db\Command::execute] INSERT INTO `data_jy` (`price`, `time`) VALUES ('0.7703', '2018-09-19 09:16:26')
2018-09-19 09:16:31 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-09-19 09:16:31 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-09-19 09:16:31 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='69.71', `open`='69.74', `high`='69.84', `low`='69.65', `close`='69.85', `diff`='-0.14', `diff_rate`='-0.2004', `time`='2018-09-19 09:15:41' WHERE `name`='ic1609'
2018-09-19 09:16:31 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='1.16654', `open`='1.16698', `high`='1.16824', `low`='1.16654', `close`='1.16698', `diff`='-0.00044', `diff_rate`='-0.04', `time`='2018-09-19 09:16:28' WHERE `name`='gc'
2018-09-19 09:16:31 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='1.31484', `open`='1.31463', `high`='1.31754', `low`='1.31484', `close`='1.31483', `diff`='1.0000000000066E-5', `diff_rate`='0.00', `time`='2018-09-19 09:16:28' WHERE `name`='yb'
2018-09-19 09:16:31 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='0.72175', `open`='0.72238', `high`='0.72345', `low`='0.72175', `close`='0.72236', `diff`='-0.00061', `diff_rate`='-0.08', `time`='2018-09-19 09:16:28' WHERE `name`='ay'
2018-09-19 09:16:31 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='0.7703', `open`='0.7699', `high`='0.7709', `low`='0.7703', `close`='0.7699', `diff`='0.00039999999999996', `diff_rate`='0.05', `time`='2018-09-19 09:16:26' WHERE `name`='jy'
2018-09-19 09:16:31 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-09-19 09:16:31 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-09-19 09:16:31 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-09-19 09:16:32 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-09-19 09:16:32 [trace][yii\base\Module::getModule] Loading module: gii
2018-09-19 09:16:32 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-09-19 09:16:32 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-09-19 09:16:32 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-09-19 09:16:32 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-09-19 09:16:32 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wjypay
2018-09-19 09:16:32 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-09-19 09:16:32 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-09-19 09:16:32 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_oil`
2018-09-19 09:16:32 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_oil' AND kcu.table_name = 'data_oil'
2018-09-19 09:16:33 [info][yii\db\Command::execute] INSERT INTO `data_oil` (`price`, `time`) VALUES ('69.71', '2018-09-19 09:15:41')
2018-09-19 09:16:33 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ic1609`
2018-09-19 09:16:33 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ic1609' AND kcu.table_name = 'data_ic1609'
2018-09-19 09:16:33 [info][yii\db\Command::execute] INSERT INTO `data_ic1609` (`price`, `time`) VALUES ('69.71', '2018-09-19 09:15:41')
2018-09-19 09:16:33 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_gc`
2018-09-19 09:16:33 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_gc' AND kcu.table_name = 'data_gc'
2018-09-19 09:16:33 [info][yii\db\Command::execute] INSERT INTO `data_gc` (`price`, `time`) VALUES ('1.16657', '2018-09-19 09:16:32')
2018-09-19 09:16:33 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_hkhsi`
2018-09-19 09:16:33 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_hkhsi' AND kcu.table_name = 'data_hkhsi'
2018-09-19 09:16:33 [info][yii\db\Command::execute] INSERT INTO `data_hkhsi` (`price`, `time`) VALUES ('27084.66', '2018-09-18 16:09:00')
2018-09-19 09:16:33 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ag`
2018-09-19 09:16:33 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ag' AND kcu.table_name = 'data_ag'
2018-09-19 09:16:33 [info][yii\db\Command::execute] INSERT INTO `data_ag` (`price`, `time`) VALUES ('14.189', '2018-09-19 09:15:24')
2018-09-19 09:16:33 [info][yii\db\Command::execute] INSERT INTO `data_hkhsi` (`price`, `time`) VALUES ('27084.66', '2018-09-18 16:09:00')
2018-09-19 09:16:33 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_xau`
2018-09-19 09:16:33 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_xau' AND kcu.table_name = 'data_xau'
2018-09-19 09:16:33 [info][yii\db\Command::execute] INSERT INTO `data_xau` (`price`, `time`) VALUES ('1203.2', '2018-09-19 09:16:34')
2018-09-19 09:16:33 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_yb`
2018-09-19 09:16:33 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_yb' AND kcu.table_name = 'data_yb'
2018-09-19 09:16:33 [info][yii\db\Command::execute] INSERT INTO `data_yb` (`price`, `time`) VALUES ('1.31485', '2018-09-19 09:16:32')
2018-09-19 09:16:33 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_ay`
2018-09-19 09:16:33 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_ay' AND kcu.table_name = 'data_ay'
2018-09-19 09:16:33 [info][yii\db\Command::execute] INSERT INTO `data_ay` (`price`, `time`) VALUES ('0.72173', '2018-09-19 09:16:32')
2018-09-19 09:16:33 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_jy`
2018-09-19 09:16:33 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_jy' AND kcu.table_name = 'data_jy'
2018-09-19 09:16:33 [info][yii\db\Command::execute] INSERT INTO `data_jy` (`price`, `time`) VALUES ('0.7703', '2018-09-19 09:16:26')
2018-09-19 09:16:33 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-09-19 09:16:33 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-09-19 09:16:33 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='69.71', `open`='69.74', `high`='69.84', `low`='69.65', `close`='69.85', `diff`='-0.14', `diff_rate`='-0.2004', `time`='2018-09-19 09:15:41' WHERE `name`='ic1609'
2018-09-19 09:16:34 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='1.16657', `open`='1.16698', `high`='1.16824', `low`='1.16657', `close`='1.16698', `diff`='-0.0004099999999998', `diff_rate`='-0.04', `time`='2018-09-19 09:16:32' WHERE `name`='gc'
2018-09-19 09:16:34 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='1203.2', `open`='1202.6', `high`='1204.5', `low`='1202.2', `close`='1202.9', `diff`='0.29999999999995', `diff_rate`='0.0249', `time`='2018-09-19 09:16:34' WHERE `name`='xau'
2018-09-19 09:16:34 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='1.31485', `open`='1.31463', `high`='1.31754', `low`='1.31485', `close`='1.31483', `diff`='2.0000000000131E-5', `diff_rate`='0.00', `time`='2018-09-19 09:16:32' WHERE `name`='yb'
2018-09-19 09:16:35 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='0.72173', `open`='0.72238', `high`='0.72345', `low`='0.72173', `close`='0.72236', `diff`='-0.00063000000000002', `diff_rate`='-0.09', `time`='2018-09-19 09:16:32' WHERE `name`='ay'
2018-09-19 09:16:35 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-09-19 09:16:35 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-09-19 09:16:35 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-09-19 09:16:36 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-09-19 09:16:36 [trace][yii\base\Module::getModule] Loading module: gii
2018-09-19 09:16:36 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-09-19 09:16:36 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-09-19 09:16:36 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-09-19 09:16:36 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-09-19 09:16:36 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wjypay
2018-09-19 09:16:36 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-09-19 09:16:36 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-09-19 09:16:36 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_oil`
2018-09-19 09:16:36 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_oil' AND kcu.table_name = 'data_oil'
