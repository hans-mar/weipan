2018-04-01 04:36:24 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:36:24 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:36:24 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:36:24 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:36:24 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:36:24 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:36:24 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:36:25 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:36:25 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:36:26 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:36:26 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:36:26 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6911.54', '2018-04-01 04:36:18')
2018-04-01 04:36:26 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:36:26 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:36:26 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6911.54', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6911.54', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:36:18' WHERE `name`='btbi'
2018-04-01 04:36:26 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:36:26 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:36:26 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:36:26 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:36:26 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:36:26 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:36:26 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:36:26 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:36:26 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:36:26 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:36:26 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:36:26 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:36:26 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:36:26 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:36:26 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:36:28 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:36:28 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:36:28 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:36:28 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:36:28 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:36:28 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:36:28 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:36:28 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:36:28 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:36:29 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:36:29 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:36:29 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6911.96', '2018-04-01 04:36:21')
2018-04-01 04:36:30 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:36:30 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:36:30 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6911.96', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6911.96', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:36:21' WHERE `name`='btbi'
2018-04-01 04:36:30 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:36:30 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:36:30 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:36:30 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:36:30 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:36:30 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:36:30 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:36:30 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:36:30 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:36:30 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:36:30 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:36:30 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:36:30 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:36:30 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:36:30 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:36:31 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:36:31 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:36:31 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:36:31 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:36:31 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:36:31 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:36:31 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:36:31 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:36:31 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:36:33 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:36:33 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:36:33 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6912.10', '2018-04-01 04:36:25')
2018-04-01 04:36:33 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:36:33 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:36:33 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6912.10', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6912.10', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:36:25' WHERE `name`='btbi'
2018-04-01 04:36:33 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:36:33 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:36:33 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:36:33 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:36:33 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:36:33 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:36:33 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:36:33 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:36:33 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:36:33 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:36:33 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:36:33 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:36:33 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:36:33 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:36:33 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:36:35 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:36:35 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:36:35 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:36:35 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:36:35 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:36:35 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:36:35 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:36:35 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:36:35 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:36:36 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:36:36 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:36:36 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6903.41', '2018-04-01 04:36:27')
2018-04-01 04:36:36 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:36:36 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:36:36 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6903.41', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6903.41', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:36:27' WHERE `name`='btbi'
2018-04-01 04:36:36 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:36:36 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:36:36 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:36:36 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:36:37 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:36:37 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:36:37 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:36:37 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:36:37 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:36:37 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:36:37 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:36:37 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:36:37 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:36:37 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:36:37 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:36:38 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:36:38 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:36:38 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:36:38 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:36:38 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:36:38 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:36:38 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:36:38 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:36:38 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:36:39 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:36:39 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:36:39 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6912.11', '2018-04-01 04:36:32')
2018-04-01 04:36:39 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:36:39 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:36:39 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6912.11', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6912.11', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:36:32' WHERE `name`='btbi'
2018-04-01 04:36:39 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:36:39 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:36:39 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:36:40 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:36:40 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:36:40 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:36:40 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:36:40 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:36:40 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:36:40 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:36:40 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:36:40 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:36:40 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:36:40 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:36:40 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:36:41 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:36:41 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:36:41 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:36:41 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:36:41 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:36:41 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:36:41 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:36:41 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:36:41 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:36:43 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:36:43 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:36:43 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6912.14', '2018-04-01 04:36:35')
2018-04-01 04:36:43 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:36:43 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:36:43 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6912.14', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6912.14', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:36:35' WHERE `name`='btbi'
2018-04-01 04:36:43 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:36:43 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:36:43 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:36:43 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:36:43 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:36:43 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:36:43 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:36:43 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:36:43 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:36:43 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:36:43 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:36:43 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:36:43 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:36:43 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:36:43 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:36:44 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:36:44 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:36:44 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:36:44 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:36:44 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:36:44 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:36:44 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:36:44 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:36:44 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:36:46 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:36:46 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:36:46 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6912.15', '2018-04-01 04:36:36')
2018-04-01 04:36:46 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:36:46 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:36:46 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6912.15', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6912.15', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:36:36' WHERE `name`='btbi'
2018-04-01 04:36:46 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:36:46 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:36:46 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:36:46 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:36:46 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:36:46 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:36:46 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:36:46 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:36:46 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:36:46 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:36:46 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:36:46 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:36:46 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:36:46 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:36:46 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:36:48 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:36:48 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:36:48 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:36:48 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:36:48 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:36:48 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:36:48 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:36:48 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:36:48 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:36:49 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:36:49 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:36:49 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6912.11', '2018-04-01 04:36:41')
2018-04-01 04:36:49 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:36:49 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:36:49 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6912.11', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6912.11', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:36:41' WHERE `name`='btbi'
2018-04-01 04:36:49 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:36:49 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:36:49 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:36:49 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:36:49 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:36:49 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:36:49 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:36:49 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:36:49 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:36:49 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:36:50 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:36:50 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:36:50 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:36:50 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:36:50 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:36:51 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:36:51 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:36:51 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:36:51 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:36:51 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:36:51 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:36:51 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:36:51 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:36:51 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:36:53 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:36:53 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:36:53 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6922.00', '2018-04-01 04:36:46')
2018-04-01 04:36:53 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:36:53 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:36:53 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6922.00', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6922.00', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:36:46' WHERE `name`='btbi'
2018-04-01 04:36:53 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:36:53 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:36:53 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:36:53 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:36:53 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:36:53 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:36:53 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:36:53 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:36:53 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:36:53 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:36:53 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:36:53 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:36:53 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:36:53 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:36:53 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:36:54 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:36:54 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:36:54 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:36:54 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:36:54 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:36:54 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:36:54 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:36:55 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:36:55 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:36:57 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:36:57 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:36:57 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6912.63', '2018-04-01 04:36:49')
2018-04-01 04:36:57 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:36:57 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:36:57 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6912.63', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6912.63', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:36:49' WHERE `name`='btbi'
2018-04-01 04:36:57 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:36:57 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:36:57 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:36:57 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:36:57 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:36:57 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:36:57 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:36:57 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:36:57 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:36:57 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:36:57 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:36:57 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:36:57 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:36:57 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:36:57 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:36:58 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:36:58 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:36:58 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:36:58 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:36:58 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:36:58 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:36:58 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:36:58 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:36:58 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:37:00 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:37:00 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:37:00 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6912.63', '2018-04-01 04:36:52')
2018-04-01 04:37:00 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:37:00 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:37:00 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6912.63', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6912.63', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:36:52' WHERE `name`='btbi'
2018-04-01 04:37:00 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:37:00 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:37:00 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:37:00 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:37:00 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:37:00 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:37:00 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:37:00 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:37:00 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:37:00 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:37:00 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:37:00 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:37:00 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:37:00 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:37:00 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:37:01 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:37:01 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:37:01 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:37:01 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:37:01 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:37:02 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:37:02 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:37:02 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:37:02 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:37:03 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:37:03 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:37:03 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6912.70', '2018-04-01 04:36:54')
2018-04-01 04:37:03 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:37:03 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:37:03 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6912.70', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6912.70', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:36:54' WHERE `name`='btbi'
2018-04-01 04:37:03 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:37:03 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:37:03 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:37:03 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:37:03 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:37:03 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:37:03 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:37:03 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:37:03 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:37:03 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:37:03 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:37:03 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:37:03 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:37:03 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:37:03 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:37:05 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:37:05 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:37:05 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:37:05 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:37:05 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:37:05 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:37:05 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:37:05 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:37:05 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:37:06 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:37:06 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:37:06 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6912.11', '2018-04-01 04:36:58')
2018-04-01 04:37:06 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:37:06 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:37:06 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6912.11', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6912.11', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:36:58' WHERE `name`='btbi'
2018-04-01 04:37:06 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:37:06 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:37:06 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:37:07 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:37:07 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:37:07 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:37:07 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:37:07 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:37:07 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:37:07 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:37:07 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:37:07 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:37:07 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:37:07 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:37:07 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:37:08 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:37:08 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:37:08 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:37:08 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:37:08 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:37:08 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:37:08 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:37:08 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:37:08 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:37:10 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:37:10 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:37:10 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6912.11', '2018-04-01 04:37:01')
2018-04-01 04:37:10 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:37:10 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:37:10 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6912.11', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6912.11', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:37:01' WHERE `name`='btbi'
2018-04-01 04:37:10 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:37:10 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:37:10 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:37:10 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:37:10 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:37:10 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:37:10 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:37:10 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:37:10 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:37:10 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:37:10 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:37:10 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:37:10 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:37:10 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:37:10 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:37:11 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:37:11 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:37:11 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:37:11 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:37:11 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:37:11 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:37:11 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:37:11 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:37:11 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:37:13 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:37:13 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:37:13 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6921.54', '2018-04-01 04:37:03')
2018-04-01 04:37:13 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:37:13 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:37:13 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6921.54', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6921.54', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:37:03' WHERE `name`='btbi'
2018-04-01 04:37:13 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:37:13 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:37:13 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:37:13 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:37:13 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:37:13 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:37:13 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:37:13 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:37:13 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:37:13 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:37:13 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:37:13 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:37:13 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:37:13 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:37:13 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:37:15 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:37:15 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:37:15 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:37:15 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:37:15 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:37:15 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:37:15 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:37:15 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:37:15 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:37:17 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:37:17 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:37:17 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6913.10', '2018-04-01 04:37:07')
2018-04-01 04:37:17 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:37:17 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:37:17 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6913.10', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6913.10', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:37:07' WHERE `name`='btbi'
2018-04-01 04:37:17 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:37:17 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:37:17 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:37:17 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:37:17 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:37:17 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:37:17 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:37:17 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:37:17 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:37:17 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:37:17 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:37:17 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:37:17 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:37:17 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:37:17 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:37:18 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:37:18 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:37:18 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:37:18 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:37:18 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:37:18 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:37:18 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:37:18 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:37:18 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:37:20 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:37:20 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:37:20 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6913.20', '2018-04-01 04:37:12')
2018-04-01 04:37:20 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:37:20 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:37:20 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6913.20', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6913.20', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:37:12' WHERE `name`='btbi'
2018-04-01 04:37:20 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:37:20 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:37:20 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:37:20 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:37:20 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:37:20 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:37:20 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:37:20 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:37:20 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:37:20 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:37:20 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:37:20 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:37:20 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:37:20 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:37:20 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:37:22 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:37:22 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:37:22 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:37:22 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:37:22 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:37:22 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:37:22 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:37:22 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:37:22 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:37:23 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:37:23 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:37:23 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6913.30', '2018-04-01 04:37:14')
2018-04-01 04:37:23 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:37:23 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:37:23 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6913.30', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6913.30', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:37:14' WHERE `name`='btbi'
2018-04-01 04:37:23 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:37:23 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:37:23 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:37:24 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:37:24 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:37:24 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:37:24 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:37:24 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:37:24 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:37:24 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:37:24 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:37:24 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:37:24 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:37:24 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:37:24 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:37:25 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:37:25 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:37:25 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:37:25 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:37:25 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:37:25 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:37:25 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:37:25 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:37:25 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:37:26 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:37:26 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:37:26 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6913.41', '2018-04-01 04:37:18')
2018-04-01 04:37:27 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:37:27 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:37:27 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6913.41', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6913.41', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:37:18' WHERE `name`='btbi'
2018-04-01 04:37:27 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:37:27 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:37:27 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:37:27 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:37:27 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:37:27 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:37:27 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:37:27 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:37:27 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:37:27 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:37:27 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:37:27 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:37:27 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:37:27 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:37:27 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:37:28 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:37:28 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:37:28 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:37:28 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:37:28 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:37:28 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:37:28 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:37:28 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:37:28 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:37:30 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:37:30 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:37:30 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6913.60', '2018-04-01 04:37:21')
2018-04-01 04:37:30 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:37:30 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:37:30 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6913.60', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6913.60', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:37:21' WHERE `name`='btbi'
2018-04-01 04:37:30 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:37:30 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:37:30 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:37:31 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:37:31 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:37:31 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:37:31 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:37:31 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:37:31 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:37:31 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:37:31 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:37:31 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:37:31 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:37:31 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:37:31 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:37:32 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:37:32 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:37:32 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:37:32 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:37:32 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:37:32 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:37:32 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:37:32 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:37:32 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:37:34 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:37:34 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:37:34 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6913.10', '2018-04-01 04:37:25')
2018-04-01 04:37:34 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:37:34 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:37:34 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6913.10', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6913.10', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:37:25' WHERE `name`='btbi'
2018-04-01 04:37:34 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:37:34 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:37:34 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:37:34 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:37:34 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:37:34 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:37:34 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:37:34 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:37:34 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:37:34 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:37:34 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:37:34 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:37:34 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:37:34 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:37:34 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:37:35 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:37:35 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:37:35 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:37:35 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:37:35 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:37:35 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:37:35 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:37:35 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:37:35 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:37:37 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:37:37 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:37:37 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6913.10', '2018-04-01 04:37:27')
2018-04-01 04:37:37 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:37:37 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:37:37 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6913.10', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6913.10', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:37:27' WHERE `name`='btbi'
2018-04-01 04:37:37 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:37:37 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:37:37 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:37:37 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:37:37 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:37:37 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:37:37 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:37:37 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:37:37 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:37:37 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:37:37 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:37:37 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:37:37 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:37:37 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:37:37 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:37:38 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:37:38 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:37:38 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:37:38 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:37:38 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:37:38 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:37:38 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:37:38 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:37:38 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:37:40 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:37:40 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:37:40 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6913.30', '2018-04-01 04:37:32')
2018-04-01 04:37:40 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:37:40 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:37:40 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6913.30', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6913.30', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:37:32' WHERE `name`='btbi'
2018-04-01 04:37:40 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:37:40 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:37:40 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:37:40 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:37:40 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:37:40 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:37:40 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:37:40 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:37:40 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:37:40 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:37:40 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:37:40 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:37:40 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:37:40 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:37:40 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:37:42 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:37:42 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:37:42 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:37:42 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:37:42 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:37:42 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:37:42 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:37:42 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:37:42 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:37:43 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:37:43 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:37:43 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6914.60', '2018-04-01 04:37:35')
2018-04-01 04:37:43 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:37:43 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:37:43 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6914.60', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6914.60', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:37:35' WHERE `name`='btbi'
2018-04-01 04:37:43 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:37:43 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:37:43 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:37:44 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:37:44 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:37:44 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:37:44 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:37:44 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:37:44 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:37:44 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:37:44 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:37:44 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:37:44 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:37:44 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:37:44 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:37:45 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:37:45 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:37:45 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:37:45 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:37:45 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:37:45 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:37:45 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:37:45 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:37:45 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:37:46 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:37:46 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:37:46 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6917.52', '2018-04-01 04:37:38')
2018-04-01 04:37:46 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:37:46 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:37:46 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6917.52', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6917.52', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:37:38' WHERE `name`='btbi'
2018-04-01 04:37:46 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:37:46 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:37:46 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:37:47 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:37:47 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:37:47 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:37:47 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:37:47 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:37:47 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:37:47 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:37:47 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:37:47 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:37:47 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:37:47 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:37:47 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:37:48 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:37:48 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:37:48 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:37:48 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:37:48 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:37:48 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:37:48 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:37:48 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:37:48 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:37:50 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:37:50 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:37:50 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6919.39', '2018-04-01 04:37:40')
2018-04-01 04:37:50 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:37:50 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:37:50 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6919.39', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6919.39', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:37:40' WHERE `name`='btbi'
2018-04-01 04:37:50 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:37:50 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:37:50 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:37:50 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:37:50 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:37:50 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:37:50 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:37:50 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:37:50 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:37:50 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:37:50 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:37:50 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:37:50 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:37:50 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:37:50 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:37:51 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:37:51 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:37:51 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:37:51 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:37:51 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:37:51 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:37:51 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:37:51 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:37:51 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:37:53 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:37:53 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:37:53 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6919.47', '2018-04-01 04:37:44')
2018-04-01 04:37:53 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:37:53 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:37:53 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6919.47', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6919.47', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:37:44' WHERE `name`='btbi'
2018-04-01 04:37:53 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:37:53 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:37:53 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:37:53 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:37:53 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:37:53 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:37:53 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:37:53 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:37:53 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:37:53 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:37:53 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:37:53 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:37:53 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:37:53 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:37:53 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:37:55 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:37:55 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:37:55 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:37:55 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:37:55 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:37:55 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:37:55 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:37:55 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:37:55 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:37:56 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:37:56 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:37:56 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6914.47', '2018-04-01 04:37:47')
2018-04-01 04:37:56 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:37:56 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:37:56 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6914.47', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6914.47', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:37:47' WHERE `name`='btbi'
2018-04-01 04:37:56 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:37:56 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:37:56 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:37:57 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:37:57 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:37:57 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:37:57 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:37:57 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:37:57 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:37:57 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:37:57 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:37:57 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:37:57 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:37:57 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:37:57 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:37:58 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:37:58 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:37:58 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:37:58 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:37:58 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:37:58 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:37:58 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:37:58 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:37:58 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:37:59 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:38:00 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:38:00 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6915.20', '2018-04-01 04:37:51')
2018-04-01 04:38:00 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:38:00 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:38:00 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6915.20', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6915.20', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:37:51' WHERE `name`='btbi'
2018-04-01 04:38:00 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:38:00 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:38:00 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:38:00 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:38:00 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:38:00 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:38:00 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:38:00 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:38:00 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:38:00 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:38:00 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:38:00 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:38:00 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:38:00 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:38:00 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:38:01 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:38:01 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:38:01 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:38:01 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:38:01 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:38:01 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:38:01 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:38:01 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:38:01 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:38:03 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:38:03 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:38:03 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6913.70', '2018-04-01 04:37:54')
2018-04-01 04:38:03 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:38:03 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:38:03 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6913.70', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6913.70', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:37:54' WHERE `name`='btbi'
2018-04-01 04:38:03 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:38:03 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:38:03 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:38:03 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:38:03 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:38:03 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:38:03 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:38:03 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:38:03 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:38:03 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:38:03 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:38:03 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:38:03 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:38:03 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:38:03 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:38:04 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:38:04 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:38:04 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:38:04 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:38:04 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:38:04 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:38:04 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:38:04 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:38:04 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:38:06 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:38:06 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:38:06 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6914.25', '2018-04-01 04:37:57')
2018-04-01 04:38:06 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:38:06 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:38:06 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6914.25', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6914.25', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:37:57' WHERE `name`='btbi'
2018-04-01 04:38:06 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:38:06 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:38:06 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:38:06 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:38:06 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:38:06 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:38:06 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:38:06 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:38:06 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:38:06 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:38:06 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:38:06 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:38:06 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:38:06 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:38:06 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:38:08 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:38:08 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:38:08 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:38:08 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:38:08 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:38:08 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:38:08 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:38:08 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:38:08 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:38:09 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:38:09 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:38:09 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6914.24', '2018-04-01 04:38:01')
2018-04-01 04:38:09 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:38:09 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:38:09 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6914.24', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6914.24', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:38:01' WHERE `name`='btbi'
2018-04-01 04:38:09 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:38:09 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:38:09 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:38:10 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:38:10 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:38:10 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:38:10 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:38:10 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:38:10 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:38:10 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:38:10 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:38:10 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:38:10 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:38:10 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:38:10 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:38:11 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:38:11 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:38:11 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:38:11 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:38:11 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:38:11 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:38:11 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:38:11 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:38:11 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:38:13 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:38:13 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:38:13 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6916.72', '2018-04-01 04:38:04')
2018-04-01 04:38:13 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:38:13 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:38:13 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6916.72', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6916.72', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:38:04' WHERE `name`='btbi'
2018-04-01 04:38:13 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:38:13 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:38:13 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:38:13 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:38:13 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:38:13 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:38:13 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:38:13 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:38:13 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:38:13 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:38:13 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:38:13 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:38:13 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:38:13 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:38:13 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:38:14 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:38:14 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:38:14 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:38:14 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:38:14 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:38:14 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:38:14 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:38:14 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:38:14 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:38:16 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:38:16 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:38:16 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6918.40', '2018-04-01 04:38:07')
2018-04-01 04:38:16 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:38:16 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:38:16 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6918.40', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6918.40', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:38:07' WHERE `name`='btbi'
2018-04-01 04:38:16 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:38:16 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:38:16 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:38:16 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:38:16 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:38:16 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:38:16 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:38:16 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:38:16 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:38:16 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:38:16 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:38:16 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:38:16 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:38:16 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:38:16 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:38:18 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:38:18 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:38:18 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:38:18 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:38:18 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:38:18 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:38:18 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:38:18 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:38:18 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:38:19 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:38:19 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:38:19 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6918.50', '2018-04-01 04:38:11')
2018-04-01 04:38:19 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:38:19 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:38:19 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6918.50', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6918.50', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:38:11' WHERE `name`='btbi'
2018-04-01 04:38:19 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:38:19 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:38:19 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:38:20 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:38:20 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:38:20 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:38:20 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:38:20 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:38:20 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:38:20 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:38:20 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:38:20 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:38:20 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:38:20 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:38:20 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:38:21 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:38:21 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:38:21 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:38:21 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:38:21 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:38:21 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:38:21 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:38:21 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:38:21 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:38:23 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:38:23 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:38:23 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6916.20', '2018-04-01 04:38:14')
2018-04-01 04:38:23 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:38:23 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:38:23 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6916.20', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6916.20', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:38:14' WHERE `name`='btbi'
2018-04-01 04:38:23 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:38:23 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:38:23 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:38:23 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:38:23 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:38:23 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:38:23 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:38:23 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:38:23 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:38:23 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:38:23 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:38:23 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:38:23 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:38:23 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:38:23 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:38:24 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:38:24 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:38:24 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:38:24 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:38:24 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:38:24 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:38:24 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:38:24 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:38:24 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:38:26 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:38:26 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:38:26 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6916.89', '2018-04-01 04:38:18')
2018-04-01 04:38:26 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:38:26 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:38:26 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6916.89', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6916.89', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:38:18' WHERE `name`='btbi'
2018-04-01 04:38:26 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:38:26 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:38:26 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:38:27 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:38:27 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:38:27 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:38:27 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:38:27 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:38:27 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:38:27 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:38:27 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:38:27 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:38:27 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:38:27 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:38:27 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:38:28 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:38:28 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:38:28 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:38:28 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:38:28 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:38:28 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:38:28 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:38:28 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:38:28 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:38:30 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:38:30 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:38:30 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6913.21', '2018-04-01 04:38:22')
2018-04-01 04:38:30 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:38:30 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:38:30 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6913.21', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6913.21', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:38:22' WHERE `name`='btbi'
2018-04-01 04:38:30 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:38:30 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:38:30 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:38:30 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:38:30 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:38:30 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:38:30 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:38:30 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:38:30 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:38:30 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:38:30 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:38:30 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:38:30 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:38:30 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:38:30 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:38:31 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:38:31 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:38:31 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:38:31 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:38:31 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:38:31 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:38:31 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:38:31 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:38:31 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:38:33 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:38:34 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:38:34 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6913.20', '2018-04-01 04:38:24')
2018-04-01 04:38:34 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:38:34 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:38:34 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6913.20', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6913.20', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:38:24' WHERE `name`='btbi'
2018-04-01 04:38:34 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:38:34 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:38:34 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:38:34 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:38:34 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:38:34 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:38:34 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:38:34 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:38:34 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:38:34 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:38:34 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:38:34 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:38:34 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:38:34 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:38:34 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:38:35 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:38:35 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:38:35 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:38:35 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:38:35 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:38:35 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:38:35 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:38:35 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:38:35 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:38:37 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:38:37 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:38:37 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6913.00', '2018-04-01 04:38:28')
2018-04-01 04:38:37 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:38:37 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:38:37 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6913.00', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6913.00', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:38:28' WHERE `name`='btbi'
2018-04-01 04:38:37 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:38:37 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:38:37 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:38:37 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:38:37 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:38:37 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:38:37 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:38:37 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:38:37 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:38:37 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:38:37 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:38:37 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:38:37 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:38:37 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:38:37 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:38:39 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:38:39 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:38:39 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:38:39 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:38:39 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:38:39 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:38:39 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:38:39 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:38:39 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:38:40 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:38:40 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:38:40 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6913.00', '2018-04-01 04:38:32')
2018-04-01 04:38:40 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:38:40 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:38:40 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6913.00', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6913.00', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:38:32' WHERE `name`='btbi'
2018-04-01 04:38:40 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:38:40 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:38:40 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:38:41 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:38:41 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:38:41 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:38:41 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:38:41 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:38:41 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:38:41 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:38:41 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:38:41 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:38:41 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:38:41 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:38:41 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:38:42 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:38:42 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:38:42 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:38:42 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:38:42 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:38:42 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:38:42 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:38:42 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:38:42 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:38:44 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:38:44 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:38:44 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6913.00', '2018-04-01 04:38:36')
2018-04-01 04:38:44 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:38:44 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:38:44 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6913.00', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6913.00', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:38:36' WHERE `name`='btbi'
2018-04-01 04:38:44 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:38:44 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:38:44 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:38:44 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:38:44 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:38:44 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:38:44 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:38:44 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:38:44 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:38:44 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:38:44 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:38:44 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:38:44 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:38:44 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:38:44 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:38:46 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:38:46 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:38:46 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:38:46 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:38:46 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:38:46 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:38:46 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:38:46 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:38:46 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:38:47 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:38:47 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:38:47 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6913.00', '2018-04-01 04:38:39')
2018-04-01 04:38:47 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:38:47 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:38:47 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6913.00', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6913.00', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:38:39' WHERE `name`='btbi'
2018-04-01 04:38:47 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:38:47 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:38:47 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:38:48 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:38:48 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:38:48 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:38:48 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:38:48 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:38:48 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:38:48 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:38:48 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:38:48 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:38:48 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:38:48 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:38:48 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
