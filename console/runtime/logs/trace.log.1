2018-04-01 04:26:33 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:26:33 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:26:33 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:26:33 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:26:33 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:26:33 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:26:33 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:26:33 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:26:33 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:26:33 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:26:33 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:26:33 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:26:33 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:26:35 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:26:35 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:26:35 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:26:35 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:26:35 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:26:35 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:26:35 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:26:35 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:26:35 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:26:36 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:26:36 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:26:36 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6932.06', '2018-04-01 04:26:28')
2018-04-01 04:26:36 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:26:36 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:26:36 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6932.06', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6932.06', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:26:28' WHERE `name`='btbi'
2018-04-01 04:26:36 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:26:36 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:26:36 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:26:37 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:26:37 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:26:37 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:26:37 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:26:37 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:26:37 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:26:37 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:26:37 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:26:37 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:26:37 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:26:37 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:26:37 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:26:38 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:26:38 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:26:38 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:26:38 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:26:38 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:26:38 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:26:38 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:26:38 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:26:38 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:26:40 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:26:40 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:26:40 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6929.33', '2018-04-01 04:26:31')
2018-04-01 04:26:40 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:26:40 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:26:40 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6929.33', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6929.33', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:26:31' WHERE `name`='btbi'
2018-04-01 04:26:40 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:26:40 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:26:40 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:26:40 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:26:40 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:26:40 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:26:40 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:26:40 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:26:40 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:26:40 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:26:40 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:26:40 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:26:40 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:26:40 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:26:40 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:26:41 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:26:41 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:26:41 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:26:41 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:26:41 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:26:41 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:26:41 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:26:42 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:26:42 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:26:43 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:26:43 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:26:43 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6929.32', '2018-04-01 04:26:34')
2018-04-01 04:26:43 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:26:43 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:26:43 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6929.32', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6929.32', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:26:34' WHERE `name`='btbi'
2018-04-01 04:26:43 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:26:43 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:26:43 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:26:43 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:26:43 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:26:43 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:26:43 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:26:43 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:26:43 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:26:43 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:26:44 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:26:44 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:26:44 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:26:44 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:26:44 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:26:45 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:26:45 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:26:45 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:26:45 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:26:45 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:26:45 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:26:45 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:26:45 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:26:45 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:26:46 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:26:46 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:26:46 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6931.38', '2018-04-01 04:26:38')
2018-04-01 04:26:46 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:26:46 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:26:46 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6931.38', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6931.38', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:26:38' WHERE `name`='btbi'
2018-04-01 04:26:46 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:26:46 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:26:46 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:26:47 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:26:47 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:26:47 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:26:47 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:26:47 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:26:47 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:26:47 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:26:47 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:26:47 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:26:47 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:26:47 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:26:47 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:26:48 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:26:48 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:26:48 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:26:48 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:26:48 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:26:48 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:26:48 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:26:48 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:26:48 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:26:50 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:26:50 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:26:50 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6929.32', '2018-04-01 04:26:42')
2018-04-01 04:26:50 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:26:50 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:26:50 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6929.32', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6929.32', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:26:42' WHERE `name`='btbi'
2018-04-01 04:26:50 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:26:50 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:26:50 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:26:51 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:26:51 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:26:51 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:26:51 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:26:51 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:26:51 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:26:51 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:26:51 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:26:51 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:26:51 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:26:51 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:26:51 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:26:52 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:26:52 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:26:52 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:26:52 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:26:52 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:26:52 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:26:52 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:26:52 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:26:52 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:26:54 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:26:54 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:26:54 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6929.32', '2018-04-01 04:26:46')
2018-04-01 04:26:54 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:26:54 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:26:54 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6929.32', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6929.32', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:26:46' WHERE `name`='btbi'
2018-04-01 04:26:54 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:26:54 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:26:54 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:26:54 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:26:54 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:26:55 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:26:55 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:26:55 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:26:55 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:26:55 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:26:55 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:26:55 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:26:55 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:26:55 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:26:55 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:26:56 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:26:56 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:26:56 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:26:56 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:26:56 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:26:56 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:26:56 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:26:56 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:26:56 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:26:57 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:26:57 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:26:57 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6925.77', '2018-04-01 04:26:48')
2018-04-01 04:26:57 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:26:57 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:26:57 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6925.77', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6925.77', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:26:48' WHERE `name`='btbi'
2018-04-01 04:26:58 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:26:58 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:26:58 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:26:58 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:26:58 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:26:58 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:26:58 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:26:58 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:26:58 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:26:58 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:26:58 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:26:58 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:26:58 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:26:58 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:26:58 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:26:59 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:26:59 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:26:59 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:26:59 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:26:59 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:26:59 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:26:59 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:26:59 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:26:59 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:27:01 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:27:01 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:27:01 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6922.99', '2018-04-01 04:26:53')
2018-04-01 04:27:01 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:27:01 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:27:01 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6922.99', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6922.99', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:26:53' WHERE `name`='btbi'
2018-04-01 04:27:01 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:27:01 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:27:01 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:27:01 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:27:01 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:27:01 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:27:01 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:27:01 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:27:01 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:27:01 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:27:01 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:27:01 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:27:01 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:27:01 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:27:01 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:27:03 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:27:03 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:27:03 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:27:03 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:27:03 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:27:03 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:27:03 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:27:03 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:27:03 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:27:04 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:27:04 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:27:04 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6924.49', '2018-04-01 04:26:56')
2018-04-01 04:27:04 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:27:04 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:27:04 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6924.49', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6924.49', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:26:56' WHERE `name`='btbi'
2018-04-01 04:27:04 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:27:04 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:27:04 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:27:05 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:27:05 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:27:05 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:27:05 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:27:05 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:27:05 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:27:05 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:27:05 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:27:05 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:27:05 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:27:05 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:27:05 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:27:06 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:27:06 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:27:06 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:27:06 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:27:06 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:27:06 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:27:06 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:27:06 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:27:06 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:27:08 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:27:08 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:27:08 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6922.96', '2018-04-01 04:26:58')
2018-04-01 04:27:08 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:27:08 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:27:08 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6922.96', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6922.96', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:26:58' WHERE `name`='btbi'
2018-04-01 04:27:08 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:27:08 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:27:08 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:27:08 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:27:08 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:27:08 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:27:08 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:27:08 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:27:08 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:27:08 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:27:08 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:27:08 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:27:08 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:27:08 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:27:08 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:27:09 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:27:09 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:27:09 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:27:09 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:27:09 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:27:09 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:27:09 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:27:09 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:27:09 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:27:11 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:27:11 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:27:11 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6915.10', '2018-04-01 04:27:02')
2018-04-01 04:27:11 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:27:11 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:27:11 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6915.10', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6915.10', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:27:02' WHERE `name`='btbi'
2018-04-01 04:27:11 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:27:11 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:27:11 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:27:11 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:27:11 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:27:11 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:27:11 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:27:11 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:27:12 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:27:12 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:27:12 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:27:12 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:27:12 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:27:12 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:27:12 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:27:13 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:27:13 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:27:13 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:27:13 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:27:13 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:27:13 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:27:13 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:27:13 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:27:13 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:27:15 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:27:15 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:27:15 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6912.04', '2018-04-01 04:27:07')
2018-04-01 04:27:15 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:27:15 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:27:15 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6912.04', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6912.04', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:27:07' WHERE `name`='btbi'
2018-04-01 04:27:15 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:27:15 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:27:15 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:27:15 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:27:15 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:27:15 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:27:15 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:27:15 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:27:15 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:27:15 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:27:15 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:27:15 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:27:15 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:27:15 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:27:15 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:27:16 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:27:16 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:27:16 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:27:16 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:27:16 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:27:16 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:27:16 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:27:16 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:27:16 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:27:18 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:27:18 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:27:18 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6916.03', '2018-04-01 04:27:09')
2018-04-01 04:27:18 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:27:18 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:27:18 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6916.03', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6916.03', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:27:09' WHERE `name`='btbi'
2018-04-01 04:27:18 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:27:18 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:27:18 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:27:18 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:27:18 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:27:18 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:27:18 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:27:18 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:27:18 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:27:18 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:27:18 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:27:18 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:27:18 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:27:18 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:27:18 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:27:20 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:27:20 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:27:20 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:27:20 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:27:20 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:27:20 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:27:20 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:27:20 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:27:20 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:27:22 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:27:22 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:27:22 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6912.04', '2018-04-01 04:27:13')
2018-04-01 04:27:22 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:27:22 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:27:22 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6912.04', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6912.04', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:27:13' WHERE `name`='btbi'
2018-04-01 04:27:22 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:27:22 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:27:22 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:27:22 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:27:22 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:27:22 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:27:22 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:27:22 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:27:22 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:27:22 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:27:22 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:27:22 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:27:22 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:27:22 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:27:22 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:27:23 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:27:23 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:27:23 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:27:23 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:27:23 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:27:23 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:27:24 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:27:24 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:27:24 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:27:25 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:27:25 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:27:25 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6914.44', '2018-04-01 04:27:16')
2018-04-01 04:27:25 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:27:25 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:27:25 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6914.44', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6914.44', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:27:16' WHERE `name`='btbi'
2018-04-01 04:27:25 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:27:25 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:27:25 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:27:25 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:27:25 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:27:25 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:27:25 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:27:25 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:27:25 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:27:25 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:27:26 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:27:26 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:27:26 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:27:26 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:27:26 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:27:27 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:27:27 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:27:27 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:27:27 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:27:27 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:27:27 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:27:27 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:27:27 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:27:27 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:27:28 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:27:28 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:27:28 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6916.20', '2018-04-01 04:27:20')
2018-04-01 04:27:28 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:27:28 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:27:28 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6916.20', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6916.20', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:27:20' WHERE `name`='btbi'
2018-04-01 04:27:28 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:27:28 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:27:28 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:27:29 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:27:29 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:27:29 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:27:29 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:27:29 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:27:29 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:27:29 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:27:29 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:27:29 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:27:29 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:27:29 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:27:29 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:27:30 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:27:30 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:27:30 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:27:30 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:27:30 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:27:30 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:27:30 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:27:30 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:27:30 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:27:32 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:27:32 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:27:32 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6916.20', '2018-04-01 04:27:25')
2018-04-01 04:27:32 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:27:32 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:27:32 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6916.20', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6916.20', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:27:25' WHERE `name`='btbi'
2018-04-01 04:27:32 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:27:32 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:27:32 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:27:32 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:27:32 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:27:32 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:27:32 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:27:32 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:27:32 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:27:32 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:27:32 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:27:32 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:27:32 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:27:32 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:27:32 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:27:33 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:27:33 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:27:33 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:27:33 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:27:33 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:27:34 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:27:34 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:27:34 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:27:34 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:27:35 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:27:35 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:27:35 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6913.40', '2018-04-01 04:27:26')
2018-04-01 04:27:35 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:27:35 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:27:35 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6913.40', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6913.40', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:27:26' WHERE `name`='btbi'
2018-04-01 04:27:35 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:27:35 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:27:35 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:27:36 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:27:36 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:27:36 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:27:36 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:27:36 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:27:36 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:27:36 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:27:36 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:27:36 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:27:36 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:27:36 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:27:36 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:27:37 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:27:37 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:27:37 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:27:37 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:27:37 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:27:37 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:27:37 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:27:37 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:27:37 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:27:39 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:27:39 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:27:39 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6913.55', '2018-04-01 04:27:31')
2018-04-01 04:27:39 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:27:39 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:27:39 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6913.55', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6913.55', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:27:31' WHERE `name`='btbi'
2018-04-01 04:27:39 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:27:39 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:27:39 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:27:39 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:27:39 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:27:39 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:27:39 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:27:39 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:27:39 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:27:39 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:27:39 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:27:39 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:27:39 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:27:39 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:27:39 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:27:40 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:27:40 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:27:40 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:27:40 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:27:40 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:27:40 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:27:40 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:27:40 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:27:40 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:27:42 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:27:42 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:27:42 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6911.78', '2018-04-01 04:27:33')
2018-04-01 04:27:42 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:27:42 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:27:42 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6911.78', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6911.78', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:27:33' WHERE `name`='btbi'
2018-04-01 04:27:42 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:27:42 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:27:42 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:27:42 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:27:42 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:27:42 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:27:42 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:27:42 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:27:42 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:27:42 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:27:42 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:27:42 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:27:42 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:27:42 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:27:42 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:27:44 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:27:44 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:27:44 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:27:44 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:27:44 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:27:44 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:27:44 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:27:44 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:27:44 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:27:45 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:27:45 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:27:45 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6911.78', '2018-04-01 04:27:33')
2018-04-01 04:27:45 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:27:45 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:27:45 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:27:46 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:27:46 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:27:46 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:27:46 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:27:46 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:27:46 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:27:46 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:27:46 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:27:46 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:27:46 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:27:46 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:27:46 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:27:47 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:27:47 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:27:47 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:27:47 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:27:47 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:27:47 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:27:47 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:27:47 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:27:47 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:27:49 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:27:49 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:27:49 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6894.80', '2018-04-01 04:27:41')
2018-04-01 04:27:49 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:27:49 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:27:49 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6894.80', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6894.80', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:27:41' WHERE `name`='btbi'
2018-04-01 04:27:49 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:27:49 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:27:49 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:27:49 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:27:49 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:27:49 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:27:49 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:27:49 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:27:49 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:27:49 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:27:49 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:27:49 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:27:49 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:27:49 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:27:49 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:27:50 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:27:50 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:27:50 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:27:50 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:27:50 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:27:50 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:27:50 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:27:50 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:27:50 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:27:52 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:27:52 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:27:52 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6894.80', '2018-04-01 04:27:45')
2018-04-01 04:27:52 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:27:52 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:27:52 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6894.80', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6894.80', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:27:45' WHERE `name`='btbi'
2018-04-01 04:27:52 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:27:52 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:27:52 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:27:52 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:27:52 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:27:52 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:27:52 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:27:52 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:27:52 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:27:52 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:27:52 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:27:52 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:27:52 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:27:52 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:27:52 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:27:54 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:27:54 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:27:54 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:27:54 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:27:54 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:27:54 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:27:54 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:27:54 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:27:54 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:27:55 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:27:55 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:27:55 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6894.69', '2018-04-01 04:27:47')
2018-04-01 04:27:55 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:27:55 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:27:55 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6894.69', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6894.69', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:27:47' WHERE `name`='btbi'
2018-04-01 04:27:55 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:27:55 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:27:55 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:27:56 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:27:56 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:27:56 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:27:56 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:27:56 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:27:56 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:27:56 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:27:56 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:27:56 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:27:56 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:27:56 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:27:56 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:27:57 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:27:57 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:27:57 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:27:57 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:27:57 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:27:57 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:27:57 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:27:57 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:27:57 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:27:59 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:27:59 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:27:59 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6891.00', '2018-04-01 04:27:50')
2018-04-01 04:27:59 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:27:59 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:27:59 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6891.00', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6891.00', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:27:50' WHERE `name`='btbi'
2018-04-01 04:27:59 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:27:59 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:27:59 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:27:59 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:27:59 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:27:59 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:27:59 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:27:59 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:27:59 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:27:59 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:27:59 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:27:59 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:27:59 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:27:59 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:27:59 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:28:00 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:28:00 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:28:00 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:28:00 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:28:00 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:28:00 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:28:00 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:28:00 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:28:00 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:28:02 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:28:02 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:28:02 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6891.00', '2018-04-01 04:27:54')
2018-04-01 04:28:02 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:28:02 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:28:02 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6891.00', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6891.00', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:27:54' WHERE `name`='btbi'
2018-04-01 04:28:02 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:28:02 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:28:02 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:28:02 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:28:02 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:28:02 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:28:02 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:28:02 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:28:02 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:28:02 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:28:02 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:28:02 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:28:02 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:28:02 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:28:02 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:28:04 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:28:04 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:28:04 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:28:04 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:28:04 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:28:04 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:28:04 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:28:04 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:28:04 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:28:05 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:28:05 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:28:05 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6888.88', '2018-04-01 04:27:56')
2018-04-01 04:28:05 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:28:05 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:28:05 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6888.88', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6888.88', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:27:56' WHERE `name`='btbi'
2018-04-01 04:28:05 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:28:05 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:28:05 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:28:06 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:28:06 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:28:06 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:28:06 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:28:06 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:28:06 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:28:06 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:28:06 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:28:06 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:28:06 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:28:06 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:28:06 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:28:07 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:28:07 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:28:07 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:28:07 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:28:07 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:28:07 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:28:07 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:28:07 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:28:07 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:28:09 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:28:09 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:28:09 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6880.38', '2018-04-01 04:28:00')
2018-04-01 04:28:09 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:28:09 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:28:09 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6880.38', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6880.38', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:28:00' WHERE `name`='btbi'
2018-04-01 04:28:09 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:28:09 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:28:09 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:28:09 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:28:09 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:28:09 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:28:09 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:28:09 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:28:09 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:28:09 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:28:09 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:28:09 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:28:09 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:28:09 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:28:09 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:28:10 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:28:10 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:28:10 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:28:10 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:28:10 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:28:11 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:28:11 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:28:11 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:28:11 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:28:12 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:28:12 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:28:12 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6880.44', '2018-04-01 04:28:03')
2018-04-01 04:28:12 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:28:12 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:28:12 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6880.44', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6880.44', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:28:03' WHERE `name`='btbi'
2018-04-01 04:28:12 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:28:12 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:28:12 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:28:12 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:28:12 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:28:12 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:28:12 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:28:12 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:28:12 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:28:12 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:28:12 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:28:12 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:28:12 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:28:12 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:28:12 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:28:14 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:28:14 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:28:14 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:28:14 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:28:14 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:28:14 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:28:14 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:28:14 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:28:14 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:28:15 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:28:15 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:28:15 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6880.41', '2018-04-01 04:28:07')
2018-04-01 04:28:15 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:28:15 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:28:15 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6880.41', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6880.41', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:28:07' WHERE `name`='btbi'
2018-04-01 04:28:15 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:28:15 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:28:16 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:28:16 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:28:16 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:28:16 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:28:16 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:28:16 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:28:16 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:28:16 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:28:16 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:28:16 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:28:16 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:28:16 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:28:16 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:28:17 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:28:17 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:28:17 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:28:17 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:28:17 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:28:17 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:28:17 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:28:17 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:28:17 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:28:19 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:28:19 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:28:19 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6878.00', '2018-04-01 04:28:09')
2018-04-01 04:28:19 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:28:19 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:28:19 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6878.00', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6878.00', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:28:09' WHERE `name`='btbi'
2018-04-01 04:28:19 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:28:19 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:28:19 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:28:19 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:28:19 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:28:19 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:28:19 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:28:19 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:28:19 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:28:19 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:28:19 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:28:19 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:28:19 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:28:19 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:28:19 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:28:20 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:28:21 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:28:21 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:28:21 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:28:21 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:28:21 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:28:21 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:28:21 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:28:21 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:28:22 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:28:22 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:28:22 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6880.51', '2018-04-01 04:28:11')
2018-04-01 04:28:22 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:28:22 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:28:22 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6880.51', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6880.51', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:28:11' WHERE `name`='btbi'
2018-04-01 04:28:22 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:28:22 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:28:22 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:28:22 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:28:22 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:28:22 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:28:22 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:28:22 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:28:22 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:28:22 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:28:22 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:28:22 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:28:23 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:28:23 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:28:23 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:28:24 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:28:24 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:28:24 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:28:24 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:28:24 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:28:24 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:28:24 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:28:24 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:28:24 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:28:25 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:28:25 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:28:25 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6889.53', '2018-04-01 04:28:18')
2018-04-01 04:28:25 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:28:25 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:28:25 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6889.53', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6889.53', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:28:18' WHERE `name`='btbi'
2018-04-01 04:28:25 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:28:25 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:28:25 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:28:26 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:28:26 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:28:26 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:28:26 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:28:26 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:28:26 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:28:26 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:28:26 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:28:26 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:28:26 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:28:26 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:28:26 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:28:27 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:28:27 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:28:27 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:28:27 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:28:27 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:28:27 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:28:27 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:28:27 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:28:27 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:28:29 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:28:29 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:28:29 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6892.11', '2018-04-01 04:28:19')
2018-04-01 04:28:29 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:28:29 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:28:29 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6892.11', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6892.11', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:28:19' WHERE `name`='btbi'
2018-04-01 04:28:29 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:28:29 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:28:29 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:28:29 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:28:29 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:28:29 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:28:29 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:28:29 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:28:29 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:28:29 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:28:29 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:28:29 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:28:29 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:28:29 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:28:29 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:28:31 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:28:31 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:28:31 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:28:31 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:28:31 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:28:31 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:28:31 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:28:31 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:28:31 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:28:32 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:28:32 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:28:32 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6900.31', '2018-04-01 04:28:22')
2018-04-01 04:28:32 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:28:32 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:28:32 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6900.31', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6900.31', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:28:22' WHERE `name`='btbi'
2018-04-01 04:28:32 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:28:32 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:28:32 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:28:32 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:28:32 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:28:32 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:28:32 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:28:32 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:28:32 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:28:32 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:28:33 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:28:33 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:28:33 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:28:33 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:28:33 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:28:34 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:28:34 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:28:34 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:28:34 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:28:34 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:28:34 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:28:34 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:28:34 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:28:34 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:28:35 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:28:35 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:28:35 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6894.18', '2018-04-01 04:28:27')
2018-04-01 04:28:35 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:28:35 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:28:36 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6894.18', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6894.18', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:28:27' WHERE `name`='btbi'
2018-04-01 04:28:36 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:28:36 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:28:36 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:28:36 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:28:36 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:28:36 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:28:36 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:28:36 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:28:36 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:28:36 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:28:36 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:28:36 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:28:36 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:28:36 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:28:36 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:28:37 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:28:37 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:28:37 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:28:37 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:28:37 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:28:37 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:28:37 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:28:37 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:28:37 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:28:39 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:28:39 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:28:39 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6894.20', '2018-04-01 04:28:31')
2018-04-01 04:28:39 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:28:39 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:28:39 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6894.20', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6894.20', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:28:31' WHERE `name`='btbi'
2018-04-01 04:28:39 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:28:39 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:28:39 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:28:39 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:28:39 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:28:39 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:28:39 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:28:39 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:28:39 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:28:39 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:28:39 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:28:39 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:28:39 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:28:39 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:28:39 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:28:41 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:28:41 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:28:41 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:28:41 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:28:41 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:28:41 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:28:41 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:28:41 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:28:41 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:28:42 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:28:42 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:28:42 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6894.20', '2018-04-01 04:28:31')
2018-04-01 04:28:42 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:28:42 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:28:42 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:28:42 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:28:42 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:28:42 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:28:42 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:28:42 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:28:42 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:28:42 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:28:42 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:28:42 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:28:42 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:28:42 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:28:42 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:28:44 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:28:44 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:28:44 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:28:44 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:28:44 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:28:44 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:28:44 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:28:44 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:28:44 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:28:45 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:28:45 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:28:45 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6904.95', '2018-04-01 04:28:36')
2018-04-01 04:28:45 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:28:45 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:28:45 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6904.95', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6904.95', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:28:36' WHERE `name`='btbi'
2018-04-01 04:28:45 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:28:45 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:28:45 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:28:46 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:28:46 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:28:46 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:28:46 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:28:46 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:28:46 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:28:46 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:28:46 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:28:46 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:28:46 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:28:46 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:28:46 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:28:47 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:28:47 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:28:47 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:28:47 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:28:47 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:28:47 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:28:47 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:28:47 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:28:47 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:28:49 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:28:49 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:28:49 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6900.16', '2018-04-01 04:28:42')
2018-04-01 04:28:49 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:28:49 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:28:49 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6900.16', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6900.16', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:28:42' WHERE `name`='btbi'
2018-04-01 04:28:49 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:28:49 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:28:49 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:28:49 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:28:49 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:28:49 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:28:49 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:28:49 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:28:49 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:28:49 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:28:49 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:28:49 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:28:49 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:28:49 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:28:49 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:28:50 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:28:50 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:28:50 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:28:50 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:28:50 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:28:50 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:28:50 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:28:50 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:28:50 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:28:52 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:28:52 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:28:52 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6904.95', '2018-04-01 04:28:44')
2018-04-01 04:28:52 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:28:52 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:28:52 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6904.95', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6904.95', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:28:44' WHERE `name`='btbi'
2018-04-01 04:28:52 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:28:52 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:28:52 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:28:52 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:28:52 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:28:52 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:28:52 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:28:52 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:28:52 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:28:52 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:28:52 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:28:52 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:28:52 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:28:52 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:28:52 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:28:54 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:28:54 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:28:54 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:28:54 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:28:54 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:28:54 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:28:54 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:28:54 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:28:54 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:28:55 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:28:55 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:28:55 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6904.95', '2018-04-01 04:28:44')
2018-04-01 04:28:55 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:28:55 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:28:55 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:28:56 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:28:56 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:28:56 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:28:56 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:28:56 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:28:56 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:28:56 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:28:56 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:28:56 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:28:56 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:28:56 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:28:56 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:28:57 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:28:57 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:28:57 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:28:57 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:28:57 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:28:57 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:28:57 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:28:57 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:28:57 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:28:59 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:28:59 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:28:59 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6906.95', '2018-04-01 04:28:50')
2018-04-01 04:28:59 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:28:59 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:28:59 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6906.95', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6906.95', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:28:50' WHERE `name`='btbi'
2018-04-01 04:28:59 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:28:59 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:28:59 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:28:59 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:28:59 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:28:59 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:28:59 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:28:59 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:28:59 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:28:59 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:28:59 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:28:59 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:28:59 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:28:59 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:28:59 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:29:00 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:29:00 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:29:00 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:29:00 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:29:00 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:29:00 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:29:00 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:29:00 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:29:00 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:29:02 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:29:02 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:29:02 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6907.01', '2018-04-01 04:28:53')
2018-04-01 04:29:02 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:29:02 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:29:02 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6907.01', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6907.01', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:28:53' WHERE `name`='btbi'
2018-04-01 04:29:02 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:29:02 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:29:02 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:29:02 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:29:02 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:29:02 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:29:02 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:29:02 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:29:02 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:29:02 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:29:02 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:29:02 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:29:02 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:29:02 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:29:02 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:29:04 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:29:04 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:29:04 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:29:04 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:29:04 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:29:04 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:29:04 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:29:04 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:29:04 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:29:05 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:29:05 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:29:05 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6903.59', '2018-04-01 04:28:58')
2018-04-01 04:29:05 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:29:05 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:29:05 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6903.59', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6903.59', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:28:58' WHERE `name`='btbi'
2018-04-01 04:29:05 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:29:05 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:29:05 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:29:06 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:29:06 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:29:06 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:29:06 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:29:06 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:29:06 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:29:06 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:29:06 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:29:06 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:29:06 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:29:06 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:29:06 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:29:07 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:29:07 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:29:07 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:29:07 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:29:07 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:29:07 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:29:07 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:29:07 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:29:07 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:29:09 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:29:09 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:29:09 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6903.60', '2018-04-01 04:29:01')
2018-04-01 04:29:09 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:29:09 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:29:09 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6903.60', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6903.60', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:29:01' WHERE `name`='btbi'
2018-04-01 04:29:09 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:29:09 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:29:09 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:29:09 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:29:09 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:29:09 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:29:09 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:29:09 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:29:09 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:29:09 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:29:09 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:29:09 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:29:09 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:29:09 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:29:09 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:29:11 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:29:11 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:29:11 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:29:11 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:29:11 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:29:11 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:29:11 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:29:11 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:29:11 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:29:12 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:29:12 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:29:12 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6903.82', '2018-04-01 04:29:04')
2018-04-01 04:29:12 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:29:12 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:29:12 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6903.82', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6903.82', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:29:04' WHERE `name`='btbi'
2018-04-01 04:29:12 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:29:12 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:29:12 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:29:12 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:29:12 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:29:12 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:29:12 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:29:12 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:29:12 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:29:12 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:29:13 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:29:13 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:29:13 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:29:13 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:29:13 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:29:14 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:29:14 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:29:14 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:29:14 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:29:14 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:29:14 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:29:14 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:29:14 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:29:14 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:29:15 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:29:15 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:29:15 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6904.14', '2018-04-01 04:29:07')
2018-04-01 04:29:15 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:29:16 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:29:16 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6904.14', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6904.14', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:29:07' WHERE `name`='btbi'
2018-04-01 04:29:16 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:29:16 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:29:16 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:29:16 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:29:16 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:29:16 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:29:16 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:29:16 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:29:16 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:29:16 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:29:16 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:29:16 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:29:16 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:29:16 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:29:16 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:29:17 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:29:17 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:29:17 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:29:17 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:29:17 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:29:17 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:29:17 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:29:17 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:29:17 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:29:19 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:29:19 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:29:19 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6897.96', '2018-04-01 04:29:10')
2018-04-01 04:29:19 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:29:19 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:29:19 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6897.96', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6897.96', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:29:10' WHERE `name`='btbi'
2018-04-01 04:29:19 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:29:19 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:29:19 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:29:19 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:29:19 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:29:19 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:29:19 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:29:19 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:29:19 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:29:19 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:29:19 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:29:19 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:29:19 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:29:19 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:29:19 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:29:21 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:29:21 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:29:21 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:29:21 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:29:21 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:29:21 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:29:21 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:29:21 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:29:21 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:29:23 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:29:23 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:29:23 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:29:23 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:29:23 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:29:23 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:29:23 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:29:23 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:29:23 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:29:23 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:29:23 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:29:23 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:29:24 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:29:24 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:29:24 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:29:24 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:29:24 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:29:24 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:29:24 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:29:24 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:29:24 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:29:26 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:29:26 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:29:26 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:29:26 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:29:26 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:29:26 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:29:26 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:29:26 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:29:26 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:29:26 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:29:26 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:29:26 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:29:27 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:29:27 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:29:27 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:29:27 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:29:27 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:29:27 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:29:27 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:29:27 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:29:27 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:29:29 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:29:29 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:29:29 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:29:29 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:29:29 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:29:29 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:29:29 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:29:29 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:29:29 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:29:29 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:29:29 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:29:29 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:29:31 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:29:31 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:29:31 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:29:31 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:29:31 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:29:31 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:29:31 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:29:31 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:29:31 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:29:33 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:29:33 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:29:33 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:29:33 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:29:33 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:29:33 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:29:33 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:29:33 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:29:33 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:29:33 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:29:33 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:29:33 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:29:34 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:29:34 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:29:34 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:29:34 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:29:34 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:29:34 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:29:34 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:29:34 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:29:34 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:29:37 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:29:37 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:29:37 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:29:37 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:29:37 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:29:37 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:29:37 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:29:37 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:29:37 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:29:37 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:29:37 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:29:37 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:29:38 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:29:38 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:29:38 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:29:38 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:29:38 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:29:38 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:29:38 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:29:38 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:29:38 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:29:40 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:29:40 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:29:40 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:29:40 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:29:40 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:29:40 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:29:40 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:29:40 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:29:40 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:29:40 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:29:40 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:29:40 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:29:41 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:29:41 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:29:41 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:29:41 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:29:41 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:29:41 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:29:41 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:29:41 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:29:41 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:29:43 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:29:43 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:29:43 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:29:43 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:29:43 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:29:43 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:29:43 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:29:43 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:29:43 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:29:43 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:29:43 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:29:43 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:29:45 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:29:45 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:29:45 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:29:45 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:29:45 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:29:45 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:29:45 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:29:45 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:29:45 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:29:47 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:29:47 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:29:47 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6910.83', '2018-04-01 04:29:39')
2018-04-01 04:29:47 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:29:47 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:29:47 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6910.83', `open`='7231.73', `high`='7231.73', `low`='7231.73', `close`='7231.73', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:29:39' WHERE `name`='btbi'
2018-04-01 04:29:47 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:29:47 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:29:47 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:29:47 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:29:47 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:29:47 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:29:47 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:29:47 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:29:47 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:29:47 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:29:47 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:29:47 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:29:47 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:29:47 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:29:47 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:29:48 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:29:48 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:29:48 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:29:48 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:29:48 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:29:48 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:29:48 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:29:48 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:29:48 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:29:50 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:29:50 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:29:50 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6914.99', '2018-04-01 04:29:43')
2018-04-01 04:29:50 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:29:50 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:29:50 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6914.99', `open`='7231.73', `high`='7231.73', `low`='7231.73', `close`='7231.73', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:29:43' WHERE `name`='btbi'
2018-04-01 04:29:50 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:29:50 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:29:50 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:29:50 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:29:50 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:29:50 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:29:50 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:29:50 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:29:50 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:29:50 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:29:50 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:29:50 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:29:50 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:29:50 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:29:50 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:29:52 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:29:52 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:29:52 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:29:52 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:29:52 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:29:52 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:29:52 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:29:52 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:29:52 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:29:53 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:29:53 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:29:53 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6907.10', '2018-04-01 04:29:45')
2018-04-01 04:29:53 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:29:53 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:29:53 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6907.10', `open`='7231.73', `high`='7231.73', `low`='7231.73', `close`='7231.73', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:29:45' WHERE `name`='btbi'
2018-04-01 04:29:53 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:29:53 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:29:53 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:29:54 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:29:54 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:29:54 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:29:54 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:29:54 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:29:54 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:29:54 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:29:54 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:29:54 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:29:54 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:29:54 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:29:54 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:29:55 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:29:55 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:29:55 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:29:55 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:29:55 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:29:55 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:29:55 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:29:55 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:29:55 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:29:57 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:29:57 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:29:57 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6907.11', '2018-04-01 04:29:49')
2018-04-01 04:29:57 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:29:57 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:29:57 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6907.11', `open`='7231.73', `high`='7231.73', `low`='7231.73', `close`='7231.73', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:29:49' WHERE `name`='btbi'
2018-04-01 04:29:57 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:29:57 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:29:57 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:29:57 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:29:57 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:29:57 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:29:57 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:29:57 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:29:57 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:29:57 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:29:57 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:29:57 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:29:57 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:29:57 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:29:57 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:29:58 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:29:58 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:29:58 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:29:58 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:29:58 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:29:58 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:29:58 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:29:58 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:29:59 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:30:00 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:30:00 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:30:00 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6912.44', '2018-04-01 04:29:51')
2018-04-01 04:30:00 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:30:00 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:30:00 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6912.44', `open`='7231.73', `high`='7231.73', `low`='7231.73', `close`='7231.73', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:29:51' WHERE `name`='btbi'
2018-04-01 04:30:00 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:30:00 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:30:00 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:30:00 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:30:00 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:30:00 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:30:00 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:30:00 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:30:00 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:30:00 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:30:00 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:30:00 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:30:00 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:30:00 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:30:00 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:30:24 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:30:24 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:30:24 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:30:24 [trace][yii\base\Controller::runAction] Route to run: init/hq
2018-04-01 04:30:24 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionHq()
2018-04-01 04:30:24 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:30:24 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:30:24 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:30:24 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:30:24 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:30:24 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:30:24 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:30:24 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:30:24 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:30:26 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:30:26 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:30:26 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6930.00', '2018-04-01 04:30:16')
2018-04-01 04:30:26 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:30:26 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:30:26 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6930.00', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6930.00', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:30:16' WHERE `name`='btbi'
2018-04-01 04:30:26 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:30:26 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:30:26 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:30:26 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:30:26 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:30:26 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:30:26 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:30:26 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:30:26 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:30:26 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:30:26 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:30:26 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:30:26 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:30:26 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:30:26 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:30:27 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:30:27 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:30:27 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:30:27 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:30:27 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:30:27 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:30:27 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:30:27 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:30:27 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:30:29 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:30:29 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:30:29 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6934.51', '2018-04-01 04:30:21')
2018-04-01 04:30:29 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:30:29 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:30:29 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6934.51', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6934.51', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:30:21' WHERE `name`='btbi'
2018-04-01 04:30:29 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:30:29 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:30:29 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:30:30 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:30:30 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:30:30 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:30:30 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:30:30 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:30:30 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:30:30 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:30:30 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:30:30 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:30:30 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:30:30 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:30:30 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:30:31 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:30:31 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:30:31 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:30:31 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:30:31 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:30:31 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:30:31 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:30:31 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:30:31 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:30:33 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:30:33 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:30:33 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6934.50', '2018-04-01 04:30:24')
2018-04-01 04:30:33 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:30:33 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:30:33 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6934.50', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6934.50', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:30:24' WHERE `name`='btbi'
2018-04-01 04:30:33 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:30:33 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:30:33 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:30:33 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:30:33 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:30:33 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:30:33 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:30:33 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:30:33 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:30:33 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:30:33 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:30:33 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:30:33 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:30:33 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:30:33 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:30:34 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:30:34 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:30:34 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:30:34 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:30:34 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:30:34 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:30:34 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:30:34 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:30:34 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:30:36 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:30:36 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:30:36 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6934.90', '2018-04-01 04:30:28')
2018-04-01 04:30:36 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:30:36 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:30:36 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6934.90', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6934.90', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:30:28' WHERE `name`='btbi'
2018-04-01 04:30:36 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:30:36 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:30:36 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:30:36 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:30:36 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:30:36 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:30:36 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:30:36 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:30:36 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:30:36 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:30:36 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:30:36 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:30:37 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:30:37 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:30:37 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:30:38 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:30:38 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:30:38 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:30:38 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:30:38 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:30:38 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:30:38 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:30:38 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:30:38 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:30:39 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:30:40 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:30:40 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6932.41', '2018-04-01 04:30:31')
2018-04-01 04:30:40 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:30:40 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:30:40 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6932.41', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6932.41', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:30:31' WHERE `name`='btbi'
2018-04-01 04:30:40 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:30:40 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:30:40 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:30:40 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:30:40 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:30:40 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:30:40 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:30:40 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:30:40 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:30:40 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:30:40 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:30:40 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:30:40 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:30:40 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:30:40 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:30:41 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:30:41 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:30:41 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:30:41 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:30:41 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:30:41 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:30:41 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:30:41 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:30:41 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:30:43 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:30:43 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:30:43 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6932.41', '2018-04-01 04:30:32')
2018-04-01 04:30:43 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:30:43 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:30:43 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6932.41', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6932.41', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:30:32' WHERE `name`='btbi'
2018-04-01 04:30:43 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:30:43 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:30:43 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:30:43 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:30:43 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:30:43 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:30:43 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:30:43 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:30:43 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:30:43 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:30:43 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:30:43 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:30:43 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:30:43 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:30:43 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:30:45 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:30:45 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:30:45 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:30:45 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:30:45 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:30:45 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:30:45 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:30:45 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:30:45 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:30:46 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:30:46 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:30:46 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6931.30', '2018-04-01 04:30:37')
2018-04-01 04:30:46 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:30:46 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:30:46 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6931.30', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6931.30', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:30:37' WHERE `name`='btbi'
2018-04-01 04:30:46 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:30:46 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:30:46 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:30:47 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:30:47 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:30:47 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:30:47 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:30:47 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:30:47 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:30:47 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:30:47 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:30:47 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:30:47 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:30:47 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:30:47 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:30:48 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:30:48 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:30:48 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:30:48 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:30:48 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:30:48 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:30:48 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:30:48 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:30:48 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:30:50 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:30:50 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:30:50 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6930.01', '2018-04-01 04:30:41')
2018-04-01 04:30:50 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:30:50 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:30:50 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6930.01', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6930.01', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:30:41' WHERE `name`='btbi'
2018-04-01 04:30:50 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:30:50 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:30:50 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:30:50 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:30:50 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:30:50 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:30:50 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:30:50 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:30:50 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:30:50 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:30:50 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:30:50 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:30:50 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:30:50 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:30:50 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:30:51 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:30:52 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:30:52 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:30:52 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:30:52 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:30:52 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:30:52 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:30:52 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:30:52 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:30:53 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:30:53 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:30:53 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6930.01', '2018-04-01 04:30:44')
2018-04-01 04:30:53 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:30:53 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:30:53 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6930.01', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6930.01', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:30:44' WHERE `name`='btbi'
2018-04-01 04:30:53 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:30:53 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:30:53 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:30:54 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:30:54 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:30:54 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:30:54 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:30:54 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:30:54 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:30:54 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:30:54 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:30:54 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:30:54 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:30:54 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:30:54 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:30:55 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:30:55 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:30:55 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:30:55 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:30:55 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:30:55 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:30:55 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:30:55 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:30:55 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:30:57 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:30:57 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:30:57 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6930.02', '2018-04-01 04:30:48')
2018-04-01 04:30:57 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:30:57 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:30:57 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6930.02', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6930.02', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:30:48' WHERE `name`='btbi'
2018-04-01 04:30:57 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:30:57 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:30:57 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:30:57 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:30:57 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:30:57 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:30:57 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:30:57 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:30:57 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:30:57 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:30:57 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:30:57 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:30:57 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:30:57 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:30:57 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:30:58 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:30:58 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:30:58 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:30:58 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:30:58 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:30:58 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:30:58 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:30:58 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:30:58 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:31:00 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:31:00 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:31:00 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6930.01', '2018-04-01 04:30:52')
2018-04-01 04:31:00 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:31:00 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:31:00 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6930.01', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6930.01', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:30:52' WHERE `name`='btbi'
2018-04-01 04:31:00 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:31:00 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:31:00 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:31:00 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:31:00 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:31:00 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:31:00 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:31:00 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:31:00 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:31:00 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:31:01 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:31:01 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:31:01 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:31:01 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:31:01 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:31:02 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:31:02 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:31:02 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:31:02 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:31:02 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:31:02 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:31:02 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:31:02 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:31:02 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:31:03 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:31:03 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:31:03 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6923.29', '2018-04-01 04:30:56')
2018-04-01 04:31:03 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:31:03 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:31:03 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6923.29', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6923.29', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:30:56' WHERE `name`='btbi'
2018-04-01 04:31:03 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:31:03 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:31:03 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:31:04 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:31:04 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:31:04 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:31:04 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:31:04 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:31:04 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:31:04 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:31:04 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:31:04 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:31:04 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:31:04 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:31:04 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:31:05 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:31:05 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:31:05 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:31:05 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:31:05 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:31:05 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:31:05 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:31:05 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:31:05 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:31:07 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:31:07 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:31:07 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6915.35', '2018-04-01 04:30:58')
2018-04-01 04:31:07 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:31:07 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:31:07 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6915.35', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6915.35', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:30:58' WHERE `name`='btbi'
2018-04-01 04:31:07 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:31:07 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:31:07 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:31:07 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:31:07 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:31:07 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:31:07 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:31:07 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:31:07 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:31:07 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:31:07 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:31:07 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:31:07 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:31:07 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:31:07 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:31:08 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:31:08 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:31:08 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:31:08 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:31:08 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:31:08 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:31:08 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:31:08 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:31:08 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:31:10 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:31:10 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:31:10 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6920.67', '2018-04-01 04:31:02')
2018-04-01 04:31:10 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:31:10 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:31:10 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6920.67', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6920.67', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:31:02' WHERE `name`='btbi'
2018-04-01 04:31:10 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:31:10 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:31:10 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:31:10 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:31:10 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:31:10 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:31:10 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:31:10 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:31:10 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:31:10 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:31:11 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:31:11 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:31:11 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:31:11 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:31:11 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:31:12 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:31:12 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:31:12 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:31:12 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:31:12 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:31:12 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:31:12 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:31:12 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:31:12 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:31:13 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:31:13 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:31:13 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6914.25', '2018-04-01 04:31:05')
2018-04-01 04:31:13 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:31:13 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:31:13 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6914.25', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6914.25', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:31:05' WHERE `name`='btbi'
2018-04-01 04:31:13 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:31:13 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:31:13 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:31:14 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:31:14 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:31:14 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:31:14 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:31:14 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:31:14 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:31:14 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:31:14 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:31:14 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:31:14 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:31:14 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:31:14 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:31:15 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:31:15 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:31:15 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:31:15 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:31:15 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:31:15 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:31:15 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:31:15 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:31:15 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:31:17 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:31:17 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:31:17 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6914.32', '2018-04-01 04:31:08')
2018-04-01 04:31:17 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:31:17 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:31:17 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6914.32', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6914.32', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:31:08' WHERE `name`='btbi'
2018-04-01 04:31:17 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:31:17 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:31:17 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:31:17 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:31:17 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:31:17 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:31:17 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:31:17 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:31:17 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:31:17 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:31:17 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:31:17 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:31:17 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:31:17 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:31:17 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:31:19 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:31:19 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:31:19 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:31:19 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:31:19 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:31:19 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:31:19 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:31:19 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:31:19 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:31:20 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:31:20 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:31:20 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6914.71', '2018-04-01 04:31:12')
2018-04-01 04:31:20 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:31:20 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:31:20 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6914.71', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6914.71', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:31:12' WHERE `name`='btbi'
2018-04-01 04:31:20 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:31:20 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:31:20 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:31:21 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:31:21 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:31:21 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:31:21 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:31:21 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:31:21 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:31:21 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:31:21 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:31:21 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:31:21 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:31:21 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:31:21 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:31:22 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:31:22 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:31:22 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:31:22 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:31:22 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:31:22 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:31:22 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:31:22 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:31:22 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:31:23 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:31:23 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:31:23 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6911.97', '2018-04-01 04:31:15')
2018-04-01 04:31:23 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:31:23 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:31:24 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6911.97', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6911.97', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:31:15' WHERE `name`='btbi'
2018-04-01 04:31:24 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:31:24 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:31:24 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:31:24 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:31:24 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:31:24 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:31:24 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:31:24 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:31:24 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:31:24 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:31:24 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:31:24 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:31:24 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:31:24 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:31:24 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:31:25 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:31:25 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:31:25 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:31:25 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:31:25 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:31:25 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:31:25 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:31:25 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:31:25 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:31:27 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:31:27 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:31:27 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6911.97', '2018-04-01 04:31:19')
2018-04-01 04:31:27 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:31:27 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:31:27 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6911.97', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6911.97', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:31:19' WHERE `name`='btbi'
2018-04-01 04:31:27 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:31:27 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:31:27 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:31:27 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:31:27 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:31:27 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:31:27 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:31:27 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:31:27 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:31:27 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:31:27 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:31:27 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:31:27 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:31:27 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:31:27 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:31:28 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:31:29 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:31:29 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:31:29 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:31:29 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:31:29 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:31:29 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:31:29 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:31:29 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:31:30 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:31:30 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:31:30 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6911.97', '2018-04-01 04:31:21')
2018-04-01 04:31:30 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:31:30 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:31:30 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6911.97', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6911.97', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:31:21' WHERE `name`='btbi'
2018-04-01 04:31:30 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:31:30 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:31:30 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:31:30 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:31:30 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:31:30 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:31:30 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:31:30 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:31:31 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:31:31 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:31:31 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:31:31 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:31:31 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:31:31 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:31:31 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:31:32 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:31:32 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:31:32 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:31:32 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:31:32 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:31:32 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:31:32 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:31:32 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:31:32 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:31:33 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:31:33 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:31:33 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6911.97', '2018-04-01 04:31:26')
2018-04-01 04:31:33 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:31:33 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:31:33 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6911.97', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6911.97', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:31:26' WHERE `name`='btbi'
2018-04-01 04:31:33 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:31:33 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:31:33 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:31:34 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:31:34 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:31:34 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:31:34 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:31:34 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:31:34 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:31:34 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:31:34 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:31:34 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:31:34 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:31:34 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:31:34 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:31:35 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:31:35 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:31:35 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:31:35 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:31:35 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:31:35 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:31:35 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:31:35 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:31:35 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:31:37 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:31:37 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:31:37 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6911.97', '2018-04-01 04:31:27')
2018-04-01 04:31:37 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:31:37 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:31:37 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6911.97', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6911.97', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:31:27' WHERE `name`='btbi'
2018-04-01 04:31:37 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:31:37 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:31:37 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:31:37 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:31:37 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:31:37 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:31:37 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:31:37 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:31:37 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:31:37 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:31:37 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:31:37 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:31:37 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:31:37 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:31:37 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:31:39 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:31:39 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:31:39 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:31:39 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:31:39 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:31:39 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:31:39 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:31:39 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:31:39 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:31:40 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:31:40 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:31:40 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6911.97', '2018-04-01 04:31:32')
2018-04-01 04:31:40 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:31:40 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:31:40 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6911.97', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6911.97', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:31:32' WHERE `name`='btbi'
2018-04-01 04:31:40 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:31:40 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:31:40 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:31:40 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:31:40 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:31:40 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:31:40 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:31:40 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:31:41 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:31:41 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:31:41 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:31:41 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:31:41 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:31:41 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:31:41 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:31:42 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:31:42 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:31:42 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:31:42 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:31:42 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:31:42 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:31:42 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:31:42 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:31:42 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:31:43 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:31:43 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:31:43 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6911.97', '2018-04-01 04:31:35')
2018-04-01 04:31:43 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:31:44 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:31:44 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6911.97', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6911.97', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:31:35' WHERE `name`='btbi'
2018-04-01 04:31:44 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:31:44 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:31:44 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:31:44 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:31:44 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:31:44 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:31:44 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:31:44 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:31:44 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:31:44 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:31:44 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:31:44 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:31:44 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:31:44 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:31:44 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:31:45 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:31:45 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:31:45 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:31:45 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:31:45 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:31:45 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:31:45 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:31:45 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:31:45 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:31:47 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:31:47 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:31:47 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6911.97', '2018-04-01 04:31:39')
2018-04-01 04:31:47 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:31:47 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:31:47 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6911.97', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6911.97', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:31:39' WHERE `name`='btbi'
2018-04-01 04:31:47 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:31:47 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:31:47 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:31:47 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:31:47 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:31:47 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:31:47 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:31:47 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:31:47 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:31:47 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:31:47 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:31:47 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:31:47 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:31:47 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:31:47 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:31:49 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:31:49 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:31:49 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:31:49 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:31:49 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:31:49 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:31:49 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:31:49 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:31:49 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:31:50 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:31:50 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:31:50 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6911.97', '2018-04-01 04:31:42')
2018-04-01 04:31:50 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:31:50 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:31:50 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6911.97', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6911.97', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:31:42' WHERE `name`='btbi'
2018-04-01 04:31:50 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:31:50 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:31:50 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:31:51 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:31:51 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:31:51 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:31:51 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:31:51 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:31:51 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:31:51 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:31:51 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:31:51 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:31:51 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:31:51 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:31:51 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:31:52 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:31:52 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:31:52 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:31:52 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:31:52 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:31:52 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:31:52 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:31:52 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:31:52 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:31:54 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:31:54 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:31:54 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6911.97', '2018-04-01 04:31:45')
2018-04-01 04:31:54 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:31:54 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:31:54 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6911.97', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6911.97', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:31:45' WHERE `name`='btbi'
2018-04-01 04:31:54 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:31:54 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:31:54 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:31:54 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:31:54 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:31:54 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:31:54 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:31:54 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:31:54 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:31:54 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:31:54 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:31:54 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:31:54 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:31:54 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:31:54 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:31:55 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:31:55 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:31:55 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:31:55 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:31:55 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:31:55 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:31:55 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:31:55 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:31:55 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:31:57 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:31:57 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:31:57 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6911.97', '2018-04-01 04:31:48')
2018-04-01 04:31:57 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:31:57 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:31:57 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6911.97', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6911.97', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:31:48' WHERE `name`='btbi'
2018-04-01 04:31:57 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:31:57 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:31:57 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:31:57 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:31:57 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:31:57 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:31:57 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:31:57 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:31:57 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:31:57 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:31:57 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:31:57 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:31:57 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:31:57 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:31:57 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:31:59 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:31:59 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:31:59 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:31:59 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:31:59 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:31:59 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:31:59 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:31:59 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:31:59 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:32:00 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:32:00 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:32:00 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6911.97', '2018-04-01 04:31:52')
2018-04-01 04:32:00 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:32:00 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:32:00 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6911.97', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6911.97', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:31:52' WHERE `name`='btbi'
2018-04-01 04:32:00 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:32:00 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:32:00 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:32:01 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:32:01 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:32:01 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:32:01 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:32:01 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:32:01 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:32:01 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:32:01 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:32:01 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:32:01 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:32:01 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:32:01 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:32:02 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:32:02 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:32:02 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:32:02 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:32:02 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:32:02 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:32:02 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:32:02 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:32:02 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:32:04 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:32:04 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:32:04 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6911.97', '2018-04-01 04:31:55')
2018-04-01 04:32:04 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:32:04 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:32:04 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6911.97', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6911.97', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:31:55' WHERE `name`='btbi'
2018-04-01 04:32:04 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:32:04 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:32:04 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:32:04 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:32:04 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:32:04 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:32:04 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:32:04 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:32:04 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:32:04 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:32:04 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:32:04 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:32:04 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:32:04 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:32:04 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:32:05 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:32:05 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:32:05 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:32:05 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:32:05 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:32:05 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:32:05 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:32:05 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:32:05 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:32:07 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:32:07 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:32:07 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6911.97', '2018-04-01 04:31:58')
2018-04-01 04:32:07 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:32:07 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:32:07 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6911.97', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6911.97', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:31:58' WHERE `name`='btbi'
2018-04-01 04:32:07 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:32:07 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:32:07 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:32:07 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:32:07 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:32:07 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:32:07 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:32:07 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:32:07 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:32:07 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:32:07 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:32:07 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:32:07 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:32:07 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:32:07 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:32:09 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:32:09 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:32:09 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:32:09 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:32:09 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:32:09 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:32:09 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:32:09 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:32:09 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:32:10 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:32:10 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:32:10 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6911.97', '2018-04-01 04:32:01')
2018-04-01 04:32:10 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:32:10 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:32:11 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6911.97', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6911.97', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:32:01' WHERE `name`='btbi'
2018-04-01 04:32:11 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:32:11 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:32:11 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:32:11 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:32:11 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:32:11 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:32:11 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:32:11 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:32:11 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:32:11 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:32:11 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:32:11 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:32:11 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:32:11 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:32:11 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:32:12 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:32:12 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:32:12 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:32:12 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:32:12 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:32:12 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:32:12 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:32:12 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:32:12 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:32:14 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:32:14 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:32:14 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6911.97', '2018-04-01 04:32:05')
2018-04-01 04:32:14 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:32:14 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:32:14 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6911.97', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6911.97', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:32:05' WHERE `name`='btbi'
2018-04-01 04:32:14 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:32:14 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:32:14 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:32:14 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:32:14 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:32:14 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:32:14 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:32:14 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:32:14 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:32:14 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:32:14 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:32:14 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:32:14 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:32:14 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:32:14 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:32:16 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:32:16 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:32:16 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:32:16 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:32:16 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:32:16 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:32:16 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:32:16 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:32:16 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:32:17 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:32:17 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:32:17 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6911.97', '2018-04-01 04:32:07')
2018-04-01 04:32:17 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:32:17 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:32:17 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6911.97', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6911.97', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:32:07' WHERE `name`='btbi'
2018-04-01 04:32:17 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:32:17 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:32:17 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:32:18 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:32:18 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:32:18 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:32:18 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:32:18 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:32:18 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:32:18 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:32:18 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:32:18 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:32:18 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:32:18 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:32:18 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:32:19 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:32:19 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:32:19 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:32:19 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:32:19 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:32:19 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:32:19 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:32:19 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:32:19 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:32:21 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:32:21 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:32:21 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6903.00', '2018-04-01 04:32:12')
2018-04-01 04:32:21 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:32:21 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:32:21 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6903.00', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6903.00', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:32:12' WHERE `name`='btbi'
2018-04-01 04:32:21 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:32:21 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:32:21 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:32:21 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:32:21 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:32:21 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:32:21 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:32:21 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:32:21 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:32:21 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:32:21 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:32:21 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:32:21 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:32:21 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:32:21 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:32:22 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:32:22 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:32:22 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:32:22 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:32:22 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:32:22 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:32:22 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:32:22 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:32:22 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:32:24 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:32:24 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:32:24 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6903.00', '2018-04-01 04:32:15')
2018-04-01 04:32:24 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:32:24 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:32:24 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6903.00', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6903.00', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:32:15' WHERE `name`='btbi'
2018-04-01 04:32:24 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:32:24 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:32:24 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:32:24 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:32:24 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:32:24 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:32:24 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:32:24 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:32:24 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:32:24 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:32:24 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:32:24 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:32:24 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:32:24 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:32:24 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:32:26 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:32:26 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:32:26 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:32:26 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:32:26 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:32:26 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:32:26 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:32:26 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:32:26 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:32:27 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:32:27 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:32:27 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6903.15', '2018-04-01 04:32:19')
2018-04-01 04:32:27 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:32:27 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:32:27 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6903.15', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6903.15', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:32:19' WHERE `name`='btbi'
2018-04-01 04:32:27 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:32:27 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:32:27 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:32:28 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:32:28 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:32:28 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:32:28 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:32:28 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:32:28 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:32:28 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:32:28 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:32:28 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:32:28 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:32:28 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:32:28 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:32:29 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:32:29 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:32:29 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:32:29 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:32:29 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:32:29 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:32:29 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:32:29 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:32:29 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:32:31 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:32:31 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:32:31 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6903.65', '2018-04-01 04:32:22')
2018-04-01 04:32:31 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:32:31 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:32:31 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6903.65', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6903.65', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:32:22' WHERE `name`='btbi'
2018-04-01 04:32:31 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:32:31 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:32:31 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:32:31 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:32:31 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:32:31 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:32:31 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:32:31 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:32:31 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:32:31 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:32:31 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:32:31 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:32:31 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:32:31 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:32:31 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:32:32 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:32:32 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:32:32 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:32:32 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:32:32 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:32:32 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:32:32 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:32:32 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:32:32 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:32:34 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:32:34 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:32:34 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6903.65', '2018-04-01 04:32:26')
2018-04-01 04:32:34 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:32:34 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:32:34 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6903.65', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6903.65', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:32:26' WHERE `name`='btbi'
2018-04-01 04:32:34 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:32:34 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:32:34 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:32:34 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:32:34 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:32:34 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:32:34 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:32:34 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:32:34 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:32:34 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:32:34 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:32:34 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:32:34 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:32:34 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:32:34 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:32:36 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:32:36 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:32:36 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:32:36 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:32:36 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:32:36 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:32:36 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:32:36 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:32:36 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:32:37 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:32:37 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:32:37 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6903.66', '2018-04-01 04:32:29')
2018-04-01 04:32:37 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:32:38 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:32:38 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6903.66', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6903.66', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:32:29' WHERE `name`='btbi'
2018-04-01 04:32:38 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:32:38 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:32:38 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:32:38 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:32:38 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:32:38 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:32:38 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:32:38 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:32:38 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:32:38 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:32:38 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:32:38 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:32:38 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:32:38 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:32:38 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:32:39 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:32:39 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:32:39 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:32:39 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:32:39 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:32:39 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:32:39 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:32:39 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:32:39 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:32:41 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:32:41 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:32:41 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6903.66', '2018-04-01 04:32:32')
2018-04-01 04:32:41 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:32:41 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:32:41 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6903.66', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6903.66', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:32:32' WHERE `name`='btbi'
2018-04-01 04:32:41 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:32:41 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:32:41 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:32:41 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:32:41 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:32:41 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:32:41 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:32:41 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:32:41 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:32:41 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:32:41 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:32:41 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:32:41 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:32:41 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:32:41 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:32:43 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:32:43 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:32:43 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:32:43 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:32:43 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:32:43 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:32:43 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:32:43 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:32:43 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:32:44 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:32:44 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:32:45 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6903.65', '2018-04-01 04:32:37')
2018-04-01 04:32:45 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:32:45 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:32:45 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6903.65', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6903.65', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:32:37' WHERE `name`='btbi'
2018-04-01 04:32:45 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:32:45 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:32:45 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:32:45 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:32:45 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:32:45 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:32:45 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:32:45 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:32:45 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:32:45 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:32:45 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:32:45 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:32:45 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:32:45 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:32:45 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:32:46 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:32:46 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:32:46 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:32:46 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:32:46 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:32:46 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:32:46 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:32:46 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:32:46 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:32:48 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:32:48 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:32:48 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6903.66', '2018-04-01 04:32:39')
2018-04-01 04:32:48 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:32:48 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:32:48 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6903.66', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6903.66', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:32:39' WHERE `name`='btbi'
2018-04-01 04:32:48 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:32:48 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:32:48 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:32:48 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:32:48 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:32:48 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:32:48 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:32:48 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:32:48 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:32:48 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:32:48 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:32:48 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:32:48 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:32:48 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:32:48 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:32:50 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:32:50 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:32:50 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:32:50 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:32:50 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:32:50 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:32:50 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:32:50 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:32:50 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:32:51 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:32:51 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:32:51 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6903.65', '2018-04-01 04:32:43')
2018-04-01 04:32:51 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:32:51 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:32:51 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6903.65', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6903.65', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:32:43' WHERE `name`='btbi'
2018-04-01 04:32:51 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:32:51 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:32:51 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:32:52 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:32:52 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:32:52 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:32:52 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:32:52 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:32:52 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:32:52 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:32:52 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:32:52 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:32:52 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:32:52 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:32:52 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:32:53 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:32:53 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:32:53 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:32:53 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:32:53 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:32:53 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:32:53 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:32:53 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:32:53 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:32:55 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:32:55 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:32:55 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6903.65', '2018-04-01 04:32:46')
2018-04-01 04:32:55 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:32:55 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:32:55 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6903.65', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6903.65', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:32:46' WHERE `name`='btbi'
2018-04-01 04:32:55 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:32:55 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:32:55 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:32:55 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:32:55 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:32:55 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:32:55 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:32:55 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:32:55 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:32:55 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:32:55 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:32:55 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:32:55 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:32:55 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:32:55 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:32:56 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:32:56 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:32:56 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:32:56 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:32:56 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:32:56 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:32:56 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:32:56 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:32:56 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:32:58 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:32:58 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:32:58 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6903.65', '2018-04-01 04:32:50')
2018-04-01 04:32:58 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:32:58 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:32:58 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6903.65', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6903.65', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:32:50' WHERE `name`='btbi'
2018-04-01 04:32:58 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:32:58 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:32:58 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:32:58 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:32:58 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:32:58 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:32:58 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:32:58 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:32:58 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:32:58 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:32:58 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:32:58 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:32:58 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:32:58 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:32:58 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:33:00 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:33:00 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:33:00 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:33:00 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:33:00 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:33:00 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:33:00 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:33:00 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:33:00 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:33:01 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:33:01 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:33:01 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6903.65', '2018-04-01 04:32:52')
2018-04-01 04:33:01 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:33:01 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:33:01 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6903.65', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6903.65', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:32:52' WHERE `name`='btbi'
2018-04-01 04:33:01 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:33:01 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:33:01 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:33:02 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:33:02 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:33:02 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:33:02 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:33:02 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:33:02 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:33:02 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:33:02 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:33:02 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:33:02 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:33:02 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:33:02 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:33:03 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:33:03 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:33:03 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:33:03 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:33:03 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:33:03 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:33:03 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:33:03 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:33:03 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:33:05 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:33:05 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:33:05 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6903.70', '2018-04-01 04:32:56')
2018-04-01 04:33:05 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:33:05 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:33:05 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6903.70', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6903.70', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:32:56' WHERE `name`='btbi'
2018-04-01 04:33:05 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:33:05 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:33:05 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:33:05 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:33:05 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:33:05 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:33:05 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:33:05 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:33:05 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:33:05 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:33:05 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:33:05 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:33:05 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:33:05 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:33:05 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:33:07 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:33:07 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:33:07 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:33:07 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:33:07 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:33:07 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:33:07 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:33:07 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:33:07 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:33:08 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:33:08 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:33:08 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6903.70', '2018-04-01 04:33:00')
2018-04-01 04:33:08 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:33:08 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:33:08 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6903.70', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6903.70', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:33:00' WHERE `name`='btbi'
2018-04-01 04:33:08 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:33:08 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:33:08 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:33:09 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:33:09 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:33:09 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:33:09 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:33:09 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:33:09 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:33:09 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:33:09 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:33:09 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:33:09 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:33:09 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:33:09 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:33:10 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:33:10 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:33:10 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:33:10 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:33:10 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:33:10 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:33:10 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:33:10 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:33:10 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:33:11 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:33:12 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:33:12 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6903.70', '2018-04-01 04:33:03')
2018-04-01 04:33:12 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:33:12 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:33:12 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6903.70', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6903.70', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:33:03' WHERE `name`='btbi'
2018-04-01 04:33:12 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:33:12 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:33:12 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:33:12 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:33:12 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:33:12 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:33:12 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:33:12 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:33:12 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:33:12 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:33:12 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:33:12 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:33:12 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:33:12 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:33:12 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:33:13 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:33:13 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:33:13 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:33:13 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:33:13 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:33:13 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:33:13 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:33:13 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:33:13 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:33:15 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:33:15 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:33:15 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6903.70', '2018-04-01 04:33:07')
2018-04-01 04:33:15 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:33:15 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:33:15 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6903.70', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6903.70', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:33:07' WHERE `name`='btbi'
2018-04-01 04:33:15 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:33:15 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:33:15 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:33:15 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:33:15 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:33:15 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:33:15 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:33:15 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:33:16 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:33:16 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:33:16 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:33:16 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:33:16 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:33:16 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:33:16 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:33:17 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:33:17 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:33:17 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:33:17 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:33:17 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:33:17 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:33:17 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:33:17 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:33:17 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:33:18 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:33:18 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:33:18 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6903.70', '2018-04-01 04:33:10')
2018-04-01 04:33:18 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:33:18 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:33:18 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6903.70', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6903.70', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:33:10' WHERE `name`='btbi'
2018-04-01 04:33:18 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:33:18 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:33:18 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:33:19 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:33:19 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:33:19 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:33:19 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:33:19 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:33:19 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:33:19 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:33:19 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:33:19 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:33:19 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:33:19 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:33:19 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:33:20 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:33:20 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:33:20 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:33:20 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:33:20 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:33:20 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:33:20 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:33:20 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:33:20 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:33:22 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:33:22 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:33:22 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6903.70', '2018-04-01 04:33:14')
2018-04-01 04:33:22 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:33:22 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:33:22 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6903.70', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6903.70', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:33:14' WHERE `name`='btbi'
2018-04-01 04:33:22 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:33:22 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:33:22 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:33:22 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:33:22 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:33:22 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:33:22 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:33:22 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:33:22 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:33:22 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:33:22 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:33:22 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:33:22 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:33:22 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:33:22 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:33:23 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:33:23 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:33:23 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:33:23 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:33:23 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:33:23 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:33:23 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:33:23 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:33:23 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:33:25 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:33:25 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:33:25 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6903.70', '2018-04-01 04:33:16')
2018-04-01 04:33:25 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:33:25 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:33:25 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6903.70', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6903.70', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:33:16' WHERE `name`='btbi'
2018-04-01 04:33:25 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:33:25 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:33:25 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:33:25 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:33:25 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:33:25 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:33:25 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:33:25 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:33:25 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:33:25 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:33:25 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:33:25 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:33:25 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:33:25 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:33:25 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:33:27 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:33:27 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:33:27 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:33:27 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:33:27 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:33:27 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:33:27 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:33:27 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:33:27 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:33:28 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:33:28 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:33:28 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6903.70', '2018-04-01 04:33:21')
2018-04-01 04:33:28 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:33:28 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:33:28 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6903.70', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6903.70', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:33:21' WHERE `name`='btbi'
2018-04-01 04:33:28 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:33:28 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:33:28 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:33:29 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:33:29 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:33:29 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:33:29 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:33:29 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:33:29 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:33:29 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:33:29 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:33:29 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:33:29 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:33:29 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:33:29 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:33:30 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:33:30 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:33:30 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:33:30 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:33:30 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:33:30 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:33:30 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:33:30 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:33:30 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:33:32 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:33:32 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:33:32 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6903.70', '2018-04-01 04:33:24')
2018-04-01 04:33:32 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:33:32 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:33:32 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6903.70', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6903.70', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:33:24' WHERE `name`='btbi'
2018-04-01 04:33:33 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:33:33 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:33:33 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:33:33 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:33:33 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:33:33 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:33:33 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:33:33 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:33:33 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:33:33 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:33:33 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:33:33 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:33:33 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:33:33 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:33:33 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:33:34 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:33:34 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:33:34 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:33:34 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:33:34 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:33:34 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:33:34 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:33:34 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:33:34 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:33:36 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:33:36 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:33:36 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6903.70', '2018-04-01 04:33:28')
2018-04-01 04:33:36 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:33:36 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:33:36 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6903.70', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6903.70', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:33:28' WHERE `name`='btbi'
2018-04-01 04:33:36 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:33:36 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:33:36 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:33:36 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:33:36 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:33:36 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:33:36 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:33:36 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:33:36 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:33:36 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:33:36 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:33:36 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:33:36 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:33:36 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:33:36 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:33:38 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:33:38 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:33:38 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:33:38 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:33:38 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:33:38 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:33:38 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:33:38 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:33:38 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:33:39 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:33:39 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:33:39 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6903.70', '2018-04-01 04:33:30')
2018-04-01 04:33:39 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:33:39 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:33:39 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6903.70', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6903.70', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:33:30' WHERE `name`='btbi'
2018-04-01 04:33:39 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:33:39 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:33:39 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:33:39 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:33:39 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:33:39 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:33:39 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:33:39 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:33:39 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:33:39 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:33:39 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:33:39 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:33:39 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:33:39 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:33:39 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:33:41 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:33:41 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:33:41 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:33:41 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:33:41 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:33:41 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:33:41 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:33:41 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:33:41 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:33:42 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:33:42 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:33:42 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6903.70', '2018-04-01 04:33:34')
2018-04-01 04:33:42 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:33:42 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:33:42 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6903.70', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6903.70', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:33:34' WHERE `name`='btbi'
2018-04-01 04:33:42 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:33:42 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:33:42 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:33:43 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:33:43 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:33:43 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:33:43 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:33:43 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:33:43 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:33:43 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:33:43 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:33:43 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:33:43 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:33:43 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:33:43 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:33:44 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:33:44 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:33:44 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:33:44 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:33:44 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:33:44 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:33:44 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:33:44 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:33:44 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:33:46 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:33:46 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:33:46 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6903.70', '2018-04-01 04:33:37')
2018-04-01 04:33:46 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:33:46 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:33:46 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6903.70', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6903.70', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:33:37' WHERE `name`='btbi'
2018-04-01 04:33:46 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:33:46 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:33:46 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:33:46 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:33:46 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:33:46 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:33:46 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:33:46 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:33:46 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:33:46 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:33:46 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:33:46 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:33:46 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:33:46 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:33:46 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:33:47 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:33:47 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:33:47 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:33:47 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:33:47 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:33:47 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:33:47 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:33:47 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:33:47 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:33:49 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:33:49 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:33:49 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6903.70', '2018-04-01 04:33:41')
2018-04-01 04:33:49 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:33:49 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:33:49 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6903.70', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6903.70', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:33:41' WHERE `name`='btbi'
2018-04-01 04:33:49 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:33:49 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:33:49 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:33:49 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:33:49 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:33:49 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:33:49 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:33:49 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:33:49 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:33:49 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:33:49 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:33:49 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:33:49 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:33:49 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:33:49 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:33:51 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:33:51 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:33:51 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:33:51 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:33:51 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:33:51 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:33:51 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:33:51 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:33:51 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:33:52 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:33:52 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:33:52 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6903.72', '2018-04-01 04:33:44')
2018-04-01 04:33:52 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:33:52 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:33:52 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6903.72', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6903.72', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:33:44' WHERE `name`='btbi'
2018-04-01 04:33:52 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:33:52 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:33:52 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:33:52 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:33:52 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:33:52 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:33:52 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:33:52 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:33:53 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:33:53 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:33:53 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:33:53 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:33:53 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:33:53 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:33:53 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:33:54 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:33:54 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:33:54 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:33:54 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:33:54 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:33:54 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:33:54 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:33:54 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:33:54 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:33:55 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:33:55 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:33:55 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6903.00', '2018-04-01 04:33:47')
2018-04-01 04:33:55 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:33:55 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:33:55 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6903.00', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6903.00', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:33:47' WHERE `name`='btbi'
2018-04-01 04:33:55 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:33:56 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:33:56 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:33:56 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:33:56 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:33:56 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:33:56 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:33:56 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:33:56 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:33:56 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:33:56 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:33:56 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:33:56 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:33:56 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:33:56 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:33:57 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:33:57 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:33:57 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:33:57 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:33:57 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:33:57 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:33:57 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:33:57 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:33:57 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:33:59 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:33:59 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:33:59 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6903.00', '2018-04-01 04:33:51')
2018-04-01 04:33:59 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:33:59 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:33:59 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6903.00', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6903.00', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:33:51' WHERE `name`='btbi'
2018-04-01 04:33:59 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:33:59 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:33:59 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:33:59 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:33:59 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:33:59 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:33:59 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:33:59 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:33:59 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:33:59 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:33:59 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:33:59 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:33:59 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:33:59 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:33:59 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:34:01 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:34:01 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:34:01 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:34:01 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:34:01 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:34:01 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:34:01 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:34:01 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:34:01 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:34:02 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:34:02 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:34:02 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6903.01', '2018-04-01 04:33:53')
2018-04-01 04:34:02 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:34:02 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:34:02 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6903.01', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6903.01', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:33:53' WHERE `name`='btbi'
2018-04-01 04:34:02 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:34:02 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:34:02 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:34:03 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:34:03 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:34:03 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:34:03 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:34:03 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:34:03 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:34:03 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:34:03 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:34:03 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:34:03 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:34:03 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:34:03 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:34:04 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:34:04 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:34:04 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:34:04 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:34:04 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:34:04 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:34:04 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:34:04 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:34:04 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:34:06 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:34:06 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:34:06 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6903.00', '2018-04-01 04:33:56')
2018-04-01 04:34:06 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:34:06 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:34:06 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6903.00', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6903.00', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:33:56' WHERE `name`='btbi'
2018-04-01 04:34:06 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:34:06 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:34:06 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:34:06 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:34:06 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:34:06 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:34:06 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:34:06 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:34:06 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:34:06 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:34:06 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:34:06 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:34:06 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:34:06 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:34:06 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:34:07 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:34:07 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:34:07 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:34:07 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:34:07 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:34:07 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:34:07 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:34:07 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:34:07 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:34:09 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:34:09 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:34:09 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6903.00', '2018-04-01 04:33:58')
2018-04-01 04:34:09 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:34:09 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:34:09 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6903.00', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6903.00', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:33:58' WHERE `name`='btbi'
2018-04-01 04:34:09 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:34:09 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:34:09 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:34:09 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:34:09 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:34:09 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:34:09 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:34:09 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:34:09 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:34:09 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:34:09 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:34:09 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:34:09 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:34:09 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:34:09 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:34:11 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:34:11 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:34:11 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:34:11 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:34:11 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:34:11 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:34:11 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:34:11 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:34:11 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:34:13 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:34:13 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:34:13 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6890.22', '2018-04-01 04:34:06')
2018-04-01 04:34:13 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:34:13 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:34:13 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6890.22', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6890.22', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:34:06' WHERE `name`='btbi'
2018-04-01 04:34:13 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:34:13 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:34:13 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:34:14 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:34:14 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:34:14 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:34:14 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:34:14 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:34:14 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:34:14 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:34:14 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:34:14 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:34:14 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:34:14 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:34:14 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:34:15 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:34:15 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:34:15 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:34:15 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:34:15 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:34:15 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:34:15 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:34:15 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:34:15 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:34:17 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:34:17 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:34:17 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6898.78', '2018-04-01 04:34:08')
2018-04-01 04:34:17 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:34:17 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:34:17 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6898.78', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6898.78', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:34:08' WHERE `name`='btbi'
2018-04-01 04:34:17 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:34:17 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:34:17 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:34:17 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:34:17 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:34:17 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:34:17 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:34:17 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:34:17 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:34:17 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:34:17 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:34:17 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:34:17 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:34:17 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:34:17 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:34:18 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:34:18 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:34:18 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:34:19 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:34:19 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:34:19 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:34:19 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:34:19 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:34:19 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:34:20 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:34:20 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:34:20 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6894.00', '2018-04-01 04:34:13')
2018-04-01 04:34:20 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:34:20 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:34:20 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6894.00', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6894.00', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:34:13' WHERE `name`='btbi'
2018-04-01 04:34:20 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:34:20 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:34:20 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:34:20 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:34:20 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:34:20 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:34:21 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:34:21 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:34:21 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:34:21 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:34:21 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:34:21 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:34:21 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:34:21 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:34:21 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:34:22 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:34:22 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:34:22 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:34:22 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:34:22 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:34:22 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:34:22 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:34:22 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:34:22 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:34:23 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:34:23 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:34:23 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6891.79', '2018-04-01 04:34:15')
2018-04-01 04:34:24 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:34:24 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:34:24 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6891.79', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6891.79', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:34:15' WHERE `name`='btbi'
2018-04-01 04:34:24 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:34:24 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:34:24 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:34:24 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:34:24 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:34:24 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:34:24 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:34:24 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:34:24 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:34:24 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:34:24 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:34:24 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:34:24 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:34:24 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:34:24 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:34:25 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:34:25 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:34:25 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:34:25 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:34:25 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:34:25 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:34:25 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:34:25 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:34:25 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:34:27 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:34:27 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:34:27 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6894.00', '2018-04-01 04:34:17')
2018-04-01 04:34:27 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:34:27 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:34:27 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6894.00', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6894.00', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:34:17' WHERE `name`='btbi'
2018-04-01 04:34:27 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:34:27 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:34:27 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:34:27 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:34:27 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:34:27 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:34:27 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:34:27 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:34:27 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:34:27 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:34:27 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:34:27 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:34:27 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:34:27 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:34:27 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:34:28 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:34:28 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:34:28 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:34:28 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:34:28 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:34:28 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:34:28 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:34:28 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:34:28 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:34:30 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:34:30 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:34:30 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6893.51', '2018-04-01 04:34:21')
2018-04-01 04:34:30 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:34:30 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:34:30 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6893.51', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6893.51', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:34:21' WHERE `name`='btbi'
2018-04-01 04:34:30 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:34:30 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:34:30 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:34:30 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:34:30 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:34:30 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:34:30 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:34:30 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:34:30 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:34:30 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:34:30 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:34:30 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:34:30 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:34:30 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:34:30 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:34:32 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:34:32 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:34:32 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:34:32 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:34:32 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:34:32 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:34:32 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:34:32 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:34:32 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:34:33 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:34:33 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:34:33 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6893.51', '2018-04-01 04:34:25')
2018-04-01 04:34:33 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:34:33 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:34:33 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6893.51', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6893.51', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:34:25' WHERE `name`='btbi'
2018-04-01 04:34:33 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:34:33 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:34:33 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:34:34 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:34:34 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:34:34 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:34:34 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:34:34 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:34:34 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:34:34 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:34:34 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:34:34 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:34:34 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:34:34 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:34:34 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:34:35 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:34:35 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:34:35 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:34:35 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:34:35 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:34:35 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:34:35 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:34:35 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:34:35 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:34:37 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:34:37 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:34:37 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6893.83', '2018-04-01 04:34:28')
2018-04-01 04:34:37 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:34:37 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:34:37 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6893.83', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6893.83', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:34:28' WHERE `name`='btbi'
2018-04-01 04:34:37 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:34:37 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:34:37 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:34:37 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:34:37 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:34:37 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:34:37 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:34:37 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:34:37 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:34:37 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:34:37 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:34:37 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:34:37 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:34:37 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:34:37 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:34:38 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:34:38 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:34:38 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:34:38 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:34:38 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:34:38 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:34:38 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:34:38 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:34:38 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:34:40 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:34:40 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:34:40 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6900.60', '2018-04-01 04:34:32')
2018-04-01 04:34:40 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:34:40 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:34:40 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6900.60', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6900.60', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:34:32' WHERE `name`='btbi'
2018-04-01 04:34:40 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:34:40 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:34:40 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:34:40 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:34:40 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:34:40 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:34:40 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:34:40 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:34:40 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:34:40 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:34:40 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:34:40 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:34:40 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:34:40 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:34:40 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:34:42 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:34:42 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:34:42 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:34:42 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:34:42 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:34:42 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:34:42 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:34:42 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:34:42 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:34:44 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:34:44 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:34:44 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6890.26', '2018-04-01 04:34:36')
2018-04-01 04:34:44 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:34:44 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:34:44 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6890.26', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6890.26', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:34:36' WHERE `name`='btbi'
2018-04-01 04:34:44 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:34:44 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:34:44 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:34:44 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:34:44 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:34:44 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:34:44 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:34:44 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:34:44 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:34:44 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:34:44 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:34:44 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:34:44 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:34:44 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:34:44 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:34:46 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:34:46 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:34:46 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:34:46 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:34:46 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:34:46 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:34:46 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:34:46 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:34:46 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:34:47 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:34:48 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:34:48 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6890.26', '2018-04-01 04:34:39')
2018-04-01 04:34:48 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:34:48 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:34:48 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6890.26', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6890.26', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:34:39' WHERE `name`='btbi'
2018-04-01 04:34:48 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:34:48 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:34:48 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:34:48 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:34:48 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:34:48 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:34:48 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:34:48 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:34:48 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:34:48 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:34:48 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:34:48 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:34:48 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:34:48 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:34:48 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:34:49 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:34:49 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:34:49 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:34:49 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:34:49 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:34:49 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:34:49 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:34:49 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:34:49 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:34:52 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:34:52 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:34:52 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6899.68', '2018-04-01 04:34:43')
2018-04-01 04:34:52 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:34:52 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:34:52 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6899.68', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6899.68', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:34:43' WHERE `name`='btbi'
2018-04-01 04:34:52 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:34:52 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:34:52 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:34:52 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:34:52 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:34:52 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:34:52 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:34:52 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:34:52 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:34:52 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:34:53 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:34:53 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:34:53 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:34:53 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:34:53 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:34:54 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:34:54 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:34:54 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:34:54 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:34:54 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:34:54 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:34:54 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:34:54 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:34:54 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:34:56 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:34:56 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:34:56 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6899.68', '2018-04-01 04:34:48')
2018-04-01 04:34:56 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:34:56 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:34:56 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6899.68', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6899.68', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:34:48' WHERE `name`='btbi'
2018-04-01 04:34:56 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:34:56 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:34:56 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:34:56 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:34:56 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:34:56 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:34:56 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:34:56 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:34:56 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:34:56 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:34:56 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:34:56 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:34:56 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:34:56 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:34:56 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:34:57 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:34:57 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:34:57 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:34:57 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:34:57 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:34:57 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:34:57 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:34:57 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:34:57 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:34:59 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:34:59 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:34:59 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6899.68', '2018-04-01 04:34:50')
2018-04-01 04:34:59 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:34:59 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:34:59 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6899.68', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6899.68', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:34:50' WHERE `name`='btbi'
2018-04-01 04:34:59 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:34:59 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:34:59 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:34:59 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:34:59 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:34:59 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:34:59 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:34:59 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:34:59 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:34:59 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:34:59 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:34:59 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:34:59 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:34:59 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:34:59 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:35:01 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:35:01 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:35:01 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:35:01 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:35:01 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:35:01 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:35:01 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:35:01 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:35:01 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:35:02 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:35:02 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:35:02 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6899.68', '2018-04-01 04:34:54')
2018-04-01 04:35:02 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:35:02 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:35:02 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6899.68', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6899.68', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:34:54' WHERE `name`='btbi'
2018-04-01 04:35:02 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:35:02 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:35:02 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:35:03 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:35:03 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:35:03 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:35:03 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:35:03 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:35:03 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:35:03 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:35:03 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:35:03 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:35:03 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:35:03 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:35:03 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:35:04 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:35:04 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:35:04 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:35:04 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:35:04 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:35:04 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:35:04 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:35:04 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:35:04 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:35:05 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:35:05 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:35:05 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6896.37', '2018-04-01 04:34:57')
2018-04-01 04:35:05 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:35:06 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:35:06 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6896.37', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6896.37', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:34:57' WHERE `name`='btbi'
2018-04-01 04:35:06 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:35:06 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:35:06 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:35:06 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:35:06 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:35:06 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:35:06 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:35:06 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:35:06 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:35:06 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:35:06 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:35:06 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:35:06 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:35:06 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:35:06 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:35:07 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:35:07 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:35:07 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:35:07 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:35:07 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:35:07 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:35:07 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:35:07 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:35:07 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:35:09 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:35:09 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:35:09 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6900.20', '2018-04-01 04:35:01')
2018-04-01 04:35:09 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:35:09 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:35:09 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6900.20', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6900.20', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:35:01' WHERE `name`='btbi'
2018-04-01 04:35:09 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:35:09 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:35:09 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:35:09 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:35:09 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:35:09 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:35:09 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:35:09 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:35:09 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:35:09 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:35:09 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:35:09 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:35:09 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:35:09 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:35:09 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:35:11 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:35:11 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:35:11 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:35:11 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:35:11 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:35:11 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:35:11 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:35:11 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:35:11 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:35:12 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:35:12 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:35:12 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6900.20', '2018-04-01 04:35:03')
2018-04-01 04:35:12 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:35:12 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:35:12 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6900.20', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6900.20', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:35:03' WHERE `name`='btbi'
2018-04-01 04:35:12 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:35:12 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:35:12 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:35:12 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:35:12 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:35:12 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:35:12 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:35:12 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:35:12 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:35:12 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:35:13 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:35:13 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:35:13 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:35:13 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:35:13 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:35:14 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:35:14 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:35:14 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:35:14 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:35:14 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:35:14 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:35:14 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:35:14 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:35:14 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:35:15 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:35:15 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:35:15 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6900.20', '2018-04-01 04:35:06')
2018-04-01 04:35:15 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:35:15 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:35:15 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6900.20', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6900.20', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:35:06' WHERE `name`='btbi'
2018-04-01 04:35:16 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:35:16 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:35:16 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:35:16 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:35:16 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:35:16 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:35:16 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:35:16 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:35:16 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:35:16 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:35:16 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:35:16 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:35:16 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:35:16 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:35:16 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:35:17 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:35:17 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:35:17 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:35:17 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:35:17 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:35:17 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:35:17 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:35:17 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:35:17 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:35:19 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:35:19 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:35:19 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6900.20', '2018-04-01 04:35:10')
2018-04-01 04:35:19 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:35:19 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:35:19 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6900.20', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6900.20', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:35:10' WHERE `name`='btbi'
2018-04-01 04:35:19 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:35:19 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:35:19 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:35:19 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:35:19 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:35:19 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:35:19 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:35:19 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:35:19 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:35:19 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:35:19 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:35:19 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:35:19 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:35:19 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:35:19 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:35:20 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:35:20 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:35:20 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:35:20 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:35:20 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:35:20 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:35:20 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:35:20 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:35:20 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:35:22 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:35:22 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:35:22 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6890.01', '2018-04-01 04:35:14')
2018-04-01 04:35:22 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:35:22 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:35:22 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6890.01', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6890.01', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:35:14' WHERE `name`='btbi'
2018-04-01 04:35:22 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:35:22 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:35:22 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:35:22 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:35:22 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:35:22 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:35:22 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:35:22 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:35:22 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:35:22 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:35:22 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:35:22 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:35:22 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:35:22 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:35:22 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:35:24 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:35:24 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:35:24 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:35:24 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:35:24 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:35:24 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:35:24 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:35:24 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:35:24 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:35:25 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:35:25 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:35:25 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6896.56', '2018-04-01 04:35:17')
2018-04-01 04:35:25 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:35:25 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:35:25 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6896.56', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6896.56', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:35:17' WHERE `name`='btbi'
2018-04-01 04:35:25 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:35:25 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:35:25 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:35:25 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:35:25 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:35:25 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:35:26 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:35:26 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:35:26 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:35:26 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:35:26 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:35:26 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:35:26 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:35:26 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:35:26 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:35:27 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:35:27 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:35:27 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:35:27 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:35:27 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:35:27 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:35:27 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:35:27 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:35:27 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:35:28 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:35:28 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:35:28 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6900.02', '2018-04-01 04:35:20')
2018-04-01 04:35:28 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:35:28 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:35:28 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6900.02', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6900.02', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:35:20' WHERE `name`='btbi'
2018-04-01 04:35:28 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:35:28 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:35:28 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:35:29 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:35:29 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:35:29 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:35:29 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:35:29 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:35:29 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:35:29 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:35:29 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:35:29 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:35:29 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:35:29 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:35:29 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:35:30 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:35:30 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:35:30 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:35:30 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:35:30 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:35:30 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:35:30 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:35:30 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:35:30 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:35:32 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:35:32 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:35:32 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6900.02', '2018-04-01 04:35:23')
2018-04-01 04:35:32 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:35:32 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:35:32 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6900.02', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6900.02', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:35:23' WHERE `name`='btbi'
2018-04-01 04:35:32 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:35:32 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:35:32 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:35:32 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:35:32 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:35:32 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:35:32 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:35:32 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:35:32 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:35:32 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:35:32 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:35:32 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:35:32 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:35:32 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:35:32 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:35:33 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:35:33 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:35:33 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:35:33 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:35:33 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:35:33 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:35:33 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:35:33 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:35:33 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:35:35 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:35:35 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:35:35 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6900.62', '2018-04-01 04:35:27')
2018-04-01 04:35:35 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:35:35 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:35:35 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6900.62', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6900.62', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:35:27' WHERE `name`='btbi'
2018-04-01 04:35:35 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:35:35 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:35:35 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:35:35 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:35:35 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:35:35 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:35:35 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:35:35 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:35:35 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:35:35 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:35:35 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:35:35 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:35:35 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:35:35 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:35:35 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:35:37 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:35:37 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:35:37 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:35:37 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:35:37 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:35:37 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:35:37 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:35:37 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:35:37 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:35:38 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:35:38 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:35:38 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6900.06', '2018-04-01 04:35:29')
2018-04-01 04:35:38 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:35:38 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:35:38 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6900.06', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6900.06', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:35:29' WHERE `name`='btbi'
2018-04-01 04:35:38 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:35:38 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:35:38 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:35:38 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:35:38 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:35:38 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:35:38 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:35:38 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:35:38 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:35:38 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:35:38 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:35:38 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:35:38 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:35:38 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:35:38 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:35:40 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:35:40 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:35:40 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:35:40 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:35:40 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:35:40 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:35:40 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:35:40 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:35:40 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:35:41 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:35:41 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:35:41 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6900.06', '2018-04-01 04:35:29')
2018-04-01 04:35:41 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:35:41 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:35:41 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:35:42 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:35:42 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:35:42 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:35:42 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:35:42 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:35:42 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:35:42 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:35:42 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:35:42 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:35:42 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:35:42 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:35:42 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:35:43 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:35:43 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:35:43 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:35:43 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:35:43 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:35:43 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:35:43 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:35:43 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:35:43 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:35:44 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:35:44 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:35:44 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6904.17', '2018-04-01 04:35:36')
2018-04-01 04:35:44 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:35:45 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:35:45 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6904.17', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6904.17', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:35:36' WHERE `name`='btbi'
2018-04-01 04:35:45 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:35:45 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:35:45 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:35:45 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:35:45 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:35:45 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:35:45 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:35:45 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:35:45 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:35:45 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:35:45 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:35:45 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:35:45 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:35:45 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:35:45 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:35:46 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:35:46 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:35:46 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:35:46 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:35:46 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:35:46 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:35:46 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:35:46 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:35:46 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:35:48 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:35:48 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:35:48 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6904.98', '2018-04-01 04:35:40')
2018-04-01 04:35:48 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:35:48 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:35:48 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6904.98', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6904.98', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:35:40' WHERE `name`='btbi'
2018-04-01 04:35:48 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:35:48 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:35:48 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:35:48 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:35:48 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:35:48 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:35:48 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:35:48 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:35:48 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:35:48 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:35:48 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:35:48 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:35:48 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:35:49 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:35:49 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:35:50 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:35:50 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:35:50 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:35:50 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:35:50 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:35:50 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:35:50 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:35:50 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:35:50 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:35:52 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:35:52 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:35:52 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6911.30', '2018-04-01 04:35:43')
2018-04-01 04:35:52 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:35:52 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:35:52 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6911.30', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6911.30', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:35:43' WHERE `name`='btbi'
2018-04-01 04:35:52 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:35:52 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:35:52 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:35:52 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:35:52 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:35:52 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:35:52 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:35:52 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:35:52 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:35:52 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:35:52 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:35:52 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:35:52 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:35:52 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:35:52 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:35:53 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:35:53 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:35:53 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:35:53 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:35:53 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:35:53 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:35:53 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:35:53 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:35:53 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:35:55 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:35:55 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:35:55 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6917.67', '2018-04-01 04:35:47')
2018-04-01 04:35:55 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:35:55 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:35:55 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6917.67', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6917.67', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:35:47' WHERE `name`='btbi'
2018-04-01 04:35:55 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:35:55 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:35:55 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:35:55 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:35:55 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:35:55 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:35:55 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:35:55 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:35:55 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:35:55 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:35:55 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:35:55 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:35:55 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:35:55 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:35:55 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:35:56 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:35:56 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:35:56 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:35:56 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:35:56 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:35:56 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:35:56 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:35:57 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:35:57 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:35:58 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:35:58 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:35:58 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6916.40', '2018-04-01 04:35:49')
2018-04-01 04:35:58 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:35:58 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:35:58 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6916.40', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6916.40', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:35:49' WHERE `name`='btbi'
2018-04-01 04:35:58 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:35:58 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:35:58 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:35:58 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:35:58 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:35:58 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:35:58 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:35:58 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:35:58 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:35:58 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:35:58 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:35:58 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:35:58 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:35:58 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:35:58 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:36:00 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:36:00 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:36:00 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:36:00 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:36:00 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:36:00 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:36:00 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:36:00 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:36:00 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:36:02 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:36:02 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:36:02 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6921.94', '2018-04-01 04:35:54')
2018-04-01 04:36:02 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:36:02 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:36:02 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6921.94', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6921.94', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:35:54' WHERE `name`='btbi'
2018-04-01 04:36:02 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:36:02 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:36:02 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:36:02 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:36:02 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:36:02 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:36:02 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:36:02 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:36:02 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:36:02 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:36:03 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:36:03 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:36:03 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:36:03 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:36:03 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:36:04 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:36:04 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:36:04 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:36:04 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:36:04 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:36:04 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:36:04 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:36:04 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:36:04 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:36:05 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:36:05 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:36:05 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6917.20', '2018-04-01 04:35:56')
2018-04-01 04:36:05 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:36:05 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:36:05 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6917.20', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6917.20', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:35:56' WHERE `name`='btbi'
2018-04-01 04:36:05 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:36:05 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:36:05 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:36:06 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:36:06 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:36:06 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:36:06 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:36:06 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:36:06 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:36:06 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:36:06 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:36:06 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:36:06 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:36:06 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:36:06 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:36:07 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:36:07 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:36:07 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:36:07 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:36:07 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:36:07 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:36:07 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:36:07 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:36:07 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:36:09 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:36:09 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:36:09 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6917.22', '2018-04-01 04:36:00')
2018-04-01 04:36:09 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:36:09 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:36:09 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6917.22', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6917.22', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:36:00' WHERE `name`='btbi'
2018-04-01 04:36:09 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:36:09 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:36:09 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:36:09 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:36:09 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:36:09 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:36:09 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:36:09 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:36:09 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:36:09 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:36:09 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:36:09 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:36:09 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:36:09 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:36:09 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:36:11 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:36:11 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:36:11 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:36:11 [trace][yii\base\Controller::runAction] Route to run: init/gather
2018-04-01 04:36:11 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather()
2018-04-01 04:36:11 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:36:11 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:36:11 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:36:11 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:36:12 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_btbi`
2018-04-01 04:36:12 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_btbi' AND kcu.table_name = 'data_btbi'
2018-04-01 04:36:12 [info][yii\db\Command::execute] INSERT INTO `data_btbi` (`price`, `time`) VALUES ('6917.31', '2018-04-01 04:36:04')
2018-04-01 04:36:12 [info][yii\db\Command::query] SHOW FULL COLUMNS FROM `data_all`
2018-04-01 04:36:12 [info][yii\db\Command::query] SELECT
    kcu.constraint_name,
    kcu.column_name,
    kcu.referenced_table_name,
    kcu.referenced_column_name
FROM information_schema.referential_constraints AS rc
JOIN information_schema.key_column_usage AS kcu ON
    (
        kcu.constraint_catalog = rc.constraint_catalog OR
        (kcu.constraint_catalog IS NULL AND rc.constraint_catalog IS NULL)
    ) AND
    kcu.constraint_schema = rc.constraint_schema AND
    kcu.constraint_name = rc.constraint_name
WHERE rc.constraint_schema = database() AND kcu.table_schema = database()
AND rc.table_name = 'data_all' AND kcu.table_name = 'data_all'
2018-04-01 04:36:12 [info][yii\db\Command::execute] UPDATE `data_all` SET `price`='6917.31', `open`='6839.63}', `high`='7231.73', `low`='6756.00', `close`='6917.31', `diff`='0', `diff_rate`='0', `time`='2018-04-01 04:36:04' WHERE `name`='btbi'
2018-04-01 04:36:12 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:36:12 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:36:12 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:36:13 [trace][yii\base\Application::bootstrap] Bootstrap with yii\log\Dispatcher
2018-04-01 04:36:13 [trace][yii\base\Module::getModule] Loading module: gii
2018-04-01 04:36:13 [trace][yii\base\Application::bootstrap] Bootstrap with yii\gii\Module::bootstrap()
2018-04-01 04:36:13 [trace][yii\base\Controller::runAction] Route to run: init/gather6
2018-04-01 04:36:13 [trace][yii\base\InlineAction::runWithParams] Running action: console\controllers\InitController::actionGather6()
2018-04-01 04:36:13 [info][yii\db\Command::query] SELECT option_value FROM `option` WHERE option_name='console_settings'
2018-04-01 04:36:13 [info][yii\db\Connection::open] Opening DB connection: mysql:host=127.0.0.1;port=3306;dbname=wsyiimq
2018-04-01 04:36:13 [info][yii\db\Command::query] SELECT `option_value`, `option_name` FROM `option` `option` WHERE `type`=2
2018-04-01 04:36:13 [info][yii\db\Command::query] SELECT `table_name`, `code`, `trade_time`, `id` FROM `product` `product` WHERE (`state`=1) AND (`on_sale`=1) AND (`source`=1)
2018-04-01 04:36:13 [info][yii\db\Command::execute]   UPDATE
                         `order` o,
                         product p,
                         data_all a
                     SET
                        sell_price = a.price,
                       profit = IF (
                             o.rise_fall = 1,
                             a.price - o.price,
                             o.price - a.price
                        ) * o.hand * o.one_profit
                    WHERE
                        a.name = p.`table_name`
                     AND o.product_id = p.id
                     AND o.order_state =  1
                    AND sell_price != a.price
2018-04-01 04:36:13 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=1 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
2018-04-01 04:36:13 [info][yii\db\Command::query] SELECT id from `order` where (order_state = 1 AND sim=2 AND (
            profit + deposit <= 0 OR (profit <= stop_loss_point * -1 *one_profit*hand  AND stop_loss_point <> 0) OR (profit >= stop_profit_point*one_profit*hand AND stop_profit_point <> 0)))
